
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="5065d706-ead4-5883-85c5-3d1d9a8dc215")}catch(e){}}();
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1565],{64457:function(e,t,n){"use strict";var r=n(85893),i=n(67294),o=n(45697),a=n.n(o),s=n(94184),l=n.n(s),c=n(14416),u=n(26793),d=n(5152),f=n(65857),p=n(77849),h=n(46220),m=n(18967),v=n(59387),b=n(32754),g=n(35783);n(63735);function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function j(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(l){s=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return y(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var x=(0,d.default)((function(){return n.e(8366).then(n.bind(n,58366))}),{loadableGenerated:{webpack:function(){return[58366]}},ssr:!1});function C(e){var t,o,a,s,d,y,C,_,O,k,S=e.goToStep,P=e.onBackMapsButton,I=e.isLoading,R=(0,c.v9)((function(e){return e.addressSearch})),w=R.search,N=R.modalAddressNotFound,T=(0,i.useState)(!1),A=T[0],E=T[1],q=(0,i.useState)(!1),M=q[0],Z=q[1],D=(0,c.I0)(),L=(0,u.$)("address").t,F=w.selected,B=null===F||void 0===F?void 0:F.geolocated,G=(0,i.useState)(F?{lat:null===w||void 0===w||null===(t=w.selected)||void 0===t||null===(o=t.initialCoords)||void 0===o?void 0:o.latitude,lng:null===w||void 0===w||null===(a=w.selected)||void 0===a||null===(s=a.initialCoords)||void 0===s?void 0:s.longitude}:void 0),U=G[0],H=G[1],z=j((0,h.Z)(m.x4),1)[0],$=(0,i.useState)(void 0),V=$[0],W=$[1],Q=JSON.stringify(F),J=JSON.stringify(U);(0,i.useEffect)((function(){B?g.ZP.getGeo().then((function(e){var t=e.coords,n=t.latitude,r=t.longitude;W({lat:n,lng:r})}),(function(){})):W(void 0)}),[Q]),(0,i.useEffect)((function(){var e,t,n,r;(null===U||void 0===U?void 0:U.lat)===(null===F||void 0===F||null===(e=F.initialCoords)||void 0===e?void 0:e.latitude)&&(null===U||void 0===U?void 0:U.lng)===(null===F||void 0===F||null===(t=F.initialCoords)||void 0===t?void 0:t.longitude)||H(F?{lat:null===F||void 0===F||null===(n=F.initialCoords)||void 0===n?void 0:n.latitude,lng:null===F||void 0===F||null===(r=F.initialCoords)||void 0===r?void 0:r.longitude}:void 0)}),[Q,J]);var Y=(0,i.useCallback)((function(e,t){if("modalAddressNotFound"===e)D((0,p.a4)(t))}),[D]);if(!z||I)return(0,r.jsx)("div",{className:"address-finder__no-api","data-test-id":"spinner",children:(0,r.jsx)(v.$j,{})});if(z&&!("google"in n.g))return(0,r.jsx)("div",{className:"address-finder__no-api",children:(0,r.jsx)(v.Bc,{})});var K=(0,b.Z)([null===w||void 0===w||null===(d=w.selected)||void 0===d?void 0:d.street,null===w||void 0===w||null===(y=w.selected)||void 0===y?void 0:y.streetNumber],L("maps.address-street-separator")),X=(0,b.Z)([null===w||void 0===w||null===(C=w.selected)||void 0===C?void 0:C.city,null===w||void 0===w||null===(_=w.selected)||void 0===_?void 0:_.state]," - "),ee=(0,b.Z)([null===w||void 0===w||null===(O=w.selected)||void 0===O?void 0:O.district,X]),te=function(e,t){if("Request failed with status code 404"===e)return t("search.no-address-found");return}(w.error,L);return V||U||B?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:l()("address-finder__complete-form",{"address-finder__complete-form--active":M}),children:[(0,r.jsx)("div",{className:"address-finder__powered-by",children:(0,r.jsx)(x,{})}),(0,r.jsx)(f.q9,{goToStep:S})]}),(0,r.jsx)(f.Th,{geoPosition:V,isLoading:w.isLoadingSelected,restrictDrag:!(null===w||void 0===w||null===(k=w.selected)||void 0===k?void 0:k.geolocated),position:U,onDragEnd:function(e){var t,n,r,i;e.lat!==(null===w||void 0===w||null===(t=w.selected)||void 0===t||null===(n=t.coords)||void 0===n?void 0:n.latitude)&&e.lng!==(null===w||void 0===w||null===(r=w.selected)||void 0===r||null===(i=r.coords)||void 0===i?void 0:i.longitude)&&E(!0),D((0,p.qN)({latitude:e.lat,longitude:e.lng}))},isApiLoaded:z,canSubmit:!te,title:M?"":K,subtitle:M?"":ee,handleBackButton:function(){M?Z(!1):P()},handleSubmit:function(){var e=A;return E(!1),e&&D((0,p.mt)({latitude:F.coords.latitude,longitude:F.coords.longitude})),Z(!0)},disabled:M||!w.selected,toastMessage:te,showFocusButton:Boolean(B&&V),isModalAddressNotFoundOpen:N.isOpen,setModalOpen:Y})]}):null}C.propTypes={goToStep:a().func,onBackMapsButton:a().func.isRequired,isLoading:a().bool},C.defaultProps={goToStep:function(){},isLoading:!1},t.Z=C},42660:function(e,t,n){"use strict";var r=n(85893),i=(n(67294),n(45697)),o=n.n(i),a=n(94184),s=n.n(a),l=n(5152),c=(n(29306),(0,l.default)((function(){return n.e(515).then(n.bind(n,10515))}),{loadableGenerated:{webpack:function(){return[10515]}},ssr:!1})),u=(0,l.default)((function(){return n.e(6660).then(n.bind(n,66660))}),{loadableGenerated:{webpack:function(){return[66660]}},ssr:!1}),d={empty:o().bool,forMobile:o().bool,forDesktop:o().bool},f=function(e){var t=e.empty,n=e.forMobile,i=e.forDesktop;return(0,r.jsx)("div",{className:s()("address-icon",{"address-icon--empty":t,"address-icon--mobile":n,"address-icon--desktop":i}),children:t?(0,r.jsx)(u,{}):(0,r.jsx)(c,{})})};f.propTypes=d,f.defaultProps={empty:!1,forMobile:!1,forDesktop:!1},t.Z=f},10902:function(e,t,n){"use strict";n.d(t,{Z:function(){return M}});var r=n(85893),i=n(67294),o=n(45697),a=n.n(o),s=n(91768),l=n(14416),c=n(14890),u=n(67926),d=n(36750),f=n(40059),p=n(35432),h=n.n(p),m=n(59387),v=n(67525);n(47112);function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var g=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){b(e,t,n[t])}))}return e}({},v.Z,{restaurantAddress:a().string.isRequired}),y=function(e){var t=e.t,n=e.restaurantAddress;return(0,r.jsxs)("div",{className:"address-invalid-wrapper address-invalid-from",children:[(0,r.jsx)(m.JO,{className:"address-invalid-from__icon",name:"pin"}),(0,r.jsxs)(h(),{tagName:"p",className:"address-invalid-dialog__text",tabIndex:"0",clamp:2,useNativeClamp:!0,children:[t("invalid-address-dialog.restaurant-address"),(0,r.jsx)("br",{}),(0,r.jsx)("span",{className:"address-invalid-dialog__address",children:n})]})]})};y.propTypes=g;var j=(0,s.Z)("restaurant")(y);function x(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var C=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){x(e,t,n[t])}))}return e}({},v.Z,{deliveryAddress:a().string.isRequired}),_=function(e){var t=e.t,n=e.deliveryAddress;return(0,r.jsxs)("div",{className:"address-invalid-wrapper address-invalid-to",children:[(0,r.jsx)(m.JO,{className:"address-invalid-to__icon",name:"alert"}),(0,r.jsxs)(h(),{tagName:"p",className:"address-invalid-dialog__text",tabIndex:"0",clamp:2,useNativeClamp:!0,children:[t("invalid-address-dialog.not-delivery-here"),(0,r.jsx)("br",{}),(0,r.jsx)("span",{className:"address-invalid-dialog__address",children:n})]})]})};_.propTypes=C;var O=(0,s.Z)("restaurant")(_);function k(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function S(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function P(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function I(e){return I=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},I(e)}function R(e,t){return!t||"object"!==N(t)&&"function"!==typeof t?k(e):t}function w(e,t){return w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},w(e,t)}var N=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function T(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I(e);if(t){var i=I(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return R(this,n)}}var A={toggleAddressModalAction:f.Ec},E=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){P(e,t,n[t])}))}return e}({},v.Z,{actions:(0,d.Z)(Object.keys(A),a().func.isRequired).isRequired,isOpen:a().bool,onRequestClose:a().func.isRequired,restaurantAddress:a().string.isRequired,deliveryAddress:a().string}),q=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&w(e,t)}(a,e);var t,n,i,o=T(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=o.call(this,e)).openModal=t.openModal.bind(k(t)),t.closeModal=t.closeModal.bind(k(t)),t}return t=a,(n=[{key:"openModal",value:function(){var e=this.props,t=e.actions;(0,e.onRequestClose)(),t.toggleAddressModalAction({open:!0,keepCurrentPageAfterSelect:!0})}},{key:"closeModal",value:function(e){this.setState(P({},e,!1))}},{key:"pickAddressMessage",value:function(){return this.props.deliveryAddress?"change-address-label":"enter-address"}},{key:"dismissMessage",value:function(){return this.props.deliveryAddress?"restaurant:invalid-address-dialog.confirm-dismiss-label":"common:cancel"}},{key:"render",value:function(){var e=this.props,t=e.t,n=e.isOpen,i=e.onRequestClose,o=e.deliveryAddress,a=e.restaurantAddress;return(0,r.jsxs)(m.u_,{isOpen:n,type:"dialog",animation:"bottom",onRequestClose:i,variant:"address-invalid-dialog",children:[!o&&(0,r.jsx)("h1",{className:"address-invalid-dialog__title",children:t("restaurant:invalid-address-dialog.title")}),(0,r.jsx)(j,{restaurantAddress:a}),o&&(0,r.jsx)(O,{deliveryAddress:o}),(0,r.jsx)(m.zx,{tabIndex:"0",color:"primary",fullWidth:!0,label:t("restaurant:invalid-address-dialog.".concat(this.pickAddressMessage())),type:"button",onClick:this.openModal,"data-test-id":"address-invalid-dialog__change-address"}),(0,r.jsx)(m.zx,{tabIndex:"0",color:"white",fullWidth:!0,label:t(this.dismissMessage()),type:"button",onClick:i,"data-test-id":"address-invalid-dialog__dismiss-button"})]})}}])&&S(t.prototype,n),i&&S(t,i),a}(i.PureComponent);q.propTypes=E,q.defaultProps={isOpen:!1,deliveryAddress:""};var M=(0,u.Z)(q,[(0,l.$j)(null,(function(e){return{actions:(0,c.DE)(A,e)}})),(0,s.Z)(["common","restaurant"])])},36991:function(e,t,n){"use strict";var r=n(85893),i=n(67294),o=n(45697),a=n.n(o),s=n(94184),l=n.n(s),c=n(26793),u=n(14416),d=n(5152),f=n(77849),p=n(59387),h=(n(71209),(0,d.default)((function(){return n.e(8366).then(n.bind(n,58366))}),{loadableGenerated:{webpack:function(){return[58366]}},ssr:!1}));function m(e){var t=e.onSubmit,n=e.onBack,o=e.role,a=e.onClick,s=e.shouldFocusInput,d=e.shouldCleanInput,m=e.sticky,v=e.icon,b=(0,c.$)(["common","address"]).t,g=(0,u.v9)((function(e){return e.addressSearch})),y=g.geolocation,j=g.search.sessionToken,x=(0,i.useState)(""),C=x[0],_=x[1],O=(0,i.useState)(b("address:search.input-label")),k=O[0],S=O[1],P=(0,i.useRef)(null),I=(0,u.I0)(),R="button"===o,w=function(){return _("")};return(0,i.useEffect)((function(){P.current&&s&&P.current.focus(),d&&(w(),I((0,f.q2)()))}),[s,d,I]),(0,r.jsxs)("div",{className:l()("address-search-input",{"address-search-input--role-button":R,"address-search-input--sticky":m}),children:[(0,r.jsx)("input",{ref:P,className:"address-search-input__field",placeholder:k,label:k,"aria-label":b("address:search.input-label"),name:"address-ifood-search",onChange:function(e){_(e.target.value),t(e.target.value,y,j)},value:C,disabled:R,onFocus:function(){return S("")},onBlur:function(){return S(b("address:search.input-label"))}}),(0,r.jsx)(p.Ei,{onClick:n,icon:v||R?"search":"arrow-left-thin",variant:"address-search-input__icon",transparent:!0,ariaLabel:b("common:go-back")}),C&&(0,r.jsx)(p.Ei,{icon:"error",color:"gray",variant:"address-search-input__erase-button",transparent:!0,ariaLabel:b("common:clear-field"),onClick:function(){w(),I((0,f.q2)())}}),R&&(0,r.jsx)("button",{className:"address-search-input__button",onClick:a,"aria-label":k}),!R&&(0,r.jsx)("div",{className:"address-search-input__powered-by",children:(0,r.jsx)(h,{})})]})}m.propTypes={shouldFocusInput:a().bool,shouldCleanInput:a().bool,onBack:a().func,onClick:a().func,onSubmit:a().func,role:a().oneOf(["button","input"]),sticky:a().bool,icon:a().string},m.defaultProps={shouldFocusInput:!1,shouldCleanInput:!1,onSubmit:function(){},onBack:void 0,onClick:void 0,role:"input",sticky:!1,icon:void 0},t.Z=m},62794:function(e,t,n){"use strict";var r=n(85893),i=n(67294),o=n(45697),a=n.n(o),s=n(26793),l=n(27361),c=n.n(l),u=n(41609),d=n.n(u),f=n(5152),p=n(12751),h=n(65857),m=n(40507),v=(n(36837),(0,f.default)((function(){return n.e(4422).then(n.bind(n,24422))}),{loadableGenerated:{webpack:function(){return[24422]}},ssr:!1})),b={results:a().array,handleClick:a().func.isRequired,isLoading:a().bool,searchIsClean:a().bool,handleSearchOnMap:a().func,displayAddressNotFound:a().bool};function g(e){var t=e.results,n=e.handleClick,o=e.isLoading,a=e.searchIsClean,l=e.handleSearchOnMap,u=e.displayAddressNotFound,f=(0,s.$)(["address"]).t,b=(0,i.useState)(void 0),g=b[0],y=b[1];return(0,i.useEffect)((function(){t&&0!==t.length||y(void 0)}),[t]),(0,r.jsx)("ul",{className:"address-search-list",children:o?(0,r.jsx)(p.hO,{}):(0,r.jsxs)(r.Fragment,{children:[t.map((function(e){return(0,r.jsx)("li",{"data-test-id":"button-address-".concat(e.place_id),children:(0,r.jsx)(h.x4,{kind:"simple",onClick:function(){n(e),y(e.place_id)},hasKebab:!1,label:c()(e,"structured_formatting.main_text",e.description),subLabel:c()(e,"structured_formatting.secondary_text"),leftIcon:"pin-o",isActive:g===e.place_id})},e.place_id)})),u&&(a||!d()(t))&&(0,r.jsx)("li",{"data-test-id":"button-address-not-found",className:"address-search-list__not-found",children:(0,r.jsx)(h.x4,{kind:"simple",onClick:function(){m.Z.clickAddressSearchOnMapNotListed(),l(),y("notFound")},label:f("address-search.did-not-find-address"),subLabel:f("address-search.no-results-action"),hasKebab:!1,leftIcon:(0,r.jsx)(v,{}),isActive:"notFound"===g})})]})})}g.propTypes=b,g.defaultProps={results:[],isLoading:!1,searchIsClean:!1,displayAddressNotFound:!0,handleSearchOnMap:function(){}},t.Z=g},65857:function(e,t,n){"use strict";n.d(t,{x4:function(){return Qe},q9:function(){return Ht},Zx:function(){return I.Z},sE:function(){return P},G:function(){return Y},Th:function(){return yt},qo:function(){return He},pI:function(){return Xt},yM:function(){return Xe.Z},xc:function(){return et.Z},m:function(){return on},lJ:function(){return Ke},VG:function(){return It}});var r=n(85893),i=n(67294),o=n(26793),a=n(14416),s=n(41609),l=n.n(s),c=n(59387),u=n(22704),d=n(13629),f=n(32754),p=n(90338),h=n(99097),m=n(9032),v=n(12751),b=n(75215),g=n(35985),y=n(28511),j=n(40507),x=n(68877);n(50574);function C(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function O(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(l){s=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(e,t)||S(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(e){return function(e){if(Array.isArray(e))return C(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||S(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(e,t){if(e){if("string"===typeof e)return C(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?C(e,t):void 0}}var P=function(){var e=(0,o.$)("address").t,t=(0,a.I0)(),n=(0,i.useState)([]),s=n[0],C=n[1],S=(0,a.v9)((function(e){return e.addressSearch.customer})),P=S.isLoading,I=S.addresses,R=(0,a.v9)((function(e){return e.address})),w=O((0,g.Z)(),1)[0],N=(0,i.useState)(!1),T=N[0],A=N[1];(0,i.useEffect)((function(){if(P){var e=setTimeout((function(){A(!0)}),5e3);return function(){return clearTimeout(e)}}return A(!1),null}),[P]),(0,i.useEffect)((function(){w&&(t((0,h.bZ)()),j.Z.viewAddressListPage())}),[w,t]);var E=function(e){return!(!e||e.toLowerCase()!==u.S54)},q=function(e){return!(!e||e.toLowerCase()!==u.soK)},M=I.find((function(e){return E(e.alias)})),Z=I.find((function(e){return q(e.alias)})),D=I.filter((function(e){return!E(e.alias)&&!q(e.alias)})),L=function(e){x.ZP.updateGeoPoint(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){_(e,t,n[t])}))}return e}({},e.coordinates)),j.Z.clickAddressChangeAction(),t((0,m.Ul)((0,b.QD)(e)))},F=function(e){var n=e.externalId;j.Z.clickAddressEditAction();var r=I.find((function(e){return e.externalId===n}));t((0,m.sI)((0,b.QD)(r)))},B=function(n){var r=n.externalId,i=n.id;j.Z.clickAddressRemoveAction(),R&&R.externalId===r?t((0,y.PJ)({message:e("options.can-not-delete-current-address")})):(C(k(s).concat([r])),t((0,p.V$)(i)))},G=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{externalId:"",id:""};return{editCallback:function(){return F(e)},deleteCallback:function(){return B(e)}}};return P?(0,r.jsx)("div",{className:"address-list","data-test-id":"address-list-loading",children:T&&(0,r.jsx)(c.zx,{fullWidth:!0,label:"Tentar novamente",onClick:function(){return window.location.reload()},style:{marginTop:"3rem"}})||(0,r.jsx)(v.hO,{})}):(0,r.jsxs)("div",{className:"address-list","data-test-id":"address-list",children:[l()(I)&&(0,r.jsx)(It,{}),M&&(0,r.jsx)(Qe,{hidden:s.some((function(e){return e===M.externalId})),isActive:R&&R.externalId===M.externalId,label:e("home.button-label"),ariaLabel:e("home.button-aria-label"),subLabel:(0,d.MH)((0,f.Z)([null===M||void 0===M?void 0:M.streetName,null===M||void 0===M?void 0:M.streetNumber,null===M||void 0===M?void 0:M.complement])),onClick:function(){return L(M)},hasKebab:!0,leftIcon:"house",kebabActions:G(M)}),Z&&(0,r.jsx)(Qe,{hidden:s.some((function(e){return e===Z.externalId})),isActive:R&&R.externalId===Z.externalId,label:e("workplace.button-label"),ariaLabel:e("workplace.button-aria-label"),subLabel:(0,d.MH)((0,f.Z)([null===Z||void 0===Z?void 0:Z.streetName,null===Z||void 0===Z?void 0:Z.streetNumber,null===Z||void 0===Z?void 0:Z.complement])),onClick:function(){return L(Z)},hasKebab:!0,leftIcon:"coffee-cup",kebabActions:G(Z)}),D.map((function(e){var t=(0,d.MH)((0,f.Z)([null===e||void 0===e?void 0:e.streetName,null===e||void 0===e?void 0:e.streetNumber])),n=(0,f.Z)([(0,d.MH)((0,f.Z)([e.complement,e.neighborhood])),(0,f.Z)([(0,d.MH)(e.city),e.state]," - ")]);return(0,r.jsx)(Qe,{hidden:s.some((function(t){return t===e.externalId})),isActive:R&&R.externalId===e.externalId,label:t,ariaLabel:t,subLabel:n,onClick:function(){return L(e)},hasKebab:!0,leftIcon:"synchronize-arrow",kebabActions:G(e)},e.id)}))]})},I=n(42660),R=n(45697),w=n.n(R),N=n(91768),T=n(14890),A=n(38890),E=n(40059),q=n(67525),M=n(36750),Z=n(75463),D=n(57818),L=n(14622);n(54635);function F(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function B(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function G(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function U(e){return U=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},U(e)}function H(e,t){return!t||"object"!==$(t)&&"function"!==typeof t?F(e):t}function z(e,t){return z=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},z(e,t)}var $=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function V(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=U(e);if(t){var i=U(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return H(this,n)}}var W={toggleAddressModalAction:E.Ec,setClickAccessPoint:D.Uy},Q=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){G(e,t,n[t])}))}return e}({},q.Z,{actions:(0,M.Z)(Object.keys(W),w().func.isRequired).isRequired}),J=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&z(e,t)}(a,e);var t,n,i,o=V(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=o.call(this,e)).onSignInOrUpClick=t.onSignInOrUpClick.bind(F(t)),t}return t=a,(n=[{key:"onSignInOrUpClick",value:function(){var e=this.props.actions;j.Z.clickSignInOnAddressModal(),e.toggleAddressModalAction({open:!1}),e.setClickAccessPoint(L.al),Z.Router.pushRoute(A.ROUTE_AUTHENTICATION)}},{key:"render",value:function(){var e=this.props.t;return(0,r.jsxs)("div",{className:"address-login",children:[(0,r.jsx)("span",{className:"address-login__title",children:e("login.title")}),(0,r.jsx)("span",{className:"address-login__description",children:e("login.description")}),(0,r.jsx)(c.zx,{"data-test-id":"login-button",label:e("login.action"),theme:"link",onClick:this.onSignInOrUpClick})]})}}])&&B(t.prototype,n),i&&B(t,i),a}(i.Component);J.propTypes=Q;var Y=(0,a.$j)(null,(function(e){return{actions:(0,T.DE)(W,e)}}))((0,N.Z)("address")(J)),K=n(85518),X=n(99600);n(10655);function ee(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var te=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){ee(e,t,n[t])}))}return e}({},q.Z,{canFavorite:w().bool,removeAddress:w().func,favoriteAddress:w().func}),ne=function(e){var t=e.t,n=e.canFavorite,i=e.removeAddress,o=e.favoriteAddress,a=K.UA?"tertiary":"primary";return(0,r.jsxs)("div",{className:"address-options__container",children:[(0,r.jsx)(X.Z,{color:a,icon:"trash",transparent:!0,ariaLabel:t("options.delete-button-aria-label"),onClick:i,"data-test-id":"address-options__btn-delete"}),n&&(0,r.jsx)(X.Z,{color:a,icon:"markdown-o",transparent:!0,ariaLabel:t("options.favorite-button-aria-label"),onClick:o,"data-test-id":"address-options__btn-favorite"})]})};ne.propTypes=te,ne.defaultProps={canFavorite:!1,removeAddress:null,favoriteAddress:null};(0,N.Z)("address")(ne);var re=n(67926);n(8635);function ie(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var oe=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){ie(e,t,n[t])}))}return e}({},q.Z,{address:w().shape({street:w().string,geoLocated:w().bool,district:w().string,streetNumber:w().oneOfType([w().string,w().number]),coords:w().shape({latitude:w().number,longitude:w().number})})}),ae=function(e){var t=e.t,n=e.address,i=n.district,o=n.street,a=n.geoLocated,s=n.streetNumber,c=!l()(n.coords);return(0,r.jsxs)("div",{className:"address-delivery-bar",children:[(0,r.jsx)("p",{className:"address-delivery-bar__title",children:t("address-delivery-title")}),(0,r.jsxs)("p",{className:"address-delivery-bar__address",children:[!c&&t("address-delivery-notice"),c&&(a?t("geo.next-to",{district:(0,d.MH)(i||o)}):(0,d.MH)((0,f.Z)([o,s])))]})]})};ae.propTypes=oe,ae.defaultProps={address:{coords:{}}};(0,re.Z)(ae,[(0,N.Z)("address"),(0,a.$j)((function(e){return{address:e.address}}))]);var se=n(94184),le=n.n(se),ce=n(74559),ue="addressListStep",de="addressSearchStep",fe="addressMapsStep",pe={"/Restaurant/Restaurant":"Restaurant Menu","/Home/HomeRestaurant":"Home","/Checkout/Checkout":"Checkout"},he=n(26359);n(11129);function me(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ve(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(l){s=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return me(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return me(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var be={goToStep:w().func,currentStep:w().string},ge={goToStep:function(){},currentStep:"addressMapStep"};function ye(e){var t=e.goToStep,n=e.currentStep,s=(0,a.I0)(),l=(0,o.$)("address").t,u=ve((0,g.Z)(),1)[0],d=(0,a.v9)((function(e){return e.addressSearch.search})).selected,f=(0,a.v9)((function(e){return e.addressSearch.addressSetForConfirmation})),p=(0,a.v9)((function(e){return e.address.location.initialLoad})),h=(0,i.useState)(!1),m=h[0],v=h[1],b=JSON.stringify(null===d||void 0===d?void 0:d.addressId),y=(0,he.v)(),C=y.config,_=y.isCurrentStateAllowed,O=(0,i.useMemo)((function(){return(null===C||void 0===C?void 0:C.enabled)&&_}),[C,_]),k=(0,i.useCallback)((function(e){t(e),j.Z.clickAddressSearchAutocompleteAction()}),[t]);return(0,i.useEffect)((function(){f?(v(!0),t(ue)):v(!1)}),[f,t]),(0,i.useEffect)((function(){n===ue&&d&&t(fe)}),[n,t,b]),(0,i.useEffect)((function(){var e=Z.Router.router.pathname,t=pe[e];x.ZP.viewAddress({accessPoint:t,authentication:u,scheduleDeliveryAvailable:!1})}),[u]),(0,r.jsx)(Ke,{children:(0,r.jsxs)("div",{className:le()("address-list-step",{"address-list-step--with-return-button":!p,"address-list-step--centralize-content":u||f}),children:[!p&&(0,r.jsx)(c.Ei,{onClick:function(){s((0,E.Ec)({open:!1}))},icon:"arrow-down-thin",variant:"address-list-step__back-btn",transparent:!0,ariaLabel:l("common:go-back")}),(0,r.jsx)(I.Z,{forMobile:!0,forDesktop:!0}),(0,r.jsxs)("div",{className:le()("address-list-step__container",{"address-list-step__container--visible":!m,"address-list-step__container--authenticated":u}),children:[(0,r.jsx)("span",{className:"address-list-step__title",children:l("modal.title")}),O&&(0,r.jsx)("span",{className:"address-list-step__subtitle",children:C.deliveryAddressInfo}),(0,r.jsx)(Xe.Z,{role:"button",onClick:function(){return k(de)}}),(0,r.jsxs)(ce.Z,{expected:!1,children:[(0,r.jsx)(It,{}),(0,r.jsx)(Y,{})]}),(0,r.jsx)(ce.Z,{children:(0,r.jsx)(P,{})})]}),(0,r.jsx)(on,{visible:m})]})})}ye.propTypes=be,ye.defaultProps=ge;var je=ye,xe=n(23279),Ce=n.n(xe),_e=n(27361),Oe=n.n(_e),ke=n(86997),Se=n(46220),Pe=n(77849),Ie=n(18967),Re=n(35783),we=n(7238);n(40348);function Ne(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Te(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(l){s=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Ne(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ne(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Ae={goToStep:w().func,currentStep:w().string},Ee={goToStep:function(){},currentStep:"addressMapStep"};function qe(e){var t=e.goToStep,s=e.currentStep,u=(0,a.v9)((function(e){return e.addressSearch.search})),d=u.query,f=void 0===d?"":d,p=u.results,h=u.selected,m=u.error,v=u.isLoading,b=(0,a.v9)((function(e){return e.addressSearch.geolocation})),g=(0,o.$)(["address"]).t,y=(0,i.useRef)(null),x=(0,a.I0)(),C=Te((0,Se.Z)(Ie.x4),1)[0],_=(0,i.useRef)(Ce()((function(e,t,n){if(e&&""!==e){var r=t?{lat:Oe()(t,"latitude"),lng:Oe()(t,"longitude")}:void 0;(0,ke.ek)(e,{onStartCallback:function(e){return x((0,Pe.$n)(e))},onFailCallback:function(e){return x((0,Pe.ST)(e))},onSuccessCallback:function(e,t){return x((0,Pe.zT)(e,t))}},r,n)}else x((0,Pe.q2)())}),900)),O=C&&!("google"in n.g)||m,k=(0,i.useState)(!1),S=k[0],P=k[1];(0,i.useEffect)((function(){s===ue&&x((0,Pe.q2)())}),[s,x]);var R=JSON.stringify(h);(0,i.useEffect)((function(){h&&!h.geolocated?h.streetNumber?(P(!1),s!==fe&&t(fe)):P(!0):h&&h.geolocated&&t(fe)}),[s,t,R]);var w=(0,i.useCallback)((function(e){x((0,Pe.h0)({query:e.description}))}),[x]),N=(0,i.useCallback)((function(){x((0,Pe.q2)()),t(ue)}),[x,t]),T=(0,i.useCallback)((function(e){var t=Oe()(h,"location",{}),n=t.address,r=t.district,i=t.city,o=t.state,a=t.country;if(n&&r&&i&&o&&a&&e){var s="".concat(n,", ").concat(e," - ").concat(r,", ").concat(i," - ").concat(o,", ").concat(a);x((0,Pe.h0)({query:s}))}else x((0,Pe.h0)({query:Oe()(h,"description",""),number:e}))}),[x,h]),A=function(){Re.ZP.getGeo().then((function(e){var t=e.coords,n=t.latitude,r=t.longitude;x((0,Pe.mt)({latitude:n,longitude:r}))}),(function(){x((0,Pe.mt)(we.$q))}))},E=Boolean(f.length>0&&p&&0===p.length&&!m&&!v),q=function(){return(0,r.jsxs)("div",{className:"no-results",children:[(0,r.jsx)(I.Z,{empty:E,forMobile:!0}),(0,r.jsx)("span",{className:"no-results__description",children:g("address-search.no-results-description")}),(0,r.jsx)(c.zx,{"data-test-id":"search-map-button",label:g("address-search.no-results-action"),theme:"link",onClick:function(){j.Z.clickAddressSearchOnMapNoResults(),A()}})]})};return(0,r.jsxs)(Ke,{children:[(0,r.jsxs)("div",{className:"address-search-step",children:[(0,r.jsx)(I.Z,{empty:E,forDesktop:!0}),(0,r.jsx)("span",{className:"address-search-step__title",children:g(E?"address-search.no-results-title":"modal.title")}),(0,r.jsx)(Xe.Z,{onSubmit:_.current,onBack:N,shouldCleanInput:s===ue,shouldFocusInput:s===de,sticky:!0}),O?(0,r.jsx)(c.Bc,{tryAgainFn:function(){return _.current(f,b)}}):(0,r.jsx)("div",{className:"address-search-step__results",children:l()(p)&&E&&!v?q():(0,r.jsx)(et.Z,{results:p,handleClick:w,isLoading:v,searchIsClean:E,handleSearchOnMap:A})})]}),(0,r.jsx)("div",{className:"places-container",ref:y}),(0,r.jsx)(Xt,{visible:S,handleSubmit:T,handleBackButton:function(){return P(!1)}})]})}qe.propTypes=Ae,qe.defaultProps=Ee;var Me=qe,Ze=n(64457),De=(n(7827),{goToStep:w().func,currentStep:w().string}),Le={goToStep:function(){},currentStep:fe},Fe=function(e){var t=e.goToStep,n=e.currentStep,o=(0,a.v9)((function(e){return e.addressSearch})).search,s=(0,a.I0)();return(0,i.useEffect)((function(){var e=Z.Router.router.pathname,t=pe[e];x.ZP.viewAddressMap({accessPoint:t})}),[]),(0,r.jsx)(Ze.Z,{goToStep:t,onBackMapsButton:function(){o.isEditing?(t(ue),s((0,Pe.vs)())):(t(de),s((0,Pe.vs)()))},isLoading:n!==fe})};Fe.propTypes=De,Fe.defaultProps=Le;var Be=Fe,Ge=(n(69028),{canClose:w().bool});function Ue(e){var t=e.canClose,n=(0,a.v9)((function(e){return e.addressModal})).open,o=(0,a.I0)(),s=(0,i.useCallback)((function(){o((0,E.Ec)({open:!1}))}),[o]);return(0,r.jsx)(c.u_,{animation:"bottom",isOpen:n,onRequestClose:s,type:"dialog",closeIcon:"close",variant:"address-modal",overlayClassName:"address-modal-overlay",canClose:t,children:(0,r.jsx)(c.C,{index:ue,routes:[{name:ue,component:(0,r.jsx)(je,{})},{name:de,component:(0,r.jsx)(Me,{})},{name:fe,component:(0,r.jsx)(Be,{})}]})})}Ue.propTypes=Ge,Ue.defaultProps={canClose:!0};var He=Ue;n(96723);function ze(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var $e={onClick:w().func,label:w().string,subLabel:w().string,leftIcon:w().node,hasKebab:w().bool,ariaLabel:w().string,variant:w().string,isActive:w().bool,hidden:w().bool,kind:w().oneOf(["default","simple"]),kebabActions:w().shape({editCallback:w().func,deleteCallback:w().func}),disabled:w().bool},Ve={onClick:void 0,label:void 0,subLabel:void 0,leftIcon:void 0,hasKebab:!1,isActive:!1,hidden:!1,variant:void 0,ariaLabel:"",kind:"default",kebabActions:{},disabled:!1};function We(e){var t=e.label,n=e.onClick,a=e.ariaLabel,s=e.leftIcon,l=e.subLabel,u=e.hasKebab,d=e.variant,f=e.isActive,p=e.hidden,h=e.kind,m=e.kebabActions,v=e.disabled,b=(0,i.useRef)(null),g=(0,i.useState)(!1),y=g[0],j=g[1],x=(0,i.useState)(!1),C=x[0],_=x[1],O=(0,i.useState)(!1),k=O[0],S=O[1],P=function(e){b.current&&!b.current.contains(e.target)&&(j(!1),S(!1))},I=(0,o.$)(["address"]).t;(0,i.useEffect)((function(){document[y?"addEventListener":"removeEventListener"]("click",P)}),[y]),(0,i.useEffect)((function(){if(p){var e=setTimeout((function(){_(!0)}),200);return function(){return clearTimeout(e)}}return function(){}}),[p]);var R,w=function(e,t){e.stopPropagation(),t(e)};return(0,r.jsxs)("div",{className:le()("btn-address",(R={},ze(R,"".concat(d),d),ze(R,"btn-address--".concat(h),!0),ze(R,"btn-address__container",!0),ze(R,"btn-address--is-open-actions",y),ze(R,"btn-address--is-active",f),ze(R,"btn-address--hidden",p),ze(R,"btn-address--display-none",C),ze(R,"btn-address--disabled",v),R)),ref:b,children:[(0,r.jsx)("button",{className:"btn-address--full-size",onClick:n,"aria-label":a}),(0,r.jsxs)("div",{className:"btn-address__icon--left",children:[(0,r.jsx)("div",{className:le()("btn-address__icon-actions",{"btn-address__icon-actions--delete-confirming":k}),children:y&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("button",{"aria-label":I("options.edit-button-aria-label"),onClick:function(e){return w(e,m.editCallback)},className:"btn-address--btn-actions",children:(0,r.jsx)(c.JO,{className:"btn-address__icon-action",name:"pen"})}),(0,r.jsx)("button",{"aria-label":I("options.delete-button-aria-label"),onClick:function(){return S(!0)},className:"btn-address--btn-actions",children:(0,r.jsx)(c.JO,{className:"btn-address__icon-action",name:"trash"})}),(0,r.jsx)("button",{"aria-label":I("options.delete-button-confirm-aria-label"),onClick:function(e){return w(e,m.deleteCallback)},className:"btn-address__delete-confirmation",children:(0,r.jsx)(c.JO,{name:"confirm"})}),(0,r.jsx)("button",{onClick:function(){return S(!1)},"aria-label":I("options.delete-button-cancel-aria-label"),className:"btn-address__delete-confirmation",children:(0,r.jsx)(c.JO,{name:"error"})})]})}),!y&&s&&(0,r.jsx)(c.JO,{className:"btn-address__icon-initial",name:s})]}),(0,r.jsxs)("div",{className:"btn-address__info",children:[(0,r.jsx)("span",{className:"btn-address__info--label",children:t}),l&&(0,r.jsx)("span",{className:"btn-address__info--description",children:l})]}),u&&(0,r.jsx)("button",{className:"btn-address__icon--right","aria-label":I("options.show-button-aria-label"),onClick:function(e){e.stopPropagation(),j(!y),S(!1)},children:(0,r.jsx)(c.JO,{name:"more-dots"})})]})}We.propTypes=$e,We.defaultProps=Ve;var Qe=We,Je=n(17606),Ye=(n(88579),function(e){var t=e.children;return(0,r.jsx)(Je.in,{children:(0,r.jsx)("div",{className:"address-step-shell",children:t})})});Ye.propTypes={children:w().node.isRequired};var Ke=Ye,Xe=n(36991),et=n(62794),tt=n(37054),nt=n(74691),rt=n.n(nt),it=(n(36867),{active:w().bool}),ot=function(e){var t=e.active,n=(0,o.$)("address").t;return(0,r.jsxs)("div",{className:le()("address-maps-message",{"address-maps-message--active":t}),children:[(0,r.jsx)("span",{className:"address-maps-message__title",children:n("maps.baloon-title")}),(0,r.jsx)("span",{className:"address-maps-message__subtitle",children:n("maps.baloon-subtitle")})]})};ot.propTypes=it,ot.defaultProps={active:!1};var at=ot,st=(n(93137),{handleBackButton:w().func,isLoading:w().bool}),lt={handleBackButton:void 0,isLoading:!1},ct=function(e){var t=e.handleBackButton,n=e.isLoading,i=(0,o.$)("common").t;return(0,r.jsxs)("div",{className:"address-maps-header",children:[(0,r.jsx)(c.Ei,{icon:"arrow-left-thin",variant:"address-maps-header__back-btn",transparent:!0,onClick:t,ariaLabel:i("go-back")}),(0,r.jsx)("div",{className:"address-maps-header__description",children:n?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{className:"address-maps-header__title--placeholder ph-loading"}),(0,r.jsx)("span",{className:"address-maps-header__subtitle--placeholder ph-loading"})]}):(0,r.jsx)("span",{className:"address-maps-header__title",children:i("address")})})]})};ct.propTypes=st,ct.defaultProps=lt;var ut=ct,dt=JSON.parse('[{"featureType":"administrative","elementType":"labels.text.fill","stylers":[{"color":"#797979"}]},{"featureType":"administrative","elementType":"labels.text.stroke","stylers":[{"visibility":"off"}]},{"featureType":"landscape.man_made","elementType":"geometry","stylers":[{"saturation":-25}]},{"featureType":"landscape.man_made","elementType":"geometry.stroke","stylers":[{"lightness":15}]},{"featureType":"poi","elementType":"labels.icon","stylers":[{"color":"#c0c0c0"}]},{"featureType":"poi","elementType":"labels.text.fill","stylers":[{"color":"#b2b1b3"}]},{"featureType":"poi","elementType":"labels.text.stroke","stylers":[{"color":"#f7f7f7"},{"visibility":"off"}]},{"featureType":"poi.business","elementType":"geometry.stroke","stylers":[{"lightness":25}]},{"featureType":"poi.medical","elementType":"geometry","stylers":[{"saturation":-100}]},{"featureType":"poi.place_of_worship","elementType":"geometry","stylers":[{"saturation":-100}]},{"featureType":"poi.school","elementType":"geometry","stylers":[{"saturation":-100}]},{"featureType":"road","elementType":"labels.icon","stylers":[{"visibility":"simplified"}]},{"featureType":"road.arterial","elementType":"geometry.stroke","stylers":[{"color":"#f0f0f0"}]},{"featureType":"road.arterial","elementType":"labels.text.fill","stylers":[{"color":"#8b8b8c"}]},{"featureType":"road.arterial","elementType":"labels.text.stroke","stylers":[{"color":"#f7f7f7"}]},{"featureType":"road.highway","elementType":"geometry.fill","stylers":[{"color":"#fef5c2"}]},{"featureType":"road.highway","elementType":"geometry.stroke","stylers":[{"color":"#faeba8"}]},{"featureType":"road.highway","elementType":"labels.text.fill","stylers":[{"color":"#d3a35d"}]},{"featureType":"road.highway","elementType":"labels.text.stroke","stylers":[{"visibility":"off"}]},{"featureType":"road.local","elementType":"geometry.stroke","stylers":[{"color":"#f0f0f0"}]},{"featureType":"road.local","elementType":"labels.text.fill","stylers":[{"color":"#919191"}]},{"featureType":"road.local","elementType":"labels.text.stroke","stylers":[{"color":"#f7f7f7"}]},{"featureType":"transit","elementType":"labels.icon","stylers":[{"visibility":"off"}]},{"featureType":"transit.station","elementType":"labels.text.fill","stylers":[{"color":"#a6a6a6"}]},{"featureType":"transit.station","elementType":"labels.text.stroke","stylers":[{"visibility":"off"}]},{"featureType":"water","elementType":"geometry.fill","stylers":[{"color":"#b3e5fb"}]},{"featureType":"water","elementType":"labels.text.fill","stylers":[{"color":"#589bc8"}]}]'),ft=(n(92630),n(7565),{message:w().string}),pt={message:void 0},ht=function(e){var t=e.message;return(0,r.jsxs)("div",{className:le()("address-maps-toast",{"address-maps-toast--active":Boolean(t)}),children:[(0,r.jsx)(c.JO,{name:"warning"}),t]})};ht.propTypes=ft,ht.defaultProps=pt;var mt=ht,vt={position:w().shape({lat:w().number,lng:w().number}),geoPosition:w().shape({lat:w().number,lng:w().number}),onDragEnd:w().func,handleGeoLocation:w().func,toastMessage:w().string,disabled:w().bool,canSubmit:w().bool,handleBackButton:w().func,handleSubmit:w().func,isLoading:w().bool,showFocusButton:w().bool,isModalAddressNotFoundOpen:w().bool,setModalOpen:w().func},bt={position:void 0,geoPosition:void 0,onDragEnd:void 0,handleGeoLocation:void 0,toastMessage:void 0,disabled:!1,canSubmit:!0,handleBackButton:void 0,handleSubmit:void 0,isLoading:!0,showFocusButton:!0,isModalAddressNotFoundOpen:!1,setModalOpen:void 0},gt=function(e){var t=e.position,n=e.geoPosition,a=e.onDragEnd,s=e.handleGeoLocation,l=e.toastMessage,u=e.disabled,d=e.canSubmit,f=e.handleBackButton,p=e.handleSubmit,h=e.isLoading,m=e.showFocusButton,v=e.isModalAddressNotFoundOpen,b=e.setModalOpen,g=t||n||we.Bg,y=(0,o.$)("address").t,j=(0,i.useRef)(null),x=(0,i.useState)(t),C=x[0],_=x[1],O=(0,i.useState)(16),k=O[0],S=O[1],P=(0,i.useState)(!1),I=P[0],R=P[1],w=(0,i.useCallback)((function(e){j.current&&!I&&null!=(null===e||void 0===e?void 0:e.lat)&&null!=(null===e||void 0===e?void 0:e.lng)&&j.current.panTo(e)}),[I]),N=(0,i.useCallback)((function(e){if(!u){var t=rt()(k+e,4,20);S(t)}}),[k,u]),T=(0,i.useCallback)(Ce()((function(e){var t=e.lat,n=e.lng;"function"===typeof a&&a({lat:t,lng:n})}),550),[a]);(0,i.useEffect)((function(){var e=function(e){e.deltaY>1?N(-.25):N(.25)};return window.addEventListener("mousewheel",e,!0),function(){window.removeEventListener("mousewheel",e,!0)}}),[N]),(0,i.useEffect)((function(){t!==C&&(w(t),_(t))}),[w,t,C]);var A=(0,i.useCallback)((function(e){j.current=e}),[]);return(0,r.jsxs)("div",{className:"address-maps__map",children:[(0,r.jsx)(tt.b6,{zoom:Math.round(k),center:g,options:{disableDefaultUI:!0,styles:dt,draggable:!u,gestureHandling:K.tq?"greedy":void 0,backgroundColor:"#fff",scrollwheel:!1,disableDoubleClickZoom:!0},clickableIcons:!1,onDragStart:function(){return R(!0)},onDragEnd:function(){R(!1)},onCenterChanged:function(){j.current&&T({lat:j.current.getCenter().lat(),lng:j.current.getCenter().lng()})},onLoad:A,mapContainerClassName:"address-maps__container",children:n&&!u&&(0,r.jsx)(tt.xT,{position:n,mapPaneName:tt.xT.OVERLAY_MOUSE_TARGET,children:(0,r.jsx)("div",{className:"address-maps__geo"})})}),(0,r.jsx)(c.JO,{name:"pin",className:le()("address-maps__pin",{"address-maps__pin--active":I})}),!u&&!I&&m&&(0,r.jsx)(c.Ei,{ariaLabel:y("maps.center-map"),icon:"location",color:"white",variant:"address-maps__focus-button",onClick:function(){!n&&s?s((function(e){return w(e)}),(function(){return w(g)})):w(n||g)}}),(0,r.jsx)(ut,{handleBackButton:f,isLoading:h}),!u&&(0,r.jsx)(at,{active:!I}),!u&&!I&&(0,r.jsx)(mt,{message:l}),!u&&!I&&(0,r.jsx)(c.zx,{tabIndex:"0",color:"primary",disabled:!d||h,label:y("maps.confirm-localization"),type:"submit",variant:"address-maps__submit",onClick:p}),(0,r.jsx)(c.u_,{isOpen:v,type:"dialog",overlayClassName:"address-modal-overlay",onRequestClose:function(){return b("modalAddressNotFound",!1)},children:(0,r.jsxs)("div",{className:"address-maps__modal",children:[(0,r.jsx)("h4",{children:y("maps.not-found-modal.title")}),(0,r.jsx)("p",{children:y("maps.not-found-modal.message")}),(0,r.jsx)(c.zx,{label:y("common:confirm"),ariaLabel:y("common:confirm"),onClick:function(){return b("modalAddressNotFound",!1)},fullWidth:!0})]})})]})};gt.propTypes=vt,gt.defaultProps=bt;var yt=gt,jt=n(34051),xt=n.n(jt),Ct=n(32245),_t=n(92455),Ot=n(20861);function kt(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void n(c)}s.done?t(l):Promise.resolve(l).then(r,i)}var St={kind:w().string};function Pt(e){var t=e.kind,n=(0,o.$)(["address"]).t,s=(0,a.v9)((function(e){return e.addressSearch.search})).softAddress,l=(0,a.I0)(),c=(0,i.useState)(!1),u=c[0],d=c[1],f=(0,a.v9)((function(e){return e.contextCard.checkout.isOpened})),p=(0,Ot.Z)().updateGeoPoint,h="/Checkout/Checkout"!==Oe()(Z.Router,"router.pathname")&&!f;(0,i.useEffect)((function(){l((0,Ct.SN)())}),[l]);var m,v=(0,i.useCallback)((m=xt().mark((function e(){var t;return xt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return j.Z.clickGeolocation(),d(!0),e.prev=3,e.next=6,_t.Z.getPosition();case 6:if(!(t=e.sent.coords)){e.next=11;break}p(t),j.Z.callbackFromGeolocation(!0),l((0,Ct.SN)(!0,t)),e.next=12;break;case 11:throw new Error("undefined coords");case 12:e.next=19;break;case 14:e.prev=14,e.t0=e.catch(3),d(!1),j.Z.callbackFromGeolocation(!1),"User denied Geolocation"===e.t0.message&&l((0,y.PJ)({message:n("geo.blocked")}));case 19:case"end":return e.stop()}}),e,null,[[3,14]])})),function(){var e=this,t=arguments;return new Promise((function(n,r){var i=m.apply(e,t);function o(e){kt(i,n,r,o,a,"next",e)}function a(e){kt(i,n,r,o,a,"throw",e)}o(void 0)}))}),[l,n,p]);return(0,r.jsx)(Qe,{className:le()("btn-use-address",{"btn-use-address--hidden":!h}),disabled:u,onClick:v,kind:t,hasKebab:!1,label:n("geo.button-label"),ariaLabel:n("geo.button-label"),leftIcon:"location",subLabel:s&&n("geo.next-to",{district:s.neighborhood||(null===s||void 0===s?void 0:s.streetName)})})}Pt.propTypes=St,Pt.defaultProps={kind:"default"};var It=Pt,Rt=n(74231),wt=n(82580),Nt=n(7058),Tt=n(35183),At=n(79499),Et=n(46325),qt=n(68212);n(5845);function Mt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Zt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Dt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Zt(e,t,n[t])}))}return e}function Lt(e){return function(e){if(Array.isArray(e))return Mt(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return Mt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Mt(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Ft=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w().string;return w().shape({number:e,complement:e,reference:e})},Bt={errors:Ft().isRequired,isValid:w().bool,touched:Ft(w().bool).isRequired,values:Ft(w().string.isRequired).isRequired,setFieldValue:w().func.isRequired,handleChange:w().func.isRequired,handleBlur:w().func.isRequired},Gt={isValid:!1},Ut=function(e){var t=e.goToStep,n=(0,o.$)(["address"]).t,s=(0,a.v9)((function(e){return e.addressSearch})),l=s.search,u=s.states,p=(0,a.v9)((function(e){return e.address})).isLoading,h=(0,a.I0)(),v=Oe()(l,"isEditing"),b=!v&&(-1===Oe()(l,"selected.quality.streetName",-1)||-1===Oe()(l,"selected.quality.neighborhood",-1)||!Oe()(l,"selected.street",!1)||!Oe()(l,"selected.district",!1)),g=!v&&(-1===Oe()(l,"selected.quality.city",-1)||-1===Oe()(l,"selected.quality.state",-1)||!Oe()(l,"selected.state",!1)||!Oe()(l,"selected.city",!1)),y=Oe()(l,"selected");(0,i.useEffect)((function(){g&&(h((0,Et.Hp)()),y&&h((0,Et.$p)(y.state))),!y&&v&&t(ue)}),[g,h,y,v,t]);var j={containerRef:(0,i.useRef)(),inputRefs:{cityState:(0,i.useRef)(),districtStreet:(0,i.useRef)(),numberComplement:(0,i.useRef)(),reference:(0,i.useRef)()}};if(!y||l.isLoadingSelected)return null;var C=function(e){var t=e.values,o=e.touched,a=e.errors,s=e.isValid,d=e.setFieldValue,m=e.handleChange,v=e.handleBlur,y=function(e){return d("favorite",t.favorite===e?void 0:e)},x=(0,f.Z)([Oe()(l,"selected.street"),Oe()(l,"selected.streetNumber")]),C=(0,f.Z)([(0,f.Z)([Oe()(l,"selected.district"),Oe()(l,"selected.city")]),Oe()(l,"selected.state")]," - "),_=function(e){h((0,Et.$p)(e)),d("city","")},O=[{value:"",label:""}].concat(Lt(u.options)),k=Oe()(u.cities[t.state],"options",[]),S=[{value:"",label:""}].concat(Lt(k)),P=j.containerRef,I=j.inputRefs,R=Object.keys(a)[0];return(0,i.useEffect)((function(){R&&function(e,t){var n,r=t.containerRef,i=t.inputRefs;switch(e){case"city":case"state":n=i.cityState.current;break;case"district":case"street":n=i.districtStreet.current;break;case"number":case"complement":n=i.numberComplement.current}var o=n?n.offsetTop-n.offsetHeight:0;r.current&&r.current.scrollTo({top:o,behavior:"smooth"})}(R,j)}),[R]),(0,r.jsx)(Je.in,{children:(0,r.jsxs)("div",{className:"complete-address",ref:P,children:[(0,r.jsxs)("div",{className:"complete-address__address-info",children:[(0,r.jsx)("p",{className:"complete-address__street-label",children:x}),(0,r.jsx)("p",{className:"complete-address__state-label",children:C})]}),(0,r.jsxs)(wt.l0,{className:"complete-address__form",children:[g&&(0,r.jsxs)("div",{className:"complete-address--city-state",ref:I.cityState,children:[(0,r.jsx)(Nt.px,{name:"state",label:n("address.state-label"),error:o.state&&a.state,value:t.state,ariaLabel:n("address.state-aria-label"),options:O,onChange:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];m.apply(void 0,Lt(t)),_(t[0].target.value)},onBlur:v}),(0,r.jsx)(Nt.px,{name:"city",label:n("address.city-label"),error:o.city&&a.city,value:t.city,ariaLabel:n("address.city-aria-label"),options:S,onChange:m,onBlur:v})]}),b&&(0,r.jsxs)("div",{className:"complete-address--district-street",ref:I.districtStreet,children:[(0,r.jsx)(Nt.II,{name:"district",type:"text",label:n("address.district-label"),error:o.district&&a.district,value:t.district,ariaLabel:n("address.district-aria-label"),autoComplete:"address-district-ifood"}),(0,r.jsx)(Nt.II,{name:"street",type:"text",label:n("address.street-label"),error:o.street&&a.street,value:t.street,ariaLabel:n("address.street-aria-label"),autoComplete:"address-street-ifood"})]}),(0,r.jsxs)("div",{className:"complete-address--number-complement",ref:I.numberComplement,children:[(0,r.jsx)(Nt.II,{name:"number",type:"text",label:n("address.streetNumber-label"),error:o.number&&a.number,value:t.number,ariaLabel:n("address.street-number-aria-label"),autoComplete:"address-number-ifood"}),(0,r.jsx)(Nt.II,{name:"complement",type:"text",label:n("address.complement-label"),error:o.complement&&a.complement,value:t.complement,ariaLabel:n("address.complement-aria-label"),helpText:n("address.complement-help-text"),autoComplete:"address-complement-ifood"})]}),(0,r.jsx)("div",{className:"complete-address--reference-point",ref:I.reference,children:(0,r.jsx)(Nt.II,{name:"reference",type:"text",label:n("address.reference-label"),error:o.reference&&a.reference,value:t.reference,ariaLabel:n("address.reference-aria-label"),autoComplete:"address-reference-ifood"})}),(0,r.jsxs)("div",{className:"complete-address--favorites",children:[(0,r.jsx)("p",{children:n("favorite-label")}),(0,r.jsxs)("div",{className:"complete-address--favorites-btn",children:[(0,r.jsx)(c.zx,{variant:le()("complete-address__favorite",{"complete-address__favorite--active":t.favorite===At.S5}),icon:"house",theme:"transparent",iconPosition:"left",onClick:function(){return y(At.S5)},label:n("home.button-label"),ariaLabel:n("home.button-label")}),(0,r.jsx)(c.zx,{variant:le()("complete-address__favorite",{"complete-address__favorite--active":t.favorite===At.so}),icon:"coffee-cup",theme:"transparent",iconPosition:"left",onClick:function(){return y(At.so)},label:n("workplace.button-label"),ariaLabel:n("workplace.button-label")})]})]}),(0,r.jsx)("div",{className:"complete-address--save-btn",children:(0,r.jsx)(c.zx,{disabled:!s||p||(0,Tt.x)(a),fullWidth:!0,type:"submit",isLoading:p||l.isLoadingEditing,label:n("form-button.save-address")})})]})]})})};return C.propTypes=Bt,C.defaultProps=Gt,(0,r.jsx)(wt.J9,Dt({},function(e){var t=e.t,n=e.selectedAddress,r=void 0===n?{}:n,i=e.dispatch,o=e.displayStreetAndDistrict,a=e.displayStateAndCity,s=e.isEditing;return{initialValues:{number:Oe()(r,"streetNumber","")||void 0,complement:Oe()(r,"compl","")||void 0,reference:Oe()(r,"reference","")||void 0,district:Oe()(r,"district","")||void 0,street:Oe()(r,"street","")||void 0,city:(0,d.MH)((0,qt.Bc)(Oe()(r,"city",""))),state:Oe()(r,"state","")||void 0,favorite:Oe()(r,"alias")?Oe()(r,"alias").toLowerCase():void 0},validationSchema:function(){var e=Oe()(r,"rules",[]),n=e.find((function(e){return"complement"===e.key})),i=e.find((function(e){return"reference"===e.key}));return Rt.Ry().shape({number:Rt.Z_().required(t("address.empty-number")),district:o?Rt.Z_().required(t("address.empty-district")):Rt.Z_().notRequired(),street:o?Rt.Z_().required(t("address.empty-street")):Rt.Z_().notRequired(),city:a?Rt.Z_().required(t("address.empty-city")):Rt.Z_().notRequired(),state:a?Rt.Z_().required(t("address.empty-state")):Rt.Z_().notRequired(),complement:Oe()(n,"required",!1)?Rt.Z_().required(t("address.empty-complement")):Rt.Z_().notRequired(),reference:Oe()(i,"required",!1)?Rt.Z_().required(t("address.empty-reference")):Rt.Z_().notRequired()})},onSubmit:function(e){var t=Dt({},r,{complement:Oe()(e,"complement"),reference:Oe()(e,"reference"),streetNumber:Oe()(e,"number"),alias:Oe()(e,"favorite"),district:Oe()(e,"district"),street:Oe()(e,"street"),city:Oe()(e,"city"),state:Oe()(e,"state")});x.ZP.updateGeoPoint(Dt({},t.coords)),i(s?(0,m.dV)(t):(0,m.QN)(t))},isInitialValid:!0}}({t:n,selectedAddress:y,dispatch:h,displayStreetAndDistrict:b,displayStateAndCity:g,isEditing:v}),{children:function(e){return C(e)}}))};Ut.propTypes={goToStep:w().func.isRequired};var Ht=Ut;n(78198);function zt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $t(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){zt(e,t,n[t])}))}return e}var Vt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w().string,t=arguments.length>1?arguments[1]:void 0;return w().shape($t({number:e,addressEmptyNumber:e},t))},Wt={handleSubmit:w().func.isRequired},Qt=function(e){var t=e.handleSubmit,n=(0,o.$)("address").t,i=(0,a.v9)((function(e){return e.addressSearch})).search,s=i.selected||{},l=s.name,u=s.district,d=s.city,p=s.state,h={initialValues:function(e){var t=e.number,n=void 0===t?"":t,r=e.addressEmptyNumber;return{number:n,addressEmptyNumber:void 0!==r&&r}},initialErrors:{number:n("address.empty-number")},validationSchema:function(){return Rt.Ry().shape({addressEmptyNumber:Rt.Xg().notRequired(),number:Rt.Z_().when("addressEmptyNumber",{is:function(e){return!1===e||void 0===e},then:Rt.Z_().required(n("address.empty-number")),otherwise:Rt.Z_().notRequired()})})},onSubmit:function(e){t(e.addressEmptyNumber?"s/n":e.number)}},m=function(e){var t=e.values,o=e.touched,a=e.errors,s=e.isValid,h=e.setFieldValue;return(0,r.jsxs)(wt.l0,{className:"address-number__form",children:[(0,r.jsxs)("div",{className:"address-number__address-info",children:[(0,r.jsx)("p",{className:"street-name",children:l}),(0,r.jsx)("p",{className:"district",children:(0,f.Z)([(0,f.Z)([u,d]),p]," - ")})]}),(0,r.jsx)("div",{className:"address-number__input",children:(0,r.jsx)(Nt.II,{autoFocus:!0,name:"number",type:"text",label:n("address.streetNumber-label"),error:o.number&&!s&&a.number?a.number:void 0,disabled:t.addressEmptyNumber,value:t.number||"",ariaLabel:n("address.street-number-aria-label")})}),(0,r.jsxs)("label",{id:"address-number__checkbox-label",htmlFor:"addressEmptyNumber",className:"address-number__checkbox-label",children:[(0,r.jsx)("span",{className:"address-number__empty-number",children:n("address-number.empty-number")}),(0,r.jsx)(Nt.XZ,{className:"address-number__checkbox",ariaLabelledBy:"address-number__checkbox-label",id:"addressEmptyNumber",name:"addressEmptyNumber",size:"small",onChange:h})]}),(0,r.jsx)(c.zx,{disabled:!s||i.isLoadingSelected,type:"submit",fullWidth:!0,isLoading:i.isLoadingSelected,label:t.addressEmptyNumber?n("address-number.action-without"):n("address-number.action-with")})]})};return m.propTypes={errors:Vt().isRequired,isValid:w().bool.isRequired,touched:Vt(w().bool).isRequired,values:Vt(w().string.isRequired,{number:w().string,addressEmptyNumber:w().bool}).isRequired,setFieldValue:w().func.isRequired},(0,r.jsx)(wt.J9,$t({},h,{children:function(e){return m(e)}}))};Qt.propTypes=Wt;var Jt=Qt,Yt=(n(28556),{handleBackButton:w().func.isRequired,handleSubmit:w().func.isRequired,visible:w().bool.isRequired}),Kt=function(e){var t=e.handleBackButton,n=e.visible,i=e.handleSubmit,a=(0,o.$)("address").t;return(0,r.jsxs)("div",{className:le()("address-number",{"address-number--visible":n}),children:[(0,r.jsx)(c.Ei,{onClick:t,icon:"arrow-left-thin",variant:"address-number__back-btn",transparent:!0,ariaLabel:a("common:go-back")}),(0,r.jsxs)("div",{className:"address-number__form-wrapper",children:[(0,r.jsx)("p",{className:"address-number__title",children:a("address-number.title".concat(K.UA?"-mobile":""))}),n&&(0,r.jsx)(Jt,{handleSubmit:i})]})]})};Kt.propTypes=Yt;var Xt=Kt,en=n(45881),tn=n(54552),nn=(n(63837),{visible:w().bool.isRequired});function rn(e){var t=e.visible,n=(0,a.I0)(),s=(0,o.$)("address").t,l=(0,a.v9)((function(e){return e.addressSearch.addressSetForConfirmation})),u=(0,a.v9)((function(e){var t=e.checkout;return t[t.currentRestaurant]})),d=(0,i.useCallback)((function(){tn.ZP.saveCoordsCookies(l.coords),n((0,m.Xw)(l)),n((0,en.CP)()),n((0,m.tU)(null)),n((0,E.Ec)({open:!1}))}),[l,n]),f=(0,i.useCallback)((function(){n((0,m.tU)(null))}),[n]);return(0,r.jsxs)("div",{className:le()("address-set-confirmation",{"address-set-confirmation--visible":t}),children:[(0,r.jsxs)("div",{className:"address-set-confirmation__title",children:[(0,r.jsx)("span",{className:"address-set-confirmation__title--name",children:Oe()(u,"restaurant.name")}),(0,r.jsx)("span",{className:"address-set-confirmation__title--message",children:s("address-set-confirmation.title")})]}),(0,r.jsx)("span",{className:"address-set-confirmation__subtitle",children:s("address-set-confirmation.subtitle")}),(0,r.jsx)(c.zx,{variant:"address-set-confirmation__accept-btn",tabIndex:"0",color:"primary",fullWidth:!0,label:s("address-set-confirmation.accept"),type:"button",onClick:d}),(0,r.jsx)(c.zx,{theme:"link",tabIndex:"0",color:"white",fullWidth:!0,label:s("address-set-confirmation.reject"),type:"button",onClick:f})]})}rn.propTypes=nn;var on=rn},26359:function(e,t,n){"use strict";n.d(t,{v:function(){return a}});var r=n(14416),i=n(54366),o=n(11032),a=function(){var e,t=(0,r.v9)(o.wx),n=(0,i.Z)("boraDescerConfig"),a=n.config,s=n.isLoading,l=(null===a||void 0===a||null===(e=a.states)||void 0===e?void 0:e.split(","))||[];return{config:a,isLoading:s,isCurrentStateAllowed:!!(null===t||void 0===t?void 0:t.state)&&l.includes(t.state)}}},46220:function(e,t,n){"use strict";var r=n(67294),i=[];t.Z=function(e){var t=(0,r.useState)({loaded:!1,error:!1}),n=t[0],o=t[1],a=function(){o({loaded:!0,error:!1})};return(0,r.useEffect)((function(){if(i.includes(e)){if(document.querySelector('script[src="'.concat(e,'"]')))return o({loaded:!0,error:!1}),function(){};var t=i.indexOf(e);i.splice(t,1)}var n=document.createElement("script");n.src=e,n.async=!0,n.defer=!0;var r=function(){var t=i.indexOf(e);t>=0&&i.splice(t,1),n.remove(),o({loaded:!0,error:!0})};return n.addEventListener("load",a),n.addEventListener("error",r),document.body.appendChild(n),i.push(e),function(){n.removeEventListener("load",a),n.removeEventListener("error",r)}}),[e]),[n.loaded,n.error]}},50959:function(e,t,n){"use strict";n.r(t),n.d(t,{Layout:function(){return X},default:function(){return ee}});var r=n(85893),i=(n(68532),n(677),n(67294)),o=n(9008),a=n(45697),s=n.n(a),l=n(14890),c=n(94184),u=n.n(c),d=n(14416),f=n(5152),p=n(91768),h=n(52668),m=n(59387),v=n(10902),b=n(42383),g=n(32754);var y=n(26793),j=n(96983);var x=n(95528),C=function(e){var t;return null===(t=e.addressInvalidDialog)||void 0===t?void 0:t.open},_=function(){var e=(0,d.I0)(),t=(0,d.v9)(C),n=function(){var e,t=null!==(e=(0,d.v9)(b.jW))&&void 0!==e?e:{},n=t.district,r=t.city,i=t.state;return(0,g.Z)([n,r,i].filter(Boolean)," - ")}(),o=function(){var e=(0,y.$)("restaurant").t,t=(0,d.v9)(j.wx),n=t.district,r=t.address,i=t.geoLocated,o=t.streetNumber;return i?e("address:geo.next-to",{district:n||r}):(0,g.Z)([r,o])}(),a=(0,i.useCallback)((function(){return e((0,x.hO)())}),[e]);return(0,r.jsx)(v.Z,{isOpen:t,deliveryAddress:o,onRequestClose:a,restaurantAddress:n})},O=n(65857),k=n(37915),S=n(77159),P=n(59619),I=n(56301),R=n(63594),w=n(5793),N=n(18967),T=n(67926),A=n(67525),E=n(19995),q=n(66198),M=n(57818),Z=n(30548),D=n(36750);function L(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function F(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function B(e){return B=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},B(e)}function G(e,t){return!t||"object"!==H(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function U(e,t){return U=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},U(e,t)}var H=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function z(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=B(e);if(t){var i=B(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return G(this,n)}}var $=(0,f.default)(Promise.all([n.e(296),n.e(5968),n.e(853),n.e(6582),n.e(4450),n.e(5393),n.e(6066),n.e(3994),n.e(8972),n.e(2606)]).then(n.bind(n,52606)),{loadableGenerated:{webpack:function(){return[52606]}},ssr:!1}),V=(0,f.default)(n.e(159).then(n.bind(n,60159)).then((function(e){return e.ChatContainer})),{loadableGenerated:{webpack:function(){return[60159]}},ssr:!1}),W=(0,f.default)(Promise.resolve().then(n.bind(n,80629)).then((function(e){return e.default})),{loadableGenerated:{webpack:function(){return[80629]}},ssr:!1}),Q=(0,f.default)(n.e(1175).then(n.bind(n,21175)).then((function(e){return e.default})),{loadableGenerated:{webpack:function(){return[21175]}},ssr:!1}),J={setRouteChange:M.DE,fetchUserIp:w.HI,setTestModeCookie:Z.cl,fetchMultiCategoriesRequest:R.bi},Y=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){F(e,t,n[t])}))}return e}({},A.Z,{actions:(0,D.Z)(Object.keys(J),s().func.isRequired).isRequired,testSession:s().bool.isRequired,children:s().node,showCheckoutContextCard:s().bool,theme:s().string,staticHeader:s().bool,hiddenHeader:s().bool,tabBar:s().string,hiddenTabBar:s().bool,hideAddressModal:s().bool,hideCatalogItemModal:s().bool,hideChat:s().bool,hiddenGlobalSearch:s().bool,title:s().string,description:s().string,hiddenCategories:s().bool,disabledRedirect:s().bool}),K={children:null,showCheckoutContextCard:!1,theme:void 0,staticHeader:!1,hiddenHeader:!1,tabBar:void 0,hiddenTabBar:!1,hideAddressModal:!1,hideCatalogItemModal:!1,hideChat:!1,hiddenGlobalSearch:!1,title:void 0,description:void 0,hiddenCategories:!1,disabledRedirect:!1},X=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&U(e,t)}(s,e);var t,n,i,a=z(s);function s(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(e=a.call(this)).autoScrollTimed=null,e}return t=s,(n=[{key:"componentDidMount",value:function(){var e=this.props,t=e.hasAddress,n=e.hasMultiCategories;this.onCheckToken(),this.defineTestMode(),t&&!n&&this.fetchDynamicMultiCategories(),document&&((0,q.Z)(0,0),this.autoScrollTimed=setTimeout((function(){(0,P.OI)("scroll-smooth")}),1e3))}},{key:"componentWillUnmount",value:function(){clearTimeout(this.autoScrollTimed)}},{key:"onCheckToken",value:function(){this.props.actions.fetchUserIp()}},{key:"fetchDynamicMultiCategories",value:function(){this.props.actions.fetchMultiCategoriesRequest()}},{key:"defineTestMode",value:function(){var e=this.props,t=e.actions,n=e.testSession;t.setTestModeCookie(n)}},{key:"render",value:function(){var e,t=this.props,n=t.children,i=t.showCheckoutContextCard,a=t.theme,s=t.staticHeader,l=t.hiddenHeader,c=t.testSession,d=t.t,f=t.tabBar,p=t.hiddenTabBar,v=t.hasAddress,b=t.hideAddressModal,g=t.hideCatalogItemModal,y=t.hideChat,j=t.hiddenGlobalSearch,x=t.title,C=void 0===x?d("seo:title.general"):x,P=t.description,R=void 0===P?d("seo:description.message"):P,w=t.hiddenCategories,T=t.disabledRedirect;return(0,r.jsxs)("div",{children:[(0,r.jsxs)(o.default,{children:[(0,r.jsx)("title",{children:c?d("seo:title.general-test"):C},"title"),(0,r.jsx)("meta",{name:"description",content:R},"description"),(0,r.jsx)("meta",{property:"og:image",content:(0,N.QW)(h.el.WEBAPP_ASSETS,"logo-ifood.png",h.zf.HIGHT)}),(0,r.jsx)("meta",{httpEquiv:"Content-Security-Policy",content:" script-src 'self' 'unsafe-eval' 'nonce-static12345' https://client.px-cloud.net http://client.px-cloud.net https://www.googletagmanager.com http://captcha.px-cdn.net https://www.google-analytics.com 'sha256-6Y3BWCmu5UkWbZSnp0Gw77+qEVX0LHiVxcWU38Xssko=' 'sha256-CN/ADnIp5tfG8VrtOf8QQQWYz+RtJKsxglWizFQ9xak=' 'sha256-wjKIJ+FAtdkIsk2O1HIXTkIsDVCkoXZo0NWUwu6irUM=' 'sha256-x4Qdhzxgfd96pB77qI3pNsfCI+ThPSMbR5UweCFOgTY=' 'sha256-YATHk2WG5d/lY4uQFcr8KNDZzvPXMCb4HtxHjlWOUPU=' 'sha256-3Kbq0HPkSliInv1tsWr27jEHafcqRF6H9trr9C44p70=' 'sha256-xvqtnks2S6U9Pfaf8vwatet+dC3LH11KRSmzXieuIYw=' 'sha256-XBhYmqxdvXa+zOlOFomuYIucgol+4QN5EOzVeUW+cVo=' 'sha256-gbl2KmZzGTyKYkAPoSFTg5SIUJYFaGqMI8gnNtth0oA=' 'blob:' https:;"})]}),(0,r.jsx)(m.Cm,{}),(0,r.jsx)(m.zP,{max:"desktop",allowSSR:!1,children:i&&(0,r.jsx)($,{hasTabBarSpacing:!p})}),(0,r.jsx)(m.zP,{min:"tablet",children:!l&&(0,r.jsx)(W,{isStatic:s,isHidden:j,hiddenCategories:w,disabledRedirect:T})}),(0,r.jsx)("main",{className:u()("main-layout",(e={},F(e,"main-layout--".concat(a),a),F(e,"main-layout--with-home-button",(0,I.Z)()),e)),children:n}),!y&&(0,r.jsx)(V,{}),!b&&(0,r.jsx)(O.qo,{canClose:v}),(0,r.jsx)(m.zP,{max:"desktop-s",children:!p&&(0,r.jsx)(Q,{activeTab:f})}),(0,r.jsx)(S.Z,{}),(0,r.jsx)(_,{}),!g&&(0,r.jsx)(k.Z,{})]})}}])&&L(t.prototype,n),i&&L(t,i),s}(i.Component);X.propTypes=Y,X.defaultProps=K;var ee=(0,T.Z)(X,[(0,d.$j)((function(e){var t,n,r;return{testSession:(0,E.Z)(e),hasAddress:Boolean((null===(t=e.address.coords)||void 0===t?void 0:t.latitude)&&(null===(n=e.address.coords)||void 0===n?void 0:n.longitude)&&!(null===(r=e.address.location)||void 0===r?void 0:r.initialLoad)),hasMultiCategories:Boolean(e.multiCategories.categories)}}),(function(e){return{actions:(0,l.DE)(J,e)}})),(0,p.Z)()])},53773:function(e,t,n){"use strict";n.d(t,{N:function(){return r}});var r=function(e){return[null===(t=Array.isArray(null===e||void 0===e?void 0:e.borderBoxSize)?null===e||void 0===e?void 0:e.borderBoxSize[0]:null===e||void 0===e?void 0:e.borderBoxSize)||void 0===t?void 0:t.inlineSize,null===t||void 0===t?void 0:t.blockSize];var t}},86213:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(52843),i=new r.K((function(e){return new ResizeObserver(e)}));function o(e,t){return(0,r.Z)(i,e,t)}},12615:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(52843),i=new r.K((function(e){return new IntersectionObserver(e)}));function o(e,t){return(0,r.Z)(i,e,t)}},52843:function(e,t,n){"use strict";n.d(t,{K:function(){return s},Z:function(){return l}});var r=n(67294),i=n(18446),o=n.n(i);function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.listeners=new Map,this.defaultSelector=function(e){return e},this.initializer=t}var t,n,r;return t=e,(n=[{key:"observer",get:function(){if(!this.observerHolder){var e=this;this.observerHolder=this.initializer((function(t){return t.forEach((function(t){var n;e.listeners&&(n=e.listeners.get(t.target)),n&&n.forEach((function(e){return e(t)}))}))}))}return this.observerHolder}},{key:"observe",value:function(e,t){var n,r=this,i=this.listeners.get(e);return i?i.add(t):(this.listeners.set(e,new Set([t])),null===(n=this.observer)||void 0===n||n.observe(e)),function(){var n,i=r.listeners.get(e);i.delete(t),i.size||(r.listeners.delete(e),null===(n=r.observer)||void 0===n||n.unobserve(e))}}}])&&a(t.prototype,n),r&&a(t,r),e}();function l(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.defaultSelector,n=arguments.length>2?arguments[2]:void 0,i=(0,r.useState)(null),a=i[0],s=i[1],l=(0,r.useState)(n),c=l[0],u=l[1],d=(0,r.useRef)(c),f=(0,r.useRef)(),p=(0,r.useCallback)((function(){a&&!f.current&&(f.current=e.observe(a,(function(e){var n=t(e);n===d.current||o()(n,d.current)||(d.current=n,u(n))})))}),[a,e,t]),h=(0,r.useCallback)((function(){var e;null===(e=f.current)||void 0===e||e.call(f),f.current=void 0}),[]);(0,r.useLayoutEffect)((function(){return p(),h}),[p,h]);var m=(0,r.useMemo)((function(){return{start:p,stop:h}}),[p,h]);return[s,c,m]}},37915:function(e,t,n){"use strict";n.d(t,{Z:function(){return Bi}});var r=n(85893),i=n(14416),o=function(e){return e.crossSell},a=function(e){return o(e).items},s=n(90003),l=n(11032),c=n(7248),u=n(24721),d=function(e){return e.merchandise},f=n(36466),p=n(89854),h=n(56044),m=function(e){var t,n=null===(t=d(e))||void 0===t?void 0:t.details;if(null===n||void 0===n?void 0:n.id)return n;var r,i,o,s=(0,u.CC)(e),l=(0,u.XW)(e);if(s.menu&&(r=(0,p.vj)(s.menu,l,(0,u.Xj)(e))),!r&&s.reorderItems&&(r=s.reorderItems.find((function(e){var t=e.id,n=e.code;return l===t||l===n}))),!r){var f=(0,c.g)(e);f.items.length&&(r=f.items.find((function(e){return e.code===l||e.uuid===l||e.id===l})))}r||(r=null===(i=(0,h.sO)(e))||void 0===i?void 0:i.find((function(e){var t=e.id,n=e.code;return l===t||l===n})));r||(r=null===(o=a(e))||void 0===o?void 0:o.find((function(e){var t=e.id,n=e.code;return l===t||l===n})));return r},v=function(e){var t=(0,u.CC)(e);if(void 0!==(null===t||void 0===t?void 0:t.uuid))return(0,f.Qw)(t)&&(0,s.k)(m(e))},b=function(e){var t=(0,u.OU)(e),n=(0,l.y)(e);return t&&!n},g=function(e){var t=(0,u.CC)(e),n=d(e);return!t.isLoading||(t.isLoading.details||t.isLoading.menu)||n.isLoading},y=function(e){var t,n,r=m(e),i=(0,u.CC)(e),o=d(e);return!(null===r||void 0===r?void 0:r.id)||Boolean((null===(t=i.errorStatusCode)||void 0===t?void 0:t.details)||(null===(n=i.errorStatusCode)||void 0===n?void 0:n.menu)||o.error)},j=n(67294),x=n(11163),C=n(34051),_=n.n(C),O=n(45697),k=n.n(O),S=n(91768),P=n(14890),I=n(94184),R=n.n(I),w=n(36750),N=n(50013),T=n(59387),A=n(27361),E=n.n(A),q=n(89734),M=n.n(q),Z=n(85518),D=n(75463),L=n(45881),F=n(46810),B=n(72683),G=n(76140),U=n(82462),H=n(67926),z=n(67525),$=n(66290);n(25656);function V(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function W(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Q(e){return Q=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Q(e)}function J(e,t){return!t||"object"!==K(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Y(e,t){return Y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Y(e,t)}var K=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function X(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Q(e);if(t){var i=Q(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return J(this,n)}}var ee={content:k().string,children:k().node,isVisible:k().bool},te=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Y(e,t)}(a,e);var t,n,i,o=X(a);function a(){return V(this,a),o.apply(this,arguments)}return t=a,(n=[{key:"renderContent",value:function(){var e=this.props.content;return(0,r.jsx)("div",{className:"dish-tooltip__container",children:(0,r.jsx)("span",{className:"dish-tooltip__content","aria-live":"polite",children:e})})}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.isVisible;return(0,r.jsxs)("div",{className:"dish-tooltip",children:[t,n&&this.renderContent()]})}}])&&W(t.prototype,n),i&&W(t,i),a}(j.Component);te.propTypes=ee,te.defaultProps={content:"",children:null,isVisible:!1};var ne=te;n(71724);function re(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ie(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function oe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ae(e){return ae=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},ae(e)}function se(e,t){return!t||"object"!==ce(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function le(e,t){return le=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},le(e,t)}var ce=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function ue(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ae(e);if(t){var i=ae(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return se(this,n)}}var de=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){oe(e,t,n[t])}))}return e}({},z.Z,$.Z,{dishEdition:k().bool,isDisabled:k().bool,price:k().number,onSubmitItem:k().func,onRemoveItem:k().func,currentQty:k().number.isRequired,onChangeQty:k().func.isRequired,isLoop:k().bool,maxItemsPerOrder:k().number,maxItemsReached:k().bool,disableItemAddition:k().bool}),fe={isDisabled:!0,dishEdition:!1,price:0,onSubmitItem:function(){},onRemoveItem:function(){},isLoop:!1,maxItemsPerOrder:void 0,maxItemsReached:!1,disableItemAddition:!1},pe=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&le(e,t)}(a,e);var t,n,i,o=ue(a);function a(){return re(this,a),o.apply(this,arguments)}return t=a,(n=[{key:"renderEditionActions",value:function(){var e=this.props,t=e.t,n=e.price,i=e.currentQty,o=e.onChangeQty,a=e.onSubmitItem,s=e.onRemoveItem,l=e.isDisabled,c=e.setToastrMessage,u=e.isLoop,d=e.maxItemsReached;return(0,r.jsxs)("div",{className:"dish-action__update-wrapper",children:[l&&(0,r.jsx)("button",{type:"button",className:"dish-action__toastr-cta","aria-disabled":"true","aria-label":t("dish.required-garnish-missed"),onClick:function(){return c({message:t("dish.required-garnish-missed")})}}),(0,r.jsx)("div",{className:"dish-action__counter",children:(0,r.jsx)(T.AT,{max:u?1:void 0,startValue:i,min:0,onChange:o,disableIncrement:d},"dish-counter")}),(0,r.jsx)(G.Z,{ariaLabel:t(i>=1?"dish.update-item-aria":"dish.remove-item-button"),color:"primary",onClick:i>=1?a:s,disabled:l,children:(0,r.jsxs)("div",{className:"dish-action__add-button",children:[0===i&&(0,r.jsx)("span",{className:"dish-action__remove-text",children:t("dish.remove-item-button")}),i>=1&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{children:t("dish.update-item-button")}),(0,r.jsx)("span",{children:(0,U.xG)(n)})]})]})})]})}},{key:"renderAdditionActions",value:function(){var e=this.props,t=e.t,n=e.price,i=e.isDisabled,o=e.setToastrMessage,a=e.currentQty,s=e.onChangeQty,l=e.onSubmitItem,c=e.isLoop,u=e.maxItemsReached,d=e.disableItemAddition;return(0,r.jsxs)("div",{className:"dish-action__add-wrapper",children:[(0,r.jsx)("div",{className:"dish-action__counter",children:(0,r.jsx)(T.AT,{max:c?1:void 0,startValue:a,min:1,onChange:s,disableIncrement:u},"dish-counter")}),(0,r.jsx)(G.Z,{ariaLabel:t("dish.add-title-aria"),"data-test-id":"dish-action__add-button",onClick:l,fakeDisabled:i||d,onDisabledClick:function(){o({message:t("dish.required-garnish-missed")})},children:(0,r.jsxs)("div",{className:"dish-action__add-button",children:[(0,r.jsx)("span",{children:t("dish.add-title")}),(0,r.jsxs)("span",{children:["\xa0",(0,U.xG)(n)]})]})})]})}},{key:"render",value:function(){var e=this.props,t=e.t,n=e.dishEdition,i=e.maxItemsReached,o=e.maxItemsPerOrder;return(0,r.jsx)("div",{className:"dish-action",children:(0,r.jsx)(ne,{content:t("dish.too-many-items",{maxItemsPerOrder:o}),direction:"top",isVisible:i,children:n?this.renderEditionActions():this.renderAdditionActions()})})}}])&&ie(t.prototype,n),i&&ie(t,i),a}(j.PureComponent);pe.propTypes=de,pe.defaultProps=fe;var he=(0,H.Z)(pe,[(0,S.Z)("restaurant"),B.Z]),me=n(41799),ve=n(38890);n(27540);function be(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ge(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){be(e,t,n[t])}))}return e}var ye=ge({},z.Z,{name:k().string.isRequired,deliveryTime:k().number.isRequired,superRestaurant:k().bool.isRequired,deliveryFee:k().object.isRequired,evaluationAverage:k().number.isRequired,tags:k().array.isRequired}),je=function(e){var t=e.name,n=e.restaurantSlug,i=e.deliveryTime,o=e.t,a=e.superRestaurant,s=e.deliveryFee,l=e.evaluationAverage,c=e.tags,u=e.availableForScheduling,d=e.closed,f=null===l||void 0===l?void 0:l.toFixed(1),h=s.isFree,m=s.fee,v=(0,p.$V)(c,me.AE);return(0,r.jsx)(D.Link,{route:ve.ROUTE_RESTAURANT_HOME,params:n,children:(0,r.jsxs)("a",{className:"dish-restaurant",children:[(0,r.jsxs)("div",{className:"dish-restaurant__header",children:[(0,r.jsxs)("div",{className:"dish-restaurant__description",children:[(0,r.jsx)(T.JO,{name:"restaurant"}),(0,r.jsx)("span",{className:"dish-restaurant__title",children:t}),a&&(0,r.jsx)(T.Ct,{className:"restaurant-card__super",icon:"star-super",tooltip:o("tooltip-super")})]}),f&&!v&&(0,r.jsxs)("div",{className:"dish-restaurant__evaluation",children:[(0,r.jsx)(T.JO,{name:"star"}),(0,r.jsx)("span",{className:"dish-restaurant__evaluation-value",children:f})]}),v&&(0,r.jsx)("span",{className:"dish-restaurant__evaluation-value--new",children:o("restaurant:rating-new")})]}),(0,r.jsx)("div",{className:"dish-restaurant__divisor"}),(0,r.jsxs)("div",{className:"dish-restaurant__footer",children:[u&&d?(0,r.jsxs)("span",{className:"dish-restaurant__delivery-time",children:[(0,r.jsx)(T.JO,{name:"scheduling"}),(0,r.jsx)("span",{children:o("delivery-schedule")})]}):(0,r.jsx)("span",{className:"dish-restaurant__delivery-time",children:o("delivery-time",ge({},(0,p.xU)(i)))}),(0,r.jsx)("span",{className:"dish-restaurant__dot-divisor",children:" \u2022 "}),(0,r.jsx)("span",{className:R()("dish-restaurant__delivery-price",{"dish-restaurant__delivery-price--free":h}),children:h?o("delivery-methods:free"):(0,U.xG)(m)})]})]})})};je.propTypes=ye;var xe=(0,S.Z)(["restaurants"])(je),Ce=n(26793),_e=n(82580),Oe=n(22704),ke=n(18967),Se=n(52668),Pe=n(7058);n(34898);function Ie(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Re(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function we(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ne(e){return Ne=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Ne(e)}function Te(e,t){return!t||"object"!==Ee(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ae(e,t){return Ae=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Ae(e,t)}var Ee=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function qe(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ne(e);if(t){var i=Ne(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Te(this,n)}}var Me=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){we(e,t,n[t])}))}return e}({},z.Z,{garnishChoices:k().object.isRequired,formikProps:k().object.isRequired,isFulfilled:k().bool.isRequired,isMaximized:k().bool.isRequired,garnishOptionsCounter:k().number.isRequired}),Ze=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ae(e,t)}(a,e);var t,n,i,o=qe(a);function a(){return Ie(this,a),o.apply(this,arguments)}return t=a,n=[{key:"isRadio",value:function(){var e=this.props.garnishChoices,t=e.min,n=e.max;return 0===t&&1===n?Oe.VTW:1===t&&t===n&&Oe.mkg}},{key:"isRequired",value:function(){return this.props.garnishChoices.min>0}},{key:"renderCounter",value:function(e){var t=e.garnishItem,n=e.isMaximized,i=this.props,o=i.garnishChoices,a=i.formikProps,s=a.setFieldValue,l=a.values,c=t.code,u=o.code,d="".concat(u,"-").concat(c),f=l[d];return(0,r.jsx)(T.AT,{name:d,id:d,onDecrement:function(){var e=f-1;s(d,e<=0?void 0:e)},onIncrement:function(){return s(d,f?f+1:1)},startValue:f,disableIncrement:n,min:0,minimal:!0,controlled:!0,"data-test-id":"counter"})}},{key:"renderGarnishItens",value:function(){var e=this,t=this.props,n=t.garnishChoices,i=t.isMaximized,o=n.code,a=this.isRadio();return n.garnishItens.map((function(t){var s=t.description,l=t.unitPrice,c=t.details,u=t.logoUrl,d="".concat(o,"-").concat(t.code),f=l>0,p=(0,ke.QW)(Se.el.DISH,u,Se.zf.MEDIUM);return(0,r.jsx)("label",{tabIndex:"0",className:"garnish-choices__label",htmlFor:d,children:(0,r.jsxs)("span",{className:"garnish-choices__content",children:[(0,r.jsxs)("p",{className:"garnish-choices__option-desc",children:[s,c&&(0,r.jsx)("span",{className:"garnish-choices__option-details",children:c}),f&&(0,r.jsx)("span",{className:"garnish-choices__option-price",children:"+ ".concat((0,U.xG)(l))})]}),p&&(0,r.jsx)("figure",{className:"garnish-choices__content-img",children:(0,r.jsx)("img",{src:p,className:"garnish-choices__option-img",alt:n.details})}),a?e.renderRadio({garnishItem:t}):e.renderCounter({garnishItem:t,isMaximized:i})]})},d)}))}},{key:"renderRadio",value:function(e){var t=e.garnishItem,n=this.props,i=n.garnishChoices,o=n.formikProps,a=o.setFieldValue,s=o.setFieldTouched,l=o.values,c=i.code,u=this.isRadio(),d="".concat(u,"-").concat(c),f=t.code,p="".concat(c,"-").concat(f);return(0,r.jsx)(Pe.Y8,{name:d,id:p,onChange:a,onBlur:s,toggleAvailable:!0,value:f,checked:l[d]===f.toString(),"data-test-id":"radio"})}},{key:"renderMiniTagLength",value:function(){var e=this.props,t=e.garnishChoices,n=t.max,i=t.min,o=e.garnishOptionsCounter,a=e.isFulfilled;return(0,r.jsx)(T.Ng,{"data-test-id":"MIN-".concat(i,"/MAX-").concat(n),size:"small",variant:a?"disabled":"black",children:"".concat(o,"/").concat(n)})}},{key:"renderRequiredMiniTag",value:function(){var e=this.props.t,t=this.isRadio()&&!this.props.isFulfilled||!this.props.isFulfilled;return(0,r.jsx)(T.Ng,{"data-test-id":"required",size:"small",variant:t?"black":"disabled",children:e("required")})}},{key:"renderTitleDescription",value:function(){var e=this.props,t=e.garnishChoices,n=t.min,i=t.max,o=t.name,a=e.t,s="";return s=0===n?i>1?a("max-options-no-required",{max:i}):a("max-one-option-no-required"):1===n&&n===i?a("one-option-required"):a(n===i?"options-required":"min-options-required",{min:n}),(0,r.jsxs)("p",{className:"garnish-choices__title","data-test-id":s,children:[o,(0,r.jsx)("span",{className:"garnish-choices__title-desc",children:s})]})}},{key:"renderTags",value:function(){return(0,r.jsxs)(r.Fragment,{children:[!this.isRadio()&&this.renderMiniTagLength(),this.isRequired()&&this.renderRequiredMiniTag()]})}},{key:"render",value:function(){var e=this.props.isFulfilled;return(0,r.jsxs)("section",{className:"garnish-choices__list",children:[(0,r.jsx)("div",{className:"garnish-choices__header",children:(0,r.jsxs)("span",{className:"garnish-choices__header-content",children:[this.renderTitleDescription(),(0,r.jsx)("span",{className:"garnish-choices__tags",children:e?(0,r.jsx)(T.JO,{className:"garnish-choices__choice--is-fulfilled",name:"check-mark"}):this.renderTags()})]})}),this.renderGarnishItens()]})}}],n&&Re(t.prototype,n),i&&Re(t,i),a}(j.Component);Ze.propTypes=Me;var De=(0,S.Z)("garnishes")(Ze),Le=n(48271),Fe=n(70245);n(9090);function Be(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ge(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ue(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function He(e){return He=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},He(e)}function ze(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Ue(e,t,n[t])}))}return e}function $e(e,t){return!t||"object"!==Je(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ve(e,t){return Ve=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Ve(e,t)}function We(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(l){s=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(e,t)||Ye(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Qe(e){return function(e){if(Array.isArray(e))return Be(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Ye(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Je=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function Ye(e,t){if(e){if("string"===typeof e)return Be(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Be(e,t):void 0}}function Ke(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=He(e);if(t){var i=He(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return $e(this,n)}}var Xe={values:k().any.isRequired,onChangeGarnishes:k().func.isRequired,garnishesChoices:k().array,setFieldValue:k().func.isRequired,setFieldError:k().func.isRequired,isCartEnabled:k().boolean},et=function(e){return e.garnishOptionsCounter>=e.min},tt=function(e){var t=e.values,n=e.code,r=Object.keys(t).filter((function(e){return-1!==e.search("".concat(n))})).reduce((function(e,n){return e+t[n]}),0);return"string"===typeof r?r.length&&1:r},nt=function(e){var t=e.garnishesChoices,n=e.parentCode;return t.find((function(e){return e.code===n}))},rt=function(e,t){return e.startsWith(t)},it=function(e){var t,n,r=e.parent,i=void 0===r?[]:r,o=e.garnishItemCode,a=void 0===o?[]:o;return{garnishItem:null===(t=i.garnishItens)||void 0===t?void 0:t.find((function(e){return rt(e.code,a)})),itemOrder:null===(n=i.garnishItens)||void 0===n?void 0:n.findIndex((function(e){return rt(e.code,a)}))}},ot=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ve(e,t)}(a,e);var t,n,i,o=Ke(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=o.call(this,e)).state={values:{},dishChoices:[]},t}return t=a,i=[{key:"mapGarnishesToCheckout",value:function(e){var t=e.garnishesChoices,n=e.values,r=Object.keys(n),i=r.filter((function(e){return e.includes("GARNISH-RADIO")})),o=r.filter((function(e){return!e.includes("GARNISH-RADIO")})),a=i.map((function(e){var r=e.split("-").reverse()[0],i=n[e].toString(),o=nt({garnishesChoices:t,parentCode:r}),a=it({parent:o,garnishItemCode:i}),s=a.garnishItem,l=a.itemOrder,c=s||[];return{amount:1,name:c.description,unitPrice:c.unitPrice,code:c.code,parentCode:r,parentOrder:o.order,itemOrder:l}})),s=0,l=[];return o.forEach((function(e){var r=e.split("-"),i=r[0],o=r[1],a=nt({garnishesChoices:t,parentCode:i}),c=it({parent:a,garnishItemCode:o}),u=c.garnishItem,d=void 0===u?{}:u,f=c.itemOrder,p=d.description,h=d.unitPrice,m=d.code,v=null===a||void 0===a?void 0:a.order;if((0,Fe.Z)({parentCode:i}))for(var b=0;b<n[e];b+=1)(s+=1)>1&&(i="".concat(r[0]).concat(s)),l.push({amount:1,name:p,unitPrice:h,code:m,parentCode:i,parentOrder:v,itemOrder:f});else l.push({amount:n[e],name:p,unitPrice:h,code:m,parentCode:i,parentOrder:v,itemOrder:f})})),Qe(a).concat(Qe(l))}},{key:"joinPizzaFlavorsChoices",value:function(e){var t=e.garnishesChoices,n=t.findIndex((function(e){return(0,Fe.Z)({parentCode:e.code})})),r=t.reduce((function(e,t){return(0,Fe.Z)({parentCode:t.code})&&(e.min+=1,e.max+=1),e}),ze({},t[n],{min:0,max:0})),i=t.filter((function(e){return!1===(0,Fe.Z)({parentCode:e.code})}));return i.splice(n,0,r),i}},{key:"getDerivedStateFromProps",value:function(e,t){var n=e.garnishesChoices,r=e.values,i=e.isCartEnabled,o={},s=[];if((0,Le.Z)(n,t.garnishesChoices)||(s=!i&&function(e){var t=e.garnishesChoices;return t&&t.filter((function(e){return(0,Fe.Z)({parentCode:e.code})})).length}({garnishesChoices:n})>1?a.joinPizzaFlavorsChoices({garnishesChoices:n}):n,o=ze({},t,{garnishesChoices:n,dishChoices:s})),!(0,Le.Z)(r,E()(t,"values",{}))){var l=a.mapGarnishesToCheckout({garnishesChoices:n,values:r}),c=function(e){var t=e.garnishesChoices,n=e.values;return t.every((function(e){var t=e.code,r=e.min,i=tt({values:n,code:t});return et({garnishOptionsCounter:i,min:r})}))}({garnishesChoices:E()(t,"dishChoices",[]),values:r});e.onChangeGarnishes({garnish:l,garnishForm:r,garnishesFulfilled:c}),o=ze({},t,o,{values:r,garnishesFulfilled:c})}return o}}],(n=[{key:"componentDidMount",value:function(){this.selectRequiredGarnishOption()}},{key:"selectRequiredGarnishOption",value:function(){var e=this.props.setFieldValue,t=this.state.dishChoices;(null===t||void 0===t?void 0:t.length)&&t.forEach((function(t){var n=t.min,r=t.max;if(1===t.garnishItens.length){var i=We(t.garnishItens,1)[0];1!==n||n!==r?0!==n&&1!==r&&e("".concat(t.code,"-").concat(i.code),n):e("".concat(Oe.mkg,"-").concat(t.code),i.code)}}))}},{key:"renderGarnishesChoices",value:function(){var e=this.props,t=e.setFieldValue,n=e.setFieldError,i=this.state,o=i.values,a=i.dishChoices,s={setFieldValue:t,setFieldError:n,values:o};return(0,r.jsx)("section",{className:"dish-garnishes",children:(0,r.jsx)(_e.l0,{tabIndex:"0","data-test-id":"form",children:a.map((function(e){var t,n=e.code,i=e.min,a=e.max,l=tt({values:o,code:n}),c=et({garnishOptionsCounter:l,min:i});return(0,r.jsx)(De,{tabIndex:"0","data-test-id":"choice",formikProps:s,garnishOptionsCounter:l,isFulfilled:c,isMaximized:(t={garnishOptionsCounter:l,max:a},t.garnishOptionsCounter===t.max),garnishChoices:e},e.code)}))})})}},{key:"render",value:function(){return this.props.garnishesChoices&&this.renderGarnishesChoices()}}])&&Ge(t.prototype,n),i&&Ge(t,i),a}(j.PureComponent);ot.propTypes=Xe,ot.defaultProps={garnishesChoices:null,isCartEnabled:!1};var at=(0,_e.j0)({mapPropsToValues:function(e){return e.garnishForm||{}}})(ot);n(23521);function st(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function lt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ct(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ut(e){return ut=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},ut(e)}function dt(e,t){return!t||"object"!==pt(t)&&"function"!==typeof t?st(e):t}function ft(e,t){return ft=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},ft(e,t)}var pt=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function ht(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ut(e);if(t){var i=ut(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return dt(this,n)}}var mt=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){ct(e,t,n[t])}))}return e}({},z.Z,{observation:k().string,onChange:k().func.isRequired}),vt=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ft(e,t)}(a,e);var t,n,i,o=ht(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=o.call(this,e)).state={observation:e.observation||""},t.handleChange=t.handleChange.bind(st(t)),t}return t=a,(n=[{key:"handleChange",value:function(e){var t=e.target.value.slice(0,140);this.setState({observation:t}),this.props.onChange(t)}},{key:"render",value:function(){var e=this.state.observation,t=this.props.t;return(0,r.jsxs)("div",{className:"dish-observation-form",children:[(0,r.jsxs)("div",{className:"dish-observation-form__header",children:[(0,r.jsx)("label",{tabIndex:"0",className:"dish-observation-form__label",htmlFor:"observations-form",children:t("dish.observation-form-label")}),(0,r.jsx)("span",{className:"dish-observation-form__counter",children:"".concat(e.length," / 140")})]}),(0,r.jsx)("textarea",{maxLength:"140",tabIndex:"0",id:"observations-form",className:"dish-observation-form__textarea",value:e,onChange:this.handleChange,placeholder:t("dish.observation-placeholder")})]})}}])&&lt(t.prototype,n),i&&lt(t,i),a}(j.PureComponent);vt.propTypes=mt,vt.defaultProps={observation:""};var bt=(0,S.Z)("restaurant")(vt),gt=n(84264),yt=n(29411),jt=n(61463),xt=n(84340),Ct=n(40137),_t=n(38152),Ot=n(54366),kt=n(37295),St=n(42793),Pt=(n(21501),{dish:k().shape({unitPrice:k().number,unitMinPrice:k().number,unitOriginalPrice:k().number,promotionalPrice:k().number,minimumPromotionalPrice:k().number}).isRequired,isPromotion:k().bool});function It(e){var t=e.dish,n=e.isPromotion,i=(0,Ce.$)("restaurant").t,o=t.unitPrice,a=t.unitMinPrice,s=t.unitOriginalPrice,l=t.promotionalPrice,c=t.minimumPromotionalPrice,u=(0,St.U)({unitPrice:o,unitMinPrice:a,unitOriginalPrice:s,promotionalPrice:l,minimumPromotionalPrice:c,isPromotion:n}),d=u.price,f=u.minPrice,p=u.originalPrice,h=p?f?f>p?(0,r.jsxs)("span",{className:"dish-price__min","data-test-id":"dish-content-price-min",children:[Rt(d,f)&&"".concat(i("dish.starting-at")),(0,U.xG)(f)]}):d>0&&Rt(d,f)&&f>p?(0,U.xG)(f):(0,r.jsxs)("span",{className:"dish-price__discount","data-test-id":"dish-content-discount-price",children:[Rt(d,f)?"".concat(i("dish.starting-at"),"  ").concat((0,U.xG)(f)):(0,U.xG)(d),(0,r.jsx)("span",{className:"dish-price__original",children:(0,U.xG)(p)})]}):(0,r.jsx)("span",{children:wt(d,p)?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{className:"dish-price__discount",children:(0,U.xG)(d)}),(0,r.jsx)("span",{className:"dish-price__original","data-test-id":"dish-content-original-price-unit-price",children:(0,U.xG)(p)})]}):(0,U.xG)(d)}):f?d?(0,r.jsx)("span",{children:Rt(d,f)?i("dish.starting-at")+(0,U.xG)(f):(0,U.xG)(d)}):(0,U.xG)(f):(0,U.xG)(d);return(0,r.jsx)("div",{className:"dish-price",children:h})}function Rt(e,t){return t>e}function wt(e,t){return e<t}It.propTypes=Pt,It.defaultProps={isPromotion:!1};n(75565);function Nt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Tt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Nt(e,t,n[t])}))}return e}var At=Tt({},z.Z,{dish:k().shape({description:k().string,logoUrl:k().string,details:k().string,warns:(0,w.Z)(["greaterPrice"],k().bool.isRequired)}).isRequired,restaurant:k().shape({name:k().string.isRequired,charging:k().string}),garnishForm:k().object,onChangeGarnishes:k().func.isRequired,onChangeObservations:k().func.isRequired,observation:k().string,isEditing:k().bool,checkoutItem:k().object,cartItem:k().object,restaurantSlug:k().object.isRequired,isPromotion:k().bool.isRequired,isLoop:k().bool,dishDiscountTagData:k().object,closeComponent:k().node.isRequired,showButtonReport:k().bool.isRequired,openReportModal:k().func.isRequired}),Et=function(e){var t,n=e.dish,i=e.restaurant,o=e.garnishForm,a=e.onChangeObservations,s=e.onChangeGarnishes,l=e.checkoutItem,c=e.observation,u=e.isEditing,d=e.restaurantSlug,f=e.isPromotion,p=e.isLoop,h=e.dishDiscountTagData,m=e.actionComponent,v=e.closeComponent,b=e.showButtonReport,g=e.openReportModal,y=(0,Ce.$)(["restaurant","dishes","delivery-methods"]).t,j=(0,Ot.Z)("isCartEnabled"),x=j.config,C=j.isLoading,_=i.charging,O=n.warns,k=n.choices,S=(Boolean(null===O||void 0===O?void 0:O.greaterPrice)||_===gt.PS)&&Boolean(null===k||void 0===k?void 0:k.find((function(e){return(0,Fe.Z)({parentCode:e.code})}))),P=u?null===l||void 0===l?void 0:l.obs:c,I=f&&null!==n.promotionalPrice&&n.promotionalPrice>=0&&!p,w=Boolean(h);return(0,r.jsxs)("div",{className:R()("dish-content",{"dish-content--no-image":!n.logoUrl}),children:[n.logoUrl&&!Z.tq&&(0,r.jsx)("div",{className:"dish-content__img-container","data-test-id":"dish-content__img-container",children:(0,r.jsx)("img",{src:(0,ke.QW)(Se.el.DISH,n.logoUrl,Se.zf.MEDIUM),alt:n.description,className:"dish-content__img"})}),(0,r.jsx)("div",{className:"dish-content__header",children:v}),(0,r.jsxs)("div",{className:R()("dish-content__scrolling",{"dish-content__scrolling--loop-spacing":p}),children:[n.logoUrl&&Z.tq&&(0,r.jsx)("div",{className:"dish-content__img-bg","data-test-id":"dish-content__img-container",style:{backgroundImage:"url(".concat((0,ke.QW)(Se.el.DISH,n.logoUrl,Se.zf.MEDIUM))}}),(0,r.jsxs)("div",{className:R()("dish-content__container","dish-content__title"),children:[Z.tq&&n.description,I&&!w&&(0,r.jsx)(yt.Z,{})]}),n.details&&(0,r.jsx)("p",{className:"dish-content__container dish-content__details","data-test-id":"dish-content__details",children:n.details}),(0,r.jsx)(kt.Z,{productTags:n.productTags,productInfo:n.productInfo,dishContent:!0}),!w&&(0,xt.eg)(n.tags)&&(0,r.jsx)("div",{className:"dish-content__container dish-content__details",children:(0,r.jsx)(Ct.Z,{mini:!0})}),S&&(0,r.jsxs)("div",{className:"dish-content__container dish-warnings","data-test-id":"dish-warnings",children:[(0,r.jsx)("div",{className:"dish-warnings__title",children:y("dish.warn-title")}),(0,r.jsx)("span",{className:"dish-warnings__item",children:y("dish.warn-greater-price")})]}),w&&(0,r.jsx)("div",{className:"dish-content__container",children:(0,r.jsx)(jt.Z,Tt({variant:"dish-content-tag-tooltip",showDescription:!0},h))}),(0,r.jsx)("div",{className:"dish-content__container",children:(0,r.jsx)(It,{dish:n,isPromotion:f})}),Boolean(null===n||void 0===n||null===(t=n.productTags)||void 0===t?void 0:t.length)&&(0,r.jsx)("div",{className:"dish-content__container dish-content__merchandise-tags",children:(0,r.jsx)(_t.Z,{tags:null===n||void 0===n?void 0:n.productTags})}),!p&&(0,r.jsx)("div",{className:"dish-content__container dish-content__restaurant",children:(0,r.jsx)(xe,Tt({},i,{restaurantSlug:d}))}),!C&&k&&(0,r.jsx)(at,{onChangeGarnishes:s,garnishForm:o,garnishesChoices:k,isCartEnabled:null===x||void 0===x?void 0:x.isEnabled}),function(){var e;return p?(0,r.jsx)("div",{className:"dish__loop-text","data-test-id":"dish-loop-limit",children:(0,r.jsx)("p",{children:y("loop:dish.limit-text")})}):!1===(null===i||void 0===i||null===(e=i.configs)||void 0===e?void 0:e.itemObservation)?null:(0,r.jsx)("div",{className:"dish-content__interactive-desktop",children:(0,r.jsx)(bt,{observation:P,onChange:a})})}(),b&&(0,r.jsx)("div",{className:"dish-content__container",children:(0,r.jsx)(T.zx,{theme:"tertiary",onClick:g,children:y("report")})})]}),(0,r.jsx)("div",{className:"dish-content__action",children:m})]})};Et.propTypes=At,Et.defaultProps={garnishForm:{},restaurant:{charging:"INDIVIDUAL"},checkoutItem:null,cartItem:null,isEditing:!1,observation:"",isLoop:!1,dishDiscountTagData:{}};var qt=Et,Mt=n(85684),Zt=n(32754),Dt=n(70274),Lt=n(10902),Ft=n(19198),Bt=n(96165),Gt=n(40507),Ut=n(72186),Ht=n(91800),zt=n(7238),$t=n(19286),Vt=n(89814),Wt=n(73057),Qt=n(35290),Jt=n(85433),Yt=n(8586),Kt=n(75474),Xt=n(96802);n(44355);function en(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function tn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function nn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function rn(e){return rn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},rn(e)}function on(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){nn(e,t,n[t])}))}return e}function an(e,t){return!t||"object"!==ln(t)&&"function"!==typeof t?en(e):t}function sn(e,t){return sn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},sn(e,t)}var ln=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function cn(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=rn(e);if(t){var i=rn(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return an(this,n)}}var un,dn={unsetCheckoutRestaurant:L.Bt,setCheckoutRestaurant:L.x0,addCheckoutItem:L.J6,editCheckoutItem:L.sG,removeCheckoutItem:L.aX,wipeCheckout:L.CP,setDishState:N.yC,setFloatingBox:F.N,openContextCard:Bt.p6,trackClickAddItem:Ut.C1,trackClickDish:Ut.dG,addCartItem:Ht._7,editCartItem:Ht.m8,removeCartItem:Ht.B8,unsetCart:Ht.ni,setCartDeliveryMethod:Ht.CW,setMerchantDeliveryMethod:Ht.wd},fn=on({},z.Z,{actions:(0,w.Z)(Object.keys(dn),k().func.isRequired).isRequired,checkout:k().object.isRequired,checkoutId:k().oneOfType([k().string,k().number]),restaurant:k().object.isRequired,dish:k().object,restaurantSlug:k().object.isRequired,isPromotion:k().bool.isRequired,isLoop:k().bool,dishDiscountTagData:k().object,closeComponent:k().node.isRequired,hasError:k().bool.isRequired,isCartInBackground:k().bool,showButtonReport:k().bool,openReportModal:k().func}),pn={checkoutId:"",dish:{code:null,description:null,details:null,needChoices:!1,choices:[],unitPrice:0,unitMinPrice:0,unitOriginalPrice:0,order:0,availability:null,posCode:null,enabled:!1,logoUrl:null,tags:[]},isLoop:!1,dishDiscountTagData:{},isCartInBackground:!1,showButtonReport:!1,openReportModal:function(){}},hn=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&sn(e,t)}(a,e);var t,n,i,o=cn(a);function a(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),t=o.call(this,e);var n=e.checkoutId,r=e.checkout,i=e.dish,s=e.dishModal,l=e.cart,c=s.cartItemId,u=l.items,d=(0,Vt.PF)({items:u,cartItemId:c}),f=r[r.currentRestaurant],p=f&&f.items[n]?f.items[n].qty:1,h=Boolean(i.choices)&&i.choices.some((function(e){return e.min>0})),m="";m=d?(null===d||void 0===d?void 0:d.observation)||"":f&&f.items[n]?f.items[n].obs:"";var v,b=a.hashGarnishForm({currentCheckout:f,checkoutId:n})?f.items[n].garnishForm:void 0,g=(null===d||void 0===d?void 0:d.garnishForm)||void 0,y=b||g||{},j=a.hashGarnish({currentCheckout:f,checkoutId:n})?f.items[n].garnish:[];return t.state={qty:null!==(v=null===d||void 0===d?void 0:d.quantity)&&void 0!==v?v:p,obs:m,garnish:j,garnishForm:y,garnishesFulfilled:!e.dish.choices||!h,closedRestaurantAlertIsOpen:!1,addressInvalidDialogIsOpen:!1,cartShuffleAlertIsOpen:!1},t.onChangeCounter=t.onChangeCounter.bind(en(t)),t.onChangeGarnishes=t.onChangeGarnishes.bind(en(t)),t.onChangeObservations=t.onChangeObservations.bind(en(t)),t.onSubmitItem=t.onSubmitItem.bind(en(t)),t.onRemoveItem=t.onRemoveItem.bind(en(t)),t.openClosedRestaurantAlert=t.openClosedRestaurantAlert.bind(en(t)),t.closeClosedRestaurantAlert=t.closeClosedRestaurantAlert.bind(en(t)),t.openAddressInvalidDialog=t.openAddressInvalidDialog.bind(en(t)),t.closeAddressInvalidDialog=t.closeAddressInvalidDialog.bind(en(t)),t.openCartShuffleAlert=t.openCartShuffleAlert.bind(en(t)),t.closeCartShuffleAlert=t.closeCartShuffleAlert.bind(en(t)),t.onAcceptShuffle=t.onAcceptShuffle.bind(en(t)),t}return t=a,n=[{key:"componentDidMount",value:function(){var e,t=this.props,n=t.actions,r=t.dish,i=t.restaurant,o=t.routerStates,a=t.dishDiscountTagData,s=t.hasError,l=Boolean(a);r.code?(n.trackClickDish({dish:r,routerStates:o,hasDishDiscountTag:l}),Gt.Z.viewDishPage(!0)):Gt.Z.viewDishPage(!1),s&&Qt.cM.info("Error on show dish modal",{restaurantId:null===i||void 0===i||null===(e=i.details)||void 0===e?void 0:e.id,errorStatusCode:null===i||void 0===i?void 0:i.errorStatusCode,dishUuid:null===r||void 0===r?void 0:r.id,dishCode:null===r||void 0===r?void 0:r.code})}},{key:"onCloseDish",value:function(e){this.props.actions.setDishState({isOpen:!1,changeRoute:e})}},{key:"onSubmitCartItem",value:function(){var e,t,n,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=r.allowShuffle,o=void 0!==i&&i,a=this.props,s=a.actions,l=a.restaurant,c=a.dish,u=a.cart,d=a.dishModal,p=a.isCartInBackground,h=a.checkoutId,m=a.address,v=a.cartDeliveryIsEmpty,b=this.state,g=b.qty,y=b.obs,j=b.garnish,x=b.garnishForm,C=d.cartItemId,_=u.items,O=(0,f.p2)(l),k=E()(l.deliveryInfo,"deliversAtLocation",!1),S=(0,zt.YY)(m),P=p?(0,Vt.fD)({items:_,checkoutItemIndex:h}):(0,Vt.PF)({items:_,cartItemId:C});if(O&&!(null===l||void 0===l||null===(e=l.deliveryInfo)||void 0===e?void 0:e.availableForScheduling)&&S)this.openClosedRestaurantAlert();else if(!(null===u||void 0===u||null===(t=u.merchant)||void 0===t?void 0:t.id)||(null===u||void 0===u||null===(n=u.merchant)||void 0===n?void 0:n.id)===l.details.id||o)if(k){if(P){var I=(0,Vt.kq)({garnish:j});s.editCartItem(on({},P,{quantity:g,observation:y,subItems:null===I||void 0===I?void 0:I.subItems}),x)}else{var R=this.getSchedulingDetails();if(s.setMerchantDeliveryMethod(R.deliveryMethod,l.uuid),v||o){var w,N=null===(w=u.deliveryMethod)||void 0===w?void 0:w[l.uuid],T=(0,Vt.D4)(l.deliveryMethods,N);s.setCartDeliveryMethod(T)}var A=c,q=(0,Vt.kq)(on({},c,{qty:g,obs:y,garnish:j}),{code:null===A||void 0===A?void 0:A.code});s.addCartItem(q,l.uuid,l.details.name,x)}this.onCloseDish(!0)}else this.openAddressInvalidDialog();else this.openCartShuffleAlert()}},{key:"onSubmitItem",value:function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.allowShuffle,i=void 0!==r&&r,o=this.props,a=o.actions,s=o.checkout,l=o.restaurant,c=o.dish,u=o.checkoutId,d=o.restaurantSlug,p=o.isLoop,h=o.isPromotion,m=o.routerStates,v=o.isCartInBackground,b=o.address,g=o.catalogCategoryName,y=l.menu,j=this.state,x=j.qty,C=j.obs,_=j.garnish,O=j.garnishForm,k=M()(_,["parentOrder","itemOrder"]),S=s[l.details.id],P=E()(l.deliveryInfo,"deliversAtLocation",!1),I=!p,R=this.getSchedulingDetails(),w=(0,f.p2)(l),N=(0,zt.YY)(b);if(w&&!(null===l||void 0===l||null===(e=l.deliveryInfo)||void 0===e?void 0:e.availableForScheduling)&&N)this.openClosedRestaurantAlert();else if(!s.currentRestaurant||s.currentRestaurant===l.details.id||i)if(P){if((null===S||void 0===S||null===(t=S.restaurant)||void 0===t?void 0:t.restaurantId)&&!p||(a.wipeCheckout(),a.setCheckoutRestaurant({restaurantId:l.uuid,name:l.details.name,restaurantSlug:d,details:on({},l.details,{menu:y}),isDocumentRequired:l.details.isDocumentRequired,charging:l.details.charging,deliveryMethods:l.deliveryMethods,scheduling:R}),a.setMerchantDeliveryMethod(R.deliveryMethod,l.uuid)),S&&S.items[u])a.editCheckoutItem({qty:x,obs:C,garnish:k,garnishForm:O,checkoutId:u,restaurantId:l.uuid,id:null===c||void 0===c?void 0:c.id});else{var T,A,q,Z,D=on({},c,{menuCode:null===(T=(0,xt.H5)(y,null===c||void 0===c?void 0:c.code))||void 0===T?void 0:T.code,qty:x,obs:C,garnish:k,garnishForm:O,restaurantId:l.uuid,category:(0,$t.n)(null===l||void 0===l||null===(A=l.details)||void 0===A?void 0:A.type,null===l||void 0===l||null===(q=l.details)||void 0===q||null===(Z=q.mainCategory)||void 0===Z?void 0:Z.code),scalePrices:(0,Jt.Ru)({unitPrice:c.unitPrice,promotionalPrice:c.promotionalPrice,scalePrices:c.scalePrices}),totalValue:this.dishTotalPrice()});a.addCheckoutItem(D),this.manageRedirect()}v&&this.onSubmitCartItem({allowShuffle:i});var L=(0,ke.Qw)(window);a.trackClickAddItem({dish:c,restaurant:l,checkout:this.state,isPromotion:h,routerStates:m,originArea:L.get("originArea"),aisleName:g,taxonomy:L.get(Xt._H)}),this.onCloseDish(I)}else this.openAddressInvalidDialog();else this.openCartShuffleAlert()}},{key:"onAcceptShuffle",value:function(){var e=this.props,t=e.actions,n=e.checkout,r=e.isCartInBackground;this.closeCartShuffleAlert(),r&&(t.unsetCart(),this.onSubmitCartItem({allowShuffle:!0})),t.unsetCheckoutRestaurant({restaurantId:n.currentRestaurant}),this.onSubmitItem({allowShuffle:!0})}},{key:"onRemoveItem",value:function(){var e=this.props,t=e.actions,n=e.restaurant,r=e.checkoutId,i=e.isCartInBackground;t.removeCheckoutItem({checkoutId:r,restaurantId:n.details.id}),i&&this.onRemoveCartItem(),this.onCloseDish()}},{key:"onRemoveCartItem",value:function(){var e=this.props,t=e.actions,n=e.cart,r=e.dishModal,i=e.checkoutId,o=e.isCartInBackground,a=n.items,s=r.cartItemId,l=o?(0,Vt.fD)({items:a,checkoutItemIndex:i}):(0,Vt.PF)({items:a,cartItemId:s});l&&t.removeCartItem(l),this.onCloseDish()}},{key:"onChangeCounter",value:function(e){this.setState({qty:e})}},{key:"onChangeObservations",value:function(e){this.setState({obs:e})}},{key:"onChangeGarnishes",value:function(e){var t=e.garnish,n=e.garnishForm,r=e.garnishesFulfilled;this.setState({garnish:t,garnishForm:n,garnishesFulfilled:r})}},{key:"getSchedulingDetails",value:function(){var e,t,n,r,i,o,a,s,l=this.props,c=l.checkout,u=l.restaurant,d=c[u.details.id];return{deliveryDate:null!==(i=null===d||void 0===d?void 0:d.deliveryDate)&&void 0!==i?i:null===(e=u.scheduling)||void 0===e?void 0:e.deliveryDate,scheduled:null!==(o=null===d||void 0===d?void 0:d.scheduled)&&void 0!==o?o:null===(t=u.scheduling)||void 0===t?void 0:t.scheduled,isTakeOut:null!==(a=null===d||void 0===d?void 0:d.isTakeOut)&&void 0!==a?a:null===(n=u.scheduling)||void 0===n?void 0:n.isTakeOut,deliveryMethod:null!==(s=null===d||void 0===d?void 0:d.deliveryMethod)&&void 0!==s?s:null===(r=u.scheduling)||void 0===r?void 0:r.deliveryMethod}}},{key:"dishTotalPrice",value:function(){var e=this.state,t=e.qty,n=e.garnish,r=this.props,i=r.dish,o=i.unitPrice,a=i.promotionalPrice,s=r.restaurant.details.charging,l=r.isPromotion,c=r.dishDiscountTag,u=Boolean(c);return(0,Mt.Jw)({qty:t,unitPrice:o,promotionalPrice:a,isPromotion:l,garnish:n,charging:s,hasDishDiscountTag:u})}},{key:"deliveryAddress",value:function(){var e=this.props,t=e.address.location,n=t.district,r=t.address,i=t.geoLocated,o=t.streetNumber,a=e.t;return i?a("address:geo.next-to",{district:n||r}):(0,Zt.Z)([r,o])}},{key:"manageRedirect",value:function(){var e=this.props,t=e.actions,n=e.restaurantSlug,r=e.isLoop,i=D.Router.router.pathname,o=r&&!Z.tq;["/SubHomeCardstack/SubHomeCardstack","/Search/Search"].indexOf(i)>-1&&!Z.tq?t.setFloatingBox({name:"restaurantCart",isVisible:!0}):o?D.Router.pushRoute(ve.ROUTE_CHECKOUT):"/Restaurant/Restaurant"!==i&&D.Router.pushRoute(ve.ROUTE_RESTAURANT_HOME,n)}},{key:"openClosedRestaurantAlert",value:function(){this.setState({closedRestaurantAlertIsOpen:!0})}},{key:"closeClosedRestaurantAlert",value:function(){this.setState({closedRestaurantAlertIsOpen:!1})}},{key:"openAddressInvalidDialog",value:function(){this.setState({addressInvalidDialogIsOpen:!0})}},{key:"closeAddressInvalidDialog",value:function(){this.setState({addressInvalidDialogIsOpen:!1})}},{key:"openCartShuffleAlert",value:function(){this.setState({cartShuffleAlertIsOpen:!0})}},{key:"closeCartShuffleAlert",value:function(){this.setState({cartShuffleAlertIsOpen:!1})}},{key:"renderAddressInvalidDialog",value:function(){var e=this.state.addressInvalidDialogIsOpen,t=this.props.restaurant.details.address,n=[E()(t,"district"),E()(t,"city"),E()(t,"state")].filter(Boolean).join(" - ");return(0,r.jsx)(Lt.Z,{isOpen:e,deliveryAddress:this.deliveryAddress(),onRequestClose:this.closeAddressInvalidDialog,restaurantAddress:n})}},{key:"renderClosedRestaurantAlert",value:function(){var e=this.state.closedRestaurantAlertIsOpen,t=this.props,n=t.t,i=t.restaurant.details.nextOpeningHour,o=void 0===i?{}:i,a=(0,Dt.ex)(o.openingTime),s=(0,Dt.iL)(o.openingTime)?n("restaurant:dish.closed-restaurant-title-opening",{openingHour:a}):n("restaurant:dish.closed-restaurant-title-not-opening");return(0,r.jsx)(T.bZ,{onRequestClose:this.closeClosedRestaurantAlert,isOpen:e,title:s,message:n("restaurant:dish.closed-restaurant-message")})}},{key:"renderCartShuffleAlert",value:function(){var e=this.state.cartShuffleAlertIsOpen;return(0,r.jsx)(T.u_,{type:"dialog",animation:"bottom",onRequestClose:this.closeCartShuffleAlert,isOpen:e,displayActions:!0,closeIcon:"close",children:(0,r.jsx)(Ft.Z,{onRequestClose:this.closeCartShuffleAlert,onAccept:this.onAcceptShuffle})})}},{key:"render",value:function(){var e,t,n,i,o=this.state,a=o.qty,s=o.garnishesFulfilled,l=o.garnishForm,c=o.obs,u=this.props,d=u.restaurant,f=u.dish,p=u.checkout,h=u.checkoutId,m=u.isPromotion,v=u.restaurantSlug,b=u.isLoop,g=u.dishDiscountTagData,y=u.closeComponent,j=u.hasError,x=u.dishModal,C=u.cart,_=u.showButtonReport,O=u.openReportModal,k=(null!==(n=null===d||void 0===d||null===(e=d.details)||void 0===e?void 0:e.configs)&&void 0!==n?n:{}).maxItemsPerOrder,S=x.cartItemId,P=C.items,I=on({},(0,Vt.PF)({items:P,cartItemId:S}),c?{observation:c}:{}),R=on({},E()(p[d.details.id],"items[".concat(h,"]")),c?{obs:c}:{}),w=!!p[d.details.id]&&Boolean(p[d.details.id].items[h]),N=p[p.currentRestaurant]||{},A=E()(N,"items[".concat(h,"].qty"),0),q=(0,xt.GT)(N.items)-A+a,M=k&&q>=k,Z=k&&q>k;return j?(0,r.jsxs)(r.Fragment,{children:[y,(0,r.jsx)("div",{className:"dish__error-message",children:(0,r.jsx)(T.Bc,{})})]}):(0,r.jsxs)("div",{className:"dish__container","data-test-id":"dish-container",children:[(0,r.jsx)(qt,{dish:f,garnishForm:l,restaurant:on({},d.details,{deliveryFee:d.deliveryFee,availableForScheduling:d.deliveryInfo.availableForScheduling}),onChangeObservations:this.onChangeObservations,onChangeGarnishes:this.onChangeGarnishes,checkoutItem:R,cartItem:I,observation:c,isEditing:w,restaurantSlug:v,isPromotion:m,isLoop:b,dishDiscountTagData:g,closeComponent:y,showButtonReport:_,openReportModal:O,actionComponent:(0,r.jsx)(he,{onChangeQty:this.onChangeCounter,currentQty:a,price:this.dishTotalPrice(),onSubmitItem:this.onSubmitItem,dishEdition:w,onRemoveItem:this.onRemoveItem,isDisabled:!s,deliversAtLocation:null!==(i=null===d||void 0===d||null===(t=d.deliveryInfo)||void 0===t?void 0:t.deliversAtLocation)&&void 0!==i&&i,isLoop:b,maxItemsReached:M,maxItemsPerOrder:k&&Number(k),disableItemAddition:Z})}),this.renderAddressInvalidDialog(),this.renderClosedRestaurantAlert(),this.renderCartShuffleAlert()]})}}],i=[{key:"hashGarnish",value:function(e){var t=e.currentCheckout,n=e.checkoutId;return t&&t.items[n]&&t.items[n].garnish}},{key:"hashGarnishForm",value:function(e){var t=e.currentCheckout,n=e.checkoutId;return t&&t.items[n]&&t.items[n].garnishForm}}],n&&tn(t.prototype,n),i&&tn(t,i),a}(j.Component);hn.propTypes=fn,hn.defaultProps=pn;var mn=(0,H.Z)(hn,[Yt.s,(0,i.$j)((function(e,t){var n=e.checkout,r=e.address,i=e.promotion,o=e.promotions,a=e.router,s=e.dish,l=e.cart,c=e.dishModal,u=e.catalogCategory;return{checkout:n,address:r,isPromotion:(0,Mt.XJ)({promotion:i,checkout:n},t.restaurant.uuid),routerStates:a,dishDiscountTagData:(0,xt.Yk)(null!==(un=null===s||void 0===s?void 0:s.tags)&&void 0!==un?un:[],(0,Wt.Gp)({promotions:o})),cart:l,dishModal:c,cartDeliveryIsEmpty:(0,Kt.nU)({cart:l}),catalogCategoryName:null===u||void 0===u?void 0:u.name}}),(function(e){return{actions:(0,P.DE)(dn,e)}})),(0,S.Z)(["restaurant","address","loop"])]),vn=function(e){var t=e.companyCode;return"ILP"===(void 0===t?"":t)},bn=n(48141),gn=n(78645),yn=n(94432);n(95002);function jn(e){var t=e.isOpen,n=e.details,i=e.onRequestClose,o=(0,Ce.$)("merchant").t,a=(0,j.useState)(),s=a[0],l=a[1];return(0,r.jsx)(T.u_,{type:"dialog",animation:"bottom",onRequestClose:function(){return i(!1)},isOpen:t,displayActions:!0,closeIcon:"close",overlayClassName:"cart-shuffle-modal__overlay",children:(0,r.jsxs)("div",{className:"report-modal",children:[!Z.tq&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(T.zx,{theme:"link",variant:"report-modal__back",width:"fit-content",onClick:function(){return i(!1)},children:o("report.back")}),(0,r.jsx)(gn.Heading1,{variant:"medium",children:null===n||void 0===n?void 0:n.initialModalTitle}),(0,r.jsx)("div",{className:"report-modal__content",children:(0,r.jsxs)(gn.CardSelect.Group,{onChange:function(e){return l(e.target.value)},children:[(0,r.jsx)(gn.CardSelect.Option,{id:"option1",name:"dish",title:null===n||void 0===n?void 0:n.inappropriateContentMainTitle,description:null===n||void 0===n?void 0:n.inappropriateContentModalSubtitle,value:"INAPPROPRIATE_CONTENT",mb:32}),(0,r.jsx)(gn.CardSelect.Option,{id:"option2",name:"dish",title:null===n||void 0===n?void 0:n.forbiddenItemsTitle,description:null===n||void 0===n?void 0:n.forbiddenItemsModalSubtitle,value:"FORBIDDEN_ITEMS"})]})}),(0,r.jsx)("div",{className:"report-modal__confirm",children:(0,r.jsx)(T.zx,{onClick:function(){return i(s)},children:o("report.confirm")})})]}),Z.tq&&(0,r.jsxs)(r.Fragment,{children:[!s&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(gn.Heading3,{variant:"small",children:null===n||void 0===n?void 0:n.initialModalTitle}),(0,r.jsx)("div",{className:"report-modal__content",children:(0,r.jsxs)(gn.List,{children:[(0,r.jsx)(gn.List.Item,{onClick:function(){return l("INAPPROPRIATE_CONTENT")},children:(0,r.jsxs)(gn.Flex,{alignItems:"center",justifyContent:"space-between",children:[(0,r.jsxs)(gn.Flex,{flexDirection:"column",children:[(0,r.jsxs)(gn.Text,{variant:"medium",children:[" ",null===n||void 0===n?void 0:n.inappropriateContentMainTitle]}),(0,r.jsxs)(gn.Text,{variant:"small",children:[" ",null===n||void 0===n?void 0:n.inappropriateContentSubtitle]})]}),(0,r.jsx)(yn.ChevronRight,{})]})}),(0,r.jsx)(gn.List.Item,{onClick:function(){return l("FORBIDDEN_ITEMS")},children:(0,r.jsxs)(gn.Flex,{alignItems:"center",justifyContent:"space-between",children:[(0,r.jsxs)(gn.Flex,{flexDirection:"column",children:[(0,r.jsxs)(gn.Text,{variant:"medium",children:[" ",null===n||void 0===n?void 0:n.forbiddenItemsTitle]}),(0,r.jsxs)(gn.Text,{variant:"small",children:[" ",null===n||void 0===n?void 0:n.forbiddenItemsSubtitle]})]}),(0,r.jsx)(yn.ChevronRight,{})]})})]})}),(0,r.jsx)(T.zx,{theme:"tertiary",mt:32,mb:8,fullWidth:!0,onClick:function(){return i(!1)},children:o("report.cancel")})]}),s&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(gn.Heading3,{variant:"small",children:"INAPPROPRIATE_CONTENT"===s?null===n||void 0===n?void 0:n.inappropriateContentModalTitle:null===n||void 0===n?void 0:n.forbiddenItemsModalTitle}),(0,r.jsx)(gn.Text,{variant:"regular",children:"INAPPROPRIATE_CONTENT"===s?null===n||void 0===n?void 0:n.inappropriateContentModalSubtitle:null===n||void 0===n?void 0:n.forbiddenItemsModalSubtitle}),(0,r.jsxs)("div",{className:"report-modal__confirm",children:[(0,r.jsx)(T.zx,{fullWidth:!0,onClick:function(){return i(s)},children:o("report.confirm")}),(0,r.jsx)(T.zx,{theme:"tertiary",fullWidth:!0,onClick:function(){return l(void 0)},children:o("report.back")})]})]})]})]})})}jn.propTypes={isOpen:k().bool.isRequired,details:k().object.isRequired,onRequestClose:k().func.isRequired};var xn=n(45717);function Cn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var _n=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"reportItem",value:function(e,t,n){return xn.Z.post("v1/merchant-info/".concat(e,"/item/").concat(t,"/report"),{report_reason:n})}}],(n=null)&&Cn(t.prototype,n),r&&Cn(t,r),e}(),On=n(28511);function kn(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void n(c)}s.done?t(l):Promise.resolve(l).then(r,i)}function Sn(){var e=(0,i.I0)(),t=(0,j.useState)(!1),n=t[0],r=t[1],o=(0,Ce.$)("merchant").t,a=(0,j.useCallback)(function(){var t,i=(t=_().mark((function t(i,a,s){return _().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=2;break}return t.abrupt("return");case 2:return r(!0),t.prev=3,t.next=6,_n.reportItem(i,a,s);case 6:e((0,On.PJ)({message:o("report.success"),toastType:"success"})),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(3),e((0,On.PJ)({message:o("report.error")}));case 12:return t.prev=12,r(!1),t.finish(12);case 15:case"end":return t.stop()}}),t,null,[[3,9,12,15]])})),function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(e){kn(o,r,i,a,s,"next",e)}function s(e){kn(o,r,i,a,s,"throw",e)}a(void 0)}))});return function(e,t,n){return i.apply(this,arguments)}}(),[e,n,o]);return{handleReportItem:a,isLoading:n}}var Pn=n(68877),In=n(5152),Rn=n(39368),wn=(n(19339),(0,In.default)((function(){return n.e(1083).then(n.bind(n,21083))}),{loadableGenerated:{webpack:function(){return[21083]}},ssr:!1})),Nn=(0,In.default)((function(){return n.e(5711).then(n.bind(n,25711))}),{loadableGenerated:{webpack:function(){return[25711]}},ssr:!1}),Tn={handleClose:k().func.isRequired,dishTitle:k().string};function An(e){var t=e.handleClose,n=e.dishTitle,i=(0,Ce.$)().t;return(0,r.jsx)("div",{className:"dish-modal__header",children:(0,r.jsx)(Rn.$T,{title:n,theme:"primary",rightIcon:(0,r.jsx)(Nn,{}),rightAriaLabel:i("common:close"),onClickRightButton:t,leftSlot:(0,r.jsx)(T.Ei,{onClick:t,ariaLabel:i("common:close"),icon:(0,r.jsx)(wn,{}),transparent:!0,variant:R()("dish-modal__header-back-button")})})})}An.propTypes=Tn,An.defaultProps={dishTitle:""};n(85410);function En(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void n(c)}s.done?t(l):Promise.resolve(l).then(r,i)}function qn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Mn={setDishState:N.yC,unsetMerchandiseDetails:bn.M3},Zn=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){qn(e,t,n[t])}))}return e}({},z.Z,{actions:(0,w.Z)(Object.keys(Mn),k().func.isRequired).isRequired,restaurant:k().object,restaurantSlug:k().object,checkoutId:k().string,isOpen:k().bool,dish:k().object,isLoading:k().bool.isRequired,hasError:k().bool.isRequired}),Dn=function(e){var t=e.restaurant,n=e.checkoutId,i=e.restaurantSlug,o=e.isOpen,a=e.actions,s=e.dish,l=e.isLoading,c=e.hasError,u=function(){a.setDishState({isOpen:!1,pushBack:!0})},d=t.details,f=!l&&vn(t.details),p=(0,j.useState)(),h=p[0],m=p[1],v=(0,j.useState)(!1),b=v[0],g=v[1],y=Sn().handleReportItem;(0,j.useEffect)((function(){var e;(e=_().mark((function e(){var t;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Pn.ZP.itemReportReasonsDetails();case 2:t=e.sent,m(t);case 4:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){En(o,r,i,a,s,"next",e)}function s(e){En(o,r,i,a,s,"throw",e)}a(void 0)}))})()}),[]),(0,j.useEffect)((function(){!l&&!c&&o&&(null===s||void 0===s?void 0:s.description)&&d&&Gt.Z.viewItem(s,d)}),[l,c,o,s,d]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(jn,{isOpen:b,details:h,onRequestClose:function(e){g(!1),e&&y(t.uuid,s.id,e)}}),(0,r.jsx)(T.u_,{overlayClassName:"dish-modal__overlay",variant:R()("dish-modal",{"dish-modal--loading":l}),closeTimeoutMS:0,isOpen:o,onRequestClose:u,type:"fullpage",animation:"bottom",theme:"white",scrollLock:!1,children:l?(0,r.jsx)(T.$j,{className:"dish-modal__spinner",center:!0}):(0,r.jsx)(mn,{restaurantSlug:i,restaurant:t,dish:s,checkoutId:n,isLoop:f,closeComponent:(0,r.jsx)(An,{handleClose:u,dishTitle:null===s||void 0===s?void 0:s.description}),hasError:c,showButtonReport:null===h||void 0===h?void 0:h.enabled,openReportModal:function(){g(!0)}})})]})};Dn.propTypes=Zn,Dn.defaultProps={restaurant:{isLoading:null,menu:[]},restaurantSlug:{},checkoutId:null,isOpen:!1,dish:{code:null,description:null,details:null,needChoices:!1,choices:[],unitPrice:0,unitMinPrice:0,unitOriginalPrice:0,order:0,availability:null,posCode:null,enabled:!1,logoUrl:null,tags:[]}};var Ln=(0,H.Z)(Dn,[(0,S.Z)("restaurant"),(0,i.$j)(null,(function(e){return{actions:(0,P.DE)(Mn,e)}})),j.memo]),Fn=n(9008),Bn=n(45291),Gn=n(35432),Un=n.n(Gn),Hn=n(88460),zn=n(94774);n(84099);function $n(e){var t=e.product,n=e.isPromotion,o=(0,j.useMemo)((function(){return(0,zn.VA)(t.code)}),[t.code]),a=(0,i.v9)(o),s=(0,Jt.H0)(t)?t.scalePrices[0]:null;return s&&s.minQuantity<=a?(0,r.jsxs)("div",{className:"product-detail-header-price__scale",children:[(0,U.xG)(s.promotionalPrice||s.price),(0,r.jsx)("span",{className:"product-detail-header-price__scale--original",children:(0,U.xG)(t.unitPrice)})]}):(0,r.jsx)(It,{isPromotion:n,dish:t})}n(65770);function Vn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Wn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Vn(e,t,n[t])}))}return e}function Qn(e){var t,n=e.product,o=e.merchantSlug,a=e.catalogName,s=e.aisleCode,l=e.handleClose,c=e.isSticky,u=e.isPromotion,d=e.actionComponent,f=e.isPage,p=e.showButtonReport,h=e.openReportModal,m=(0,Ce.$)("merchant").t,v=(0,i.I0)(),b=Boolean(n.code);return(0,r.jsxs)(r.Fragment,{children:[!f&&(0,r.jsx)("div",{className:"product-detail-header--cover"}),(0,r.jsxs)("div",{className:R()("product-detail-header",{"product-detail-header--empty":!b,"product-detail-header--sticky":c}),"data-test-id":"product-detail-header",children:[(0,r.jsxs)(T.zP,{max:"desktop-s",children:[(0,r.jsx)(Rn.$T,{title:"",theme:"transparent",leftIcon:"arrow-down-thin",leftAriaLabel:m("modal-info.nav-header-aria-left-label"),onClickLeftButton:l,fixed:!0}),c&&(0,r.jsx)(Rn.$T,{title:n.description,subtitle:b&&(0,r.jsx)(It,{dish:n,isPromotion:u}),theme:"primary",leftIcon:"arrow-down-thin",leftAriaLabel:m("modal-info.nav-header-aria-left-label"),onClickLeftButton:l,fixed:!0})]}),(0,r.jsxs)(T.zP,{min:"desktop-s",children:[b&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(gn.Flex,{justifyContent:"space-between",alignItems:"center",width:"100%",children:[(0,r.jsxs)(T.Oo,{separator:(0,r.jsx)("span",{className:"breadcrumbs-container__separator",children:"/"}),children:[(0,r.jsx)(D.Link,{route:ve.ROUTE_RESTAURANT_HOME,params:o,children:(0,r.jsx)("a",{children:m("breadcrumbs.merchant")})}),Boolean(a)&&(0,r.jsx)("a",{onClick:function(){l(),v((0,Hn.s5)({code:s}))},className:"breadcrumbs__label--link",children:a}),Boolean(n.parentTaxonomyName)&&(0,r.jsx)(D.Link,{route:ve.ROUTE_RESTAURANT_HOME,params:Wn({},o,(t={},Vn(t,Xt.xG,s),Vn(t,Xt._H,n.parentTaxonomyName),t)),children:(0,r.jsx)("a",{children:n.parentTaxonomyName})})]}),p&&(0,r.jsx)(T.zx,{theme:"link",variant:"report-button",onClick:h,children:m("report.button")})]}),c&&(0,r.jsxs)("div",{className:R()("product-detail-header__grid",{"product-detail-header__grid--visible":c}),children:[(0,r.jsx)("div",{className:"product-detail-header__image-container",children:(0,r.jsx)("img",{src:(0,ke.QW)(Se.el.DISH,n.logoUrl,Se.zf.LOW),alt:n.description,className:"marmita-image--responsive product-detail-header__image"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)(Un(),{tagName:"p",className:"product-detail-header__description",clamp:1,useNativeClamp:!0,children:n.description}),(0,r.jsxs)("div",{className:"product-detail-header__details-grid",children:[(0,r.jsx)($n,{product:n,isPromotion:u}),(0,r.jsx)("div",{className:"product-detail-header__details",children:n.details})]})]}),j.cloneElement(d,{hideOnClosed:!0})]})]}),!f&&(0,r.jsx)("div",{className:"product-detail-header__close-button",children:(0,r.jsx)(T.Ei,{ariaLabel:m("modal-info.nav-header-aria-left-label"),icon:"close",onClick:l,size:"l",transparent:!0})})]})]})]})}Qn.propTypes={product:k().object.isRequired,merchantSlug:k().object.isRequired,catalogName:k().string,aisleCode:k().string,handleClose:k().func.isRequired,isSticky:k().bool.isRequired,isPromotion:k().bool.isRequired,actionComponent:k().element,isPage:k().bool,showButtonReport:k().bool.isRequired,openReportModal:k().func.isRequired},Qn.defaultProps={catalogName:"",aisleCode:"",actionComponent:null,isPage:!1};var Jn=n(98547),Yn=n(20640),Kn=n.n(Yn),Xn=n(28823),er=n(40915),tr=n(41266),nr=n(52989),rr=n(78370),ir=(n(84549),(0,In.default)((function(){return n.e(6658).then(n.bind(n,26658))}),{loadableGenerated:{webpack:function(){return[26658]}},ssr:!1}));function or(){var e=(0,rr.Z)(),t=(0,Ce.$)(["groceries"]).t;return e?(0,r.jsxs)("div",{className:"product-detail-low-stock-alert",role:"alert",children:[(0,r.jsx)(ir,{className:"product-detail-low-stock-alert__warning-icon"}),(0,r.jsx)("p",{className:"product-detail-low-stock-alert__text",children:t("groceries:low-stock-item.warning")})]}):null}var ar=n(63390);n(70560);function sr(e){return(0,j.useMemo)((function(){return e.needChoices?function(e){var t,n;return null!==(n=null===(t=e.choices)||void 0===t?void 0:t.map((function(e){return 1===e.garnishItens.length?{id:e.garnishItens[0].id,quantity:e.max,name:e.garnishItens[0].description}:null})).filter((function(e){return Boolean(e)})))&&void 0!==n?n:[]}(e):[]}),[e])}n(61875);function lr(e){return(0,r.jsxs)("div",{className:"product-detail-info-product-item",children:[(0,r.jsx)("span",{className:"product-detail-info-product-item__quantity",children:e.quantity}),(0,r.jsx)("span",{className:"product-detail-info-product-item__name",children:e.name})]})}n(20323);function cr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ur(e){var t=(0,Ce.$)("groceries").t;return(0,r.jsxs)("div",{className:"product-detail-product-list-content",children:[(0,r.jsx)("h3",{className:"product-detail-product-list-content__title",children:t("items")}),e.products.map((function(e){return(0,r.jsx)(lr,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){cr(e,t,n[t])}))}return e}({},e),e.id)}))]})}function dr(e){var t=sr(e.catalogItem);return t.length?(0,r.jsx)(ur,{products:t}):null}var fr=n(2631),pr=n(12615);function hr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function mr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(l){s=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return hr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return hr(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var vr=function(e){return function(t){return function(e){return e.intersectionRatio}(t)>=e}};n(70637);function br(e){var t=e.text,n=e.itemName,i=e.itemCode,o=e.itemId,a=e.merchantId,s=(0,Ce.$)("product-detail").t,l=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=mr((0,pr.Z)((0,j.useMemo)((function(){return vr(t)}),[t]),!1),3),i=r[0],o=r[1],a=r[2];return(0,j.useEffect)((function(){o&&(e(),n&&a.stop())}),[e,a,n,t,o]),(0,j.useEffect)((function(){n||a.start()}),[a,n]),i}((0,j.useCallback)((function(){Pn.ZP.clickViewMoreItemDetail({itemName:n,itemCode:i,itemId:o,merchantId:a})}),[i,o,n,a]),.5,!0);return(0,r.jsxs)("section",{ref:l,className:"product-detail-long-description",children:[(0,r.jsx)("h3",{className:"product-detail-long-description__title",children:s("long-description.title")}),(0,r.jsx)("p",{className:"product-detail-long-description__text",children:t})]})}var gr=n(86213),yr=n(53773);function jr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function xr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(l){s=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return jr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return jr(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Cr=function(e){return xr((0,yr.N)(e),2)[1]>40};function _r(e){var t=e.text,n=e.itemName,i=e.itemCode,o=e.itemId,a=e.merchantId,s=(0,Ce.$)(["product-detail","see-more"]).t,l=xr((0,gr.Z)(Cr),3),c=l[0],u=l[1],d=l[2],f=(0,j.useState)(!1),p=f[0],h=f[1];(0,j.useEffect)((function(){void 0!==u&&(d.stop(),h((function(e){return!(e||!u)||e})))}),[d,u]);var m=(0,j.useCallback)((function(){return h((function(e){return!(e||!u)&&(Pn.ZP.clickViewMoreItemDetail({itemName:n,itemCode:i,itemId:o,merchantId:a}),!0)}))}),[u,i,o,n,a]);return(0,r.jsxs)("section",{className:"product-detail-long-description",onClick:m,title:s(p?"see-more:message.see-more":"see-more:message.see-less"),style:{"--see-more":"' ".concat(s("see-more:message.see-more"),"'")},children:[(0,r.jsx)("h3",{className:"product-detail-long-description__title",children:s("long-description.title")}),(0,r.jsxs)("p",{ref:c,className:R()("product-detail-long-description__text",{"product-detail-long-description__text--collapsed":p}),children:[t,(0,r.jsx)("span",{})]})]})}function Or(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function kr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Or(e,t,n[t])}))}return e}function Sr(e){return(0,fr.Z)()?(0,r.jsx)(br,kr({},e)):(0,r.jsx)(_r,kr({},e))}function Pr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ir(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Rr(e){var t=e.text,n=Ir(e,["text"]);return t?(0,r.jsx)(Sr,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Pr(e,t,n[t])}))}return e}({text:t},n)):null}var wr=n(91064);n(99749);function Nr(e){var t=e.scalePrice,n=e.promotionalScalePrice,i=e.unitPrice,o=e.promotionalPrice,a=e.minQuantity,s=e.isScalePriceActive,l=(0,Ce.$)("merchandise").t,c=o&&o<i,u=Math.round(100*(o/i-1));return(0,r.jsx)("div",{className:"product-detail-scale-price",children:(0,r.jsxs)("div",{className:"product-detail-scale-price__content",children:[(0,r.jsxs)("div",{className:"product-detail-scale-price__scale",children:[(0,r.jsx)("p",{className:"product-detail-scale-price__price product-detail-scale-price__price--scale",children:(0,U.xG)(n||t)}),(0,r.jsx)(wr.Z,{children:l("scale-price.tag",{minQuantity:a})})]}),(0,r.jsxs)("div",{className:"product-detail-scale-price__original",children:[(0,r.jsxs)("div",{className:R()({"product-detail-scale-price__original-wrapper--inline":c}),children:[(0,r.jsx)("p",{className:R()("product-detail-scale-price__price product-detail-scale-price__price--original",{"product-detail-scale-price__price--disabled":s}),children:(0,U.xG)(c?o:i)}),(0,r.jsx)("small",{className:R()("product-detail-scale-price__original-info",{"product-detail-scale-price__original-info--disabled":s}),children:l(c?"scale-price.unit":"scale-price.unit-price")})]}),c&&(0,r.jsxs)("div",{className:"product-detail-scale-price__discount",children:[(0,r.jsx)("p",{className:R()("product-detail-scale-price__discount-tag",{"product-detail-scale-price__discount-tag--disabled":s}),children:"".concat(u,"%")}),(0,r.jsx)("p",{className:R()("product-detail-scale-price__discount-price",{"product-detail-scale-price__discount-price--disabled":s}),children:(0,U.xG)(i)})]})]})]})})}n(54322);var Tr=(0,In.default)((function(){return n.e(9233).then(n.bind(n,99233))}),{loadableGenerated:{webpack:function(){return[99233]}},ssr:!1});function Ar(){var e=(0,Ce.$)("merchandise").t;return(0,r.jsxs)("div",{className:"product-detail-scale-price-info",children:[(0,r.jsx)(Tr,{}),(0,r.jsx)("p",{className:"product-detail-scale-price-info__text",children:e("scale-price.info")})]})}function Er(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function qr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Er(e,t,n[t])}))}return e}function Mr(e){var t,n=e.merchant,o=e.product,a=e.isPromotion,s=e.setDetailContentElement,l=e.actionComponent,c=e.isWeighableItem,u=e.hasProductDiscountTag,d=e.productDiscountTagData,f=e.isClosed,p=e.isPage,h=(0,Ce.$)(["groceries","common"]).t,m=(0,j.useState)(),v=m[0],b=m[1],g=(0,ar.Z)(o),y=!f&&g,x=(0,St.U)(qr({},o,{isPromotion:a})).price,C=(0,tr.Nm)(o,x),_=(0,Jt.H0)(o)?o.scalePrices[0]:null,O=o.unitPrice,k=o.unitMinPrice,S=o.unitOriginalPrice,P=o.scalePrices,I=o.promotionalPrice,w=o.minimumPromotionalPrice,N=(0,j.useCallback)((function(){var e=(0,ke.iO)(window,Xt.xG),t=window.location.host,n="".concat(t).concat(e);Kn()(n),b(!0)}),[]),A=(0,j.useMemo)((function(){return(0,zn.VA)(o.code)}),[o.code]),E=(0,i.v9)(A);return(0,r.jsxs)("section",{className:R()("product-detail",{"product-detail--page":p}),"data-test-id":"product-detail",children:[(0,r.jsxs)("div",{className:"product-detail__image-container",children:[Boolean(o.logoUrl)&&(0,r.jsx)("img",{src:(0,ke.QW)(Se.el.DISH,o.logoUrl,Se.zf.HIGHT),alt:o.description,className:"product-detail__image"}),(0,r.jsx)("div",{className:"product-detail__image--overlay"})]}),(0,r.jsxs)("div",{className:"product-detail__info",children:[(0,r.jsx)("div",{className:"product-detail__description",children:o.description}),(0,r.jsx)("div",{children:u&&(0,r.jsx)(nr.Z,qr({},d))}),(0,r.jsx)(Xn.Z,{min:"desktop-s",children:(0,r.jsx)(Rr,{text:(null===o||void 0===o?void 0:o.additionalInfo)||(null===o||void 0===o?void 0:o.details),itemName:o.description,itemCode:o.code,itemId:o.id,merchantId:null===n||void 0===n?void 0:n.uuid})}),(0,r.jsx)("div",{className:"product-detail__price",children:_?(0,r.jsx)(Nr,{unitPrice:o.unitPrice,promotionalPrice:o.promotionalPrice,scalePrice:_.price,promotionalScalePrice:_.promotionalPrice,minQuantity:_.minQuantity,isScalePriceActive:E>=_.minQuantity}):(0,r.jsx)(er.Z,{unitPrice:O,unitMinPrice:k,unitOriginalPrice:S,scalePrices:P,promotionalPrice:I,minimumPromotionalPrice:w,isPromotion:a})}),Boolean(null===(t=o.productTags)||void 0===t?void 0:t.length)&&(0,r.jsx)(_t.Z,{tags:o.productTags}),c&&(0,r.jsxs)("div",{className:"product-detail__weighable",children:[(0,r.jsx)("span",{children:h("groceries:weighable-item.kilo-price")}),(0,r.jsx)("span",{className:"product-detail__weighable--value",children:(0,U.xG)(C)}),(0,r.jsx)("span",{children:h("groceries:weighable-item.estimated-weight")}),(0,r.jsx)("span",{className:"product-detail__weighable--value",children:"".concat(o.sellingOption.incremental,"g")})]}),(0,r.jsx)(dr,{catalogItem:o}),_&&(0,r.jsx)(Ar,{}),(0,r.jsx)("div",{className:"product-detail__divider"}),c&&(0,r.jsxs)("div",{className:"product-detail__warning",children:[(0,r.jsx)(Jn.Q,{src:"/static/images/icons/weighable-item-warning.svg"}),h("weighable-item.warning")]}),y&&(0,r.jsx)(or,{}),(0,r.jsx)("div",{ref:s,children:l})]}),(0,r.jsx)("div",{className:"product-detail__floating-actions",children:(0,r.jsx)(T.u,{variant:R()({"product-detail__tooltip--success":v},"product-detail__tooltip"),content:h(v?"common:copied-link":"common:share"),direction:"bottom",onMouseLeave:function(){return b(!1)},children:(0,r.jsx)(T.Ei,{icon:"share",color:"white",variant:"product-detail__button-share",ariaLabel:h("common:share"),onClick:N})})})]})}Mr.propTypes={merchant:k().object.isRequired,product:k().object.isRequired,isPromotion:k().bool.isRequired,setDetailContentElement:k().func.isRequired,actionComponent:k().element.isRequired,isWeighableItem:k().bool.isRequired,hasProductDiscountTag:k().bool.isRequired,productDiscountTagData:k().object,isClosed:k().bool.isRequired,isPage:k().bool},Mr.defaultProps={productDiscountTagData:null,isPage:!1};var Zr=n(69729),Dr=n(80668),Lr=n(41609),Fr=n.n(Lr),Br=n(63249),Gr=n(86843),Ur=n(93244),Hr=n(94639),zr=n(9818);function $r(e){var t;if(!(null===(t=e.choices)||void 0===t?void 0:t.length))return[];var n=e.choices.map(Vr);return M()(n,["parentOrder","itemOrder"])}function Vr(e){return{amount:e.max,name:e.garnishItens[0].description,unitPrice:e.garnishItens[0].unitPrice,code:e.garnishItens[0].code,parentCode:e.code,parentOrder:e.order,itemOrder:0}}function Wr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Qr(e){var t,n;return(null===(t=e.choices)||void 0===t?void 0:t.length)?null===(n=e.choices)||void 0===n?void 0:n.reduce(Jr,{}):{}}function Jr(e,t){var n;return(null===(n=t.garnishItens)||void 0===n?void 0:n.length)?function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Wr(e,t,n[t])}))}return e}({},e,Wr({},"".concat(t.code,"-").concat(t.garnishItens[0].id),t.max)):e}function Yr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Kr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Yr(e,t,n[t])}))}return e}n(73468);function Xr(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void n(c)}s.done?t(l):Promise.resolve(l).then(r,i)}function ei(e){var t,n,o,a,s,l,u,d,f,p,h=e.merchant,m=e.product,v=e.merchantSlug,b=e.isPromotion,g=e.isWeighableItem,y=e.hideOnClosed,x=e.merchantIsClosed,C=e.aisleCode,O=(0,Ce.$)(["address","merchant"]).t,k=(0,i.I0)(),S=(0,i.v9)((function(e){return e.checkout})),P=(0,i.v9)((function(e){return e.address})),I=(0,i.v9)((function(e){var t=e.promotion;return null===t||void 0===t?void 0:t.violation})),R=(0,j.useState)(!1),w=R[0],N=R[1],A=(0,j.useState)(!1),q=A[0],M=A[1],Z=(0,j.useState)(0),D=Z[0],F=Z[1],B=(0,j.useState)(!1),G=B[0],U=B[1],H=(0,j.useState)(void 0),z=H[0],$=H[1],V=S[S.currentRestaurant],W=null!==(l=null===V||void 0===V?void 0:V.items)&&void 0!==l?l:{},Q=Object.keys(W).reduce((function(e,t){var n,r;return e+(null!==(r=null===(n=W[t])||void 0===n?void 0:n.qty)&&void 0!==r?r:0)}),0),J=Q,Y=(null!==(u=null===V||void 0===V||null===(t=V.restaurant)||void 0===t||null===(n=t.details)||void 0===n?void 0:n.configs)&&void 0!==u?u:{}).maxItemsPerOrder,K=J>=parseInt(Y,10),X=Object.keys(W).filter((function(e){return m.code===W[e].code}))||[0],ee=null!==(f=X.reduce((function(e,t){var n;return e+(null!==(d=null===(n=W[t])||void 0===n?void 0:n.qty)&&void 0!==d?d:0)}),0))&&void 0!==f?f:1,te=ee,ne=X[X.length-1],re=null!==(p=null===(o=W[ne])||void 0===o?void 0:o.qty)&&void 0!==p?p:1,ie=S.currentRestaurant&&S.currentRestaurant===h.uuid,oe=(0,Zt.Z)([E()(h,"details.address.district"),E()(h,"details.address.city"),E()(h,"details.address.state")].filter(Boolean)," - "),ae=function(e){var t=e.checkoutId,n=e.merchant,r=e.merchantSlug,o=e.product,a=e.isPromotion,s=e.aisleCode,l=e.sendLowStockInfo,u=e.drugstorePrescriptionConfig,d=(0,ar.Z)(o),f=(0,i.I0)(),p=(0,i.oR)(),h=(0,j.useMemo)((function(){return[$r(o),Qr(o)]}),[o]),m=h[0],v=h[1],b=(0,j.useCallback)((function(){var e=(0,zr.Tu)(n.deliveryMethods,!0);f((0,L.fn)({isTakeOut:!0,restaurantId:n.uuid})),f((0,L.us)({deliveryMethod:e,restaurantId:n.uuid})),f((0,Ht.wd)(e,n.uuid))}),[f,n.deliveryMethods,n.uuid]),g=(0,j.useCallback)((function(e){var i,h=p.getState(),g=(0,zn.op)(h),y=null!==(i=null===g||void 0===g?void 0:g.items)&&void 0!==i?i:{},j=(0,c.X)(h);if(Fr()(g)){var x,C,_,O,k,S,P,I=(0,Gr.Je)(h),R=Kr({},I,{scheduled:null===(x=n.scheduling)||void 0===x?void 0:x.scheduled});f((0,Ht.wd)(R,n.uuid)),f((0,L.x0)({restaurantId:n.uuid,name:n.details.name,restaurantSlug:r,details:n.details,isDocumentRequired:n.details.isDocumentRequired,charging:n.details.charging,deliveryMethods:n.deliveryMethods,scheduling:{deliveryDate:null!==(k=null===g||void 0===g?void 0:g.deliveryDate)&&void 0!==k?k:null===(C=n.scheduling)||void 0===C?void 0:C.deliveryDate,scheduled:null!==(S=null===g||void 0===g?void 0:g.scheduled)&&void 0!==S?S:null===(_=n.scheduling)||void 0===_?void 0:_.scheduled,isTakeOut:null!==(P=null===g||void 0===g?void 0:g.isTakeOut)&&void 0!==P?P:null===(O=n.scheduling)||void 0===O?void 0:O.isTakeOut,deliveryMethod:I}}))}if(g&&y[t]){if(!(e>=1))return void f((0,L.aX)({checkoutId:t,restaurantId:g.restaurant.restaurantId}));var w=y[t].obs,N=o.productTags;(0,Jt.g4)({tags:N,group:Hr.UI.SALES_REQUIREMENTS,tag:Hr.ab.MEDICAL_PRESCRIPTION})&&u&&b(),f((0,L.sG)({qty:e,obs:w||"",garnish:m,garnishForm:v,checkoutId:t,restaurantId:g.restaurant.restaurantId,id:o.id,choices:o.choices}))}else{var T,A,E,q=Kr({},o,{menuCode:s,qty:e,obs:"",restaurantId:n.uuid,garnish:m,garnishForm:v,category:(0,$t.n)(null===n||void 0===n||null===(T=n.details)||void 0===T?void 0:T.type,null===n||void 0===n||null===(A=n.details)||void 0===A||null===(E=A.mainCategory)||void 0===E?void 0:E.code),scalePrices:(0,Jt.Ru)({unitPrice:o.unitPrice,promotionalPrice:o.promotionalPrice,scalePrices:o.scalePrices}),isLowStock:d}),M=o.productTags;(0,Jt.g4)({tags:M,group:Hr.UI.SALES_REQUIREMENTS,tag:Hr.ab.MEDICAL_PRESCRIPTION})&&u&&b(),f((0,L.J6)(q))}var Z=(0,ke.Qw)(window);Pn.ZP.trackClickAddItem(Ur.ZP.clickAddItemFormatter({dish:o,restaurant:n,checkout:{qty:e},isPromotion:a,routerStates:(0,Br.I_)(h),sendLowStockInfo:Boolean(l),isLowStock:d,originArea:Z.get("originArea"),aisleName:j,taxonomy:Z.get(Xt._H)}))}),[p,t,o,n,a,l,d,f,r,m,v,u,b,s]);return(0,j.useMemo)((function(){return{onChangeItemQuantity:g}}),[g])}({checkoutId:ne,merchant:h,merchantSlug:v,product:m,isPromotion:b,aisleCode:C,sendLowStockInfo:!0,drugstorePrescriptionConfig:z}).onChangeItemQuantity;(0,j.useEffect)((function(){var e;(e=_().mark((function e(){var t;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Pn.ZP.drugstorePrescriptionCheckoutTest();case 2:t=e.sent,$(null===t||void 0===t?void 0:t.enabled);case 4:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){Xr(o,r,i,a,s,"next",e)}function s(e){Xr(o,r,i,a,s,"throw",e)}a(void 0)}))})()}),[]),(0,j.useEffect)((function(){N(Boolean(ne))}),[ne]),(0,j.useEffect)((function(){var e,t=null===(e=h.deliveryInfo)||void 0===e?void 0:e.deliversAtLocation;null!==t&&M(!t)}),[null===(a=h.deliveryInfo)||void 0===a?void 0:a.deliversAtLocation]),(0,j.useEffect)((function(){var e;(null===I||void 0===I||null===(e=I.violationCodes)||void 0===e?void 0:e.includes(null===Dr.md||void 0===Dr.md?void 0:Dr.md.TagItemStockViolation))&&(null===I||void 0===I||I.restaurantOrder.flatMap((function(e){return null===e||void 0===e?void 0:e.itens})).forEach((function(e){var t,n;(null===e||void 0===e?void 0:e.code)===(null===m||void 0===m?void 0:m.code)&&(null===e||void 0===e||null===(t=e.stock)||void 0===t?void 0:t.isStockDivergent)&&(F(null===e||void 0===e||null===(n=e.stock)||void 0===n?void 0:n.qty),U(!0),Pn.ZP.groceriesStockCheckoutError({stockListDiff:JSON.stringify(e),frnUuid:ne}))})))}),[I,m,ne]),(0,j.useEffect)((function(){G&&ae(D)}),[D,ae,G]);var se=(0,j.useMemo)((function(){var e=P.location,t=e.district,n=e.address,r=e.geoLocated,i=e.streetNumber;return r?O("address:geo.next-to",{district:t||n}):(0,Zt.Z)([n,i])}),[P.location,O]),le=(0,j.useMemo)((function(){var e=h.details.nextOpeningHour,t=void 0===e?{}:e,n=(0,Dt.ex)(t.openingTime);return(0,Dt.iL)(t.openingTime)?O("merchant:closed.opening",{openingHour:n}):O("merchant:closed.title")}),[h,O]),ce=(0,j.useCallback)((function(){E()(h,"deliveryInfo.deliversAtLocation",!1)?!ie&&J>0?k((0,Zr.n)({isOpen:!0,newCart:{restaurant:h,restaurantSlug:v,dish:m}})):(N(!0),ae(1)):M(!0)}),[k,ie,J,h,v,ae,m]),ue=(0,j.useMemo)((function(){var e;if(!g)return String(te);var t=te*(null===m||void 0===m||null===(e=m.sellingOption)||void 0===e?void 0:e.minimum);if(t<1e3)return"".concat(t,"g");var n=(t/1e3).toFixed(2).replace(".",",");return"".concat(n,"kg")}),[g,null===m||void 0===m||null===(s=m.sellingOption)||void 0===s?void 0:s.minimum,te]);return x&&y?null:x&&!q?(0,r.jsxs)("div",{className:"product-detail-action",children:[(0,r.jsx)("h3",{className:"product-detail-action__merchant-closed-title",children:le}),(0,r.jsx)("p",{className:"product-detail-action__merchant-closed-message",children:O("merchant:closed.message")})]}):(0,r.jsxs)("div",{className:"product-detail-action",children:[!w&&(0,r.jsx)(T.zx,{fullWidth:!0,onClick:ce,disabled:K&&ie,variant:"product-detail-action__add-button",children:O("merchant:item.add")}),w&&(0,r.jsx)(T.AT,{min:0,onDecrement:function(){return ae(re-1)},onIncrement:function(){return ae(re+1)},disableIncrement:K,startValue:te,controlled:!0,customDescrementIcon:1===te?"remove":void 0,customValue:ue}),(0,r.jsx)(Lt.Z,{isOpen:q,onRequestClose:function(){return M(!1)},deliveryAddress:se,restaurantAddress:oe})]})}ei.propTypes={merchant:k().object.isRequired,product:k().object.isRequired,merchantSlug:k().object.isRequired,isPromotion:k().bool.isRequired,merchantIsClosed:k().bool.isRequired,isWeighableItem:k().bool.isRequired,hideOnClosed:k().bool,aisleCode:k().string.isRequired},ei.defaultProps={hideOnClosed:!1};var ti=n(72612),ni=n(42383),ri=n(25794);function ii(){var e,t=(0,i.v9)(d),n=(0,i.v9)(ni.Qs),r=(0,i.v9)(u.o8,i.wU),o=r.dishId,a=r.menuCode,s=(0,j.useMemo)((function(){return t.details.id?t.details:{id:o}}),[t.details,o]),l=a||(null===s||void 0===s||null===(e=s.category)||void 0===e?void 0:e.code),c=(0,j.useMemo)((function(){return(0,ri.ay)(null===n||void 0===n?void 0:n.menu,l)}),[n.menu,l]);return{product:s,merchant:n,catalogItem:c}}function oi(e){var t,n=e.merchant,o=e.catalogCode,a=e.product,s=e.merchantSlug,l=e.isStickyHeader,c=e.setDetailContentElement,u=e.handleClose,d=e.isPage,p=e.showButtonReport,h=e.openReportModal,m=(0,i.I0)(),v=(0,i.v9)(Wt.Gp),b=(0,i.v9)((0,Wt.PN)(n.uuid)),g=(0,f.p2)(n)&&!(null===n||void 0===n?void 0:n.hasAvailableTimeslots),y=(0,tr.RP)(a),x=ii().catalogItem,C=(0,j.useMemo)((function(){return(0,xt.Yk)(null!==(t=null===a||void 0===a?void 0:a.tags)&&void 0!==t?t:[],v)}),[null===a||void 0===a?void 0:a.tags,v]),_=Boolean(C);(0,j.useEffect)((function(){(null===v||void 0===v?void 0:v.requestStatus)===ti._X&&m((0,Bn.aR)())}),[m,null===v||void 0===v?void 0:v.requestStatus]);var O=(0,j.useMemo)((function(){return(0,r.jsx)(ei,{merchant:n,product:a,merchantSlug:s,isPromotion:b,merchantIsClosed:g,isWeighableItem:y,aisleCode:o})}),[n,a,s,b,g,y,o]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(Qn,{product:a,catalogName:null===x||void 0===x?void 0:x.name,aisleCode:null===x||void 0===x?void 0:x.code,merchantSlug:s,isSticky:l,isPromotion:b,handleClose:u,actionComponent:O,isPage:d,showButtonReport:p,openReportModal:h}),(0,r.jsx)(Mr,{product:a,isPromotion:b,setDetailContentElement:c,merchant:n,actionComponent:O,isWeighableItem:y,hasProductDiscountTag:_,productDiscountTagData:C,isClosed:g,isPage:d})]})}oi.propTypes={merchant:k().object.isRequired,catalogCode:k().string.isRequired,product:k().object.isRequired,merchantSlug:k().object.isRequired,isStickyHeader:k().bool.isRequired,setDetailContentElement:k().func.isRequired,handleClose:k().func.isRequired,isPage:k().bool,showButtonReport:k().bool.isRequired,openReportModal:k().func.isRequired},oi.defaultProps={isPage:!1};var ai=n(60106),si=n(64696),li=n(38848),ci=n(81530),ui=n(49003);n(33971);function di(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function fi(e){var t=e.title,n=e.items,i=e.merchant,o=e.isPromotion,a=e.catalogCode,s=e.canSeeAllItems,l=e.handleClickSeeAllItems,c=e.crossellingType,u=e.description,d=e.fullPage,f=(0,Ce.$)("restaurant").t,p=(0,x.useRouter)(),h=p.asPath,m=p.query,v=ii(),b=v.product,g=v.catalogItem,y=(0,j.useMemo)((function(){return(0,xt.IZ)(i.details)}),[i.details]),C=(0,j.useCallback)((function(e){var t=m[li.zZ]||m[li.e_],n=h.replace(t,e);D.Router.pushRoute(n)}),[h,m]),_=(0,j.useCallback)((function(e){return(0,r.jsx)(ui.Z,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){di(e,t,n[t])}))}return e}({},e,{restaurant:i}))}),[i]);return(0,j.useEffect)((function(){(null===b||void 0===b?void 0:b.description)&&(null===b||void 0===b?void 0:b.id)&&(null===i||void 0===i?void 0:i.uuid)&&(null===g||void 0===g?void 0:g.name)&&Pn.ZP.printCrossSelling({accessPoint:"groceriesDetails",aisleType:c,didSucceed:"success",frnUuid:i.uuid,dishId:b.id,isPromotion:o,itemName:b.description,itemSectionName:g.name})}),[c,i,o,null===b||void 0===b?void 0:b.description,null===b||void 0===b?void 0:b.id,null===g||void 0===g?void 0:g.name]),(0,r.jsxs)("section",{className:R()("product-detail-carousel",{"product-detail-carousel--full-page":d}),children:[(0,r.jsxs)("header",{className:"product-detail-carousel__header",children:[(0,r.jsxs)("div",{className:"product-detail-carousel__header-texts",children:[(0,r.jsx)("h2",{className:"product-detail-carousel__title",children:t}),u&&(0,r.jsx)("p",{className:"product-detail-carousel__description",children:u})]}),s&&n.length>6?(0,r.jsx)(T.zx,{theme:"link",label:f("see-all"),onClick:l}):null]}),(0,r.jsx)(ci.Z,{variant:"product-detail-carousel__wrapper",items:n,grocery:y,isPromotion:o,catalogCode:a,handleProductClick:C,crossellingType:c,actionComponent:_})]})}function pi(e){var t=e.merchant,n=e.isPromotion,o=e.catalogCode,s=e.isPage,l=(0,Ce.$)("groceries").t,c=(0,i.v9)(a);return(0,r.jsx)(fi,{title:l("cross-sell-item.title"),items:c,merchant:t,isPromotion:n,catalogCode:o,crossellingType:"sameAisle",fullPage:s})}fi.propTypes={title:k().string.isRequired,items:k().array.isRequired,merchant:k().object.isRequired,isPromotion:k().bool.isRequired,catalogCode:k().string.isRequired,canSeeAllItems:k().bool,handleClickSeeAllItems:k().func,crossellingType:k().string.isRequired,description:k().string,fullPage:k().bool},fi.defaultProps={canSeeAllItems:!1,handleClickSeeAllItems:function(){},description:"",fullPage:!1},pi.propTypes={merchant:k().object.isRequired,isPromotion:k().bool.isRequired,catalogCode:k().string.isRequired,isPage:k().bool.isRequired};var hi=n(74653),mi=n(50846),vi=function(e){var t;return null===e||void 0===e||null===(t=e.similarItems)||void 0===t?void 0:t.items},bi=function(e){var t;return null===e||void 0===e||null===(t=e.similarItems)||void 0===t?void 0:t.isLoading},gi=function(e){var t=a(e),n=function(e){return o(e).isLoading}(e),r=Boolean(null===t||void 0===t?void 0:t.length);return!n&&r},yi=function(e,t){return function(n){var r=(0,ni.c7)(n),i=(0,ri.ay)(r,t);return(0,Jt.$K)(i,e.id)}},ji=function(e){var t=(0,ni.c7)(e);return(0,ri.Lo)(t)},xi=function(e){var t=ji(e);return Boolean(null===t||void 0===t?void 0:t.length)};n(64901);function Ci(e){var t=e.merchant,n=e.closeModal,o=(0,i.v9)(ji),a=(0,i.I0)(),s=(0,j.useCallback)((function(e){n(),D.Router.events.on("routeChangeComplete",(function t(){a((0,Hn.s5)({code:e})),D.Router.events.off("routeChangeComplete",t)}))}),[a,n]);return(0,r.jsx)("div",{className:"product-detail-catalog-aisles","data-test-id":"product-detail-catalog-aisles",children:(0,r.jsx)(mi.Z,{merchant:t,groups:o,onOpenGroup:s,groupsPerSlideBreakpoints:{1034:8,1148:9,desktop:10}})})}Ci.propTypes={merchant:hi.wC.isRequired,closeModal:k().func.isRequired};n(68783);function _i(e){var t=e.merchant,n=e.product,o=e.isPromotion,a=e.catalogCode,s=e.closeModal,l=e.isPage,c=(0,i.I0)(),u=(0,Ce.$)("groceries").t,d=(0,i.v9)(yi(n,a)),f=(0,j.useCallback)((function(e){s(),D.Router.events.on("routeChangeComplete",(function t(){c((0,Hn.s5)({code:e})),D.Router.events.off("routeChangeComplete",t)}))}),[c,s]),p=(0,j.useCallback)((function(){f(a)}),[f,a]);return(0,r.jsx)("div",{className:"product-detail-aisle",children:(0,r.jsx)(fi,{title:u("aisle-item.title"),items:d,merchant:t,isPromotion:o,catalogCode:a,canSeeAllItems:!0,handleClickSeeAllItems:p,crossellingType:"recommendation",fullPage:l})})}function Oi(e){var t=e.merchant,n=e.isPromotion,o=e.catalogCode,a=e.isPage,s=(0,i.v9)(vi),l=(0,Ce.$)("groceries").t;return(0,r.jsx)(fi,{title:l("similar-items.title"),description:l("similar-items.description"),items:s,merchant:t,isPromotion:n,catalogCode:o,fullPage:a,crossellingType:"relatedItems"})}_i.propTypes={merchant:k().object.isRequired,product:k().object.isRequired,isPromotion:k().bool.isRequired,catalogCode:k().string.isRequired,closeModal:k().func,isPage:k().bool.isRequired},_i.defaultProps={closeModal:function(){}},Oi.propTypes={merchant:k().object.isRequired,isPromotion:k().bool.isRequired,catalogCode:k().string.isRequired,isPage:k().bool.isRequired};var ki=n(68697);function Si(e){var t,n,o,a,s,l=e.merchant,c=e.product,u=e.catalogCode,f=e.merchantSlug,p=e.checkoutId,h=e.isLoading,m=e.hasError,v=e.onClose,b=e.setDetailContentElement,g=e.isStickyHeader,y=e.isPage,x=e.showButtonReport,C=e.openReportModal,_=(0,ar.Z)(c),O=(0,rr.Z)(),k=(0,i.v9)(d),S=(0,i.v9)((0,Wt.PN)(l.uuid)),P=(0,i.v9)(function(e,t){return function(n){var r=(0,ni.c7)(n),i=(0,ni.sZ)(n),o=yi(e,t)(n),a=Boolean(null===r||void 0===r?void 0:r.length),s=Boolean(null===o||void 0===o?void 0:o.length);return!i&&a&&s}}(c,u)),I=(0,i.v9)(gi),w=(0,i.v9)(xi),A=(0,i.v9)(function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return function(t){var n=vi(t),r=bi(t),i=Boolean(null===n||void 0===n?void 0:n.length);return!r&&i&&e}}(_)),E=(0,i.I0)(),q=ii().catalogItem,M=_&&O,L="".concat(c.description,": ").concat(l.details.name," - iFood");(0,j.useEffect)((function(){var e;l.uuid&&c.id&&(null===k||void 0===k||null===(e=k.details)||void 0===e?void 0:e.id)!==c.id&&E((0,bn.gi)({merchantUuid:l.uuid,code:c.id}))}),[l.uuid,c.id,E,null===k||void 0===k||null===(t=k.details)||void 0===t?void 0:t.id]),(0,j.useEffect)((function(){l.uuid&&c.id&&E((0,si.RT)({uuid:l.uuid,itemsUuid:[c.id]}))}),[E,l.uuid,c.id]),(0,j.useEffect)((function(){l.uuid&&c.id&&(null===q||void 0===q?void 0:q.name)&&M&&E((0,ki.E6)({merchantUuid:l.uuid,productUuid:c.id,productCategoryName:q.name}))}),[E,l.uuid,c.id,M,null===q||void 0===q?void 0:q.name]);var F,B,G,U,H=(0,j.useCallback)((function(e){if(e.includes("".concat(li.zZ,"="))){var t=(0,xt.IZ)(l.details);E((0,N.yC)({isOpen:!0,restaurantSlug:f,dishId:(0,tr.JY)(e),menuCode:null===q||void 0===q?void 0:q.code,checkoutId:p,category:t.category}))}}),[p,E,l.details,f,null===q||void 0===q?void 0:q.code]);return(0,j.useEffect)((function(){return D.Router.events.on("routeChangeStart",H),function(){D.Router.events.off("routeChangeStart",H)}}),[H]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(Fn.default,{children:(0,r.jsx)("title",{children:L},"ab")}),!h&&m&&(0,r.jsx)(ai.Z,{}),h&&!m&&(0,r.jsx)(T.$j,{center:!0}),!h&&!m&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(oi,{merchant:l,catalogCode:u,product:c,merchantSlug:f,isStickyHeader:g,isPage:y,setDetailContentElement:b,handleClose:v,showButtonReport:x,openReportModal:C}),(0,r.jsxs)("div",{"data-test-id":"product-detail-modal-cross-sell",className:R()("product-detail-modal__cross-sell",{"product-detail-modal__cross-sell-mobile":Z.tq}),children:[A&&(0,r.jsx)(Oi,{isPromotion:S,catalogCode:u,merchant:l,isPage:y}),I&&(0,r.jsx)(pi,{merchant:l,isPromotion:S,catalogCode:u,isPage:y}),P&&(0,r.jsx)(_i,{merchant:l,product:c,isPromotion:S,catalogCode:u,closeModal:v,isPage:y}),w&&(0,r.jsx)(Ci,{merchant:l,closeModal:v}),(0,r.jsx)(Xn.Z,{max:"desktop-s",children:(0,r.jsx)(Rr,{text:null!==(F=null===c||void 0===c?void 0:c.additionalInfo)&&void 0!==F?F:null===k||void 0===k||null===(n=k.details)||void 0===n?void 0:n.additionalInfo,itemName:null!==(B=null===c||void 0===c?void 0:c.description)&&void 0!==B?B:null===k||void 0===k||null===(o=k.details)||void 0===o?void 0:o.description,itemCode:null!==(G=null===c||void 0===c?void 0:c.code)&&void 0!==G?G:null===k||void 0===k||null===(a=k.details)||void 0===a?void 0:a.code,itemId:null!==(U=null===c||void 0===c?void 0:c.id)&&void 0!==U?U:null===k||void 0===k||null===(s=k.details)||void 0===s?void 0:s.id,merchantId:null===l||void 0===l?void 0:l.uuid})})]})]})]})}Si.propTypes={merchant:k().object.isRequired,product:k().object.isRequired,catalogCode:k().string.isRequired,merchantSlug:k().object.isRequired,checkoutId:k().string,isLoading:k().bool.isRequired,hasError:k().bool.isRequired,onClose:k().func.isRequired,setDetailContentElement:k().func.isRequired,isStickyHeader:k().bool.isRequired,isPage:k().bool,showButtonReport:k().bool.isRequired,openReportModal:k().func.isRequired},Si.defaultProps={checkoutId:"",isPage:!1};var Pi=function(e){return function(e){return function(e){return e.contextCard}(e).checkout}(e).isOpened};n(75102);function Ii(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void n(c)}s.done?t(l):Promise.resolve(l).then(r,i)}function Ri(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function wi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Ri(e,t,n[t])}))}return e}function Ni(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Ti(e){var t=e.isOpen,n=e.isLoading,o=e.hasError,a=e.product,s=e.merchant,l=Ni(e,["isOpen","isLoading","hasError","product","merchant"]),c=(0,i.v9)(u.o8,i.wU),d=(0,i.v9)(zn.R5),f=(0,i.v9)(Pi),p=(0,i.I0)(),h=(0,j.useRef)(),m=(0,j.useState)(),v=m[0],b=m[1],g=(0,j.useState)(!1),y=g[0],x=g[1],C=(0,j.useState)(),O=C[0],k=C[1],S=Sn().handleReportItem,P=function(e,t){var n=ii().product,r=(0,fr.Z)(),i=(0,j.useState)(!1),o=i[0],a=i[1],s=(0,j.useState)(0),l=s[0],c=s[1],u=(0,j.useState)(0),d=u[0],f=u[1],p=(0,j.useCallback)((function(){if(t)if(r){var n=e.scrollTop,i=n<40?n:40;c((function(e){return e!==i?i:e}));var o=40===l?0:10;f((function(e){return e!==o?o:e}))}else{var s=t.getBoundingClientRect().top;a(s-100<0)}}),[r,e,l,t]);return(0,j.useEffect)((function(){return null===e||void 0===e||e.addEventListener("scroll",p),function(){null===e||void 0===e||e.removeEventListener("scroll",p)}}),[e,p]),(0,j.useEffect)((function(){a(!1)}),[null===n||void 0===n?void 0:n.id]),{isHeaderFixed:o,borderRadius:d,mobileTopOffset:l}}(null===h||void 0===h?void 0:h.current,O),I=P.borderRadius,R=P.isHeaderFixed,w=P.mobileTopOffset;(0,j.useEffect)((function(){var e;(e=_().mark((function e(){var t;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Pn.ZP.itemReportReasonsDetails();case 2:t=e.sent,b(t);case 4:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){Ii(o,r,i,a,s,"next",e)}function s(e){Ii(o,r,i,a,s,"throw",e)}a(void 0)}))})()}),[]);var A=(0,j.useCallback)((function(){p((0,N.yC)(wi({},c,{isOpen:!1,pushRoute:!0}))),p((0,ki.Fr)()),document.body.classList.remove("groceries-item-modal-detail-is-open")}),[p,c]);(0,j.useEffect)((function(){document.body.classList.add("groceries-item-modal-detail-is-open")}),[t,d]);var E=s.details;window.scrollTo(0,0),(0,j.useEffect)((function(){!n&&!o&&t&&(null===a||void 0===a?void 0:a.description)&&E&&Gt.Z.viewItem(a,E)}),[n,o,t,a,E]);var q=function(){x(!0)};return(0,r.jsxs)(r.Fragment,{children:[Z.tq&&(0,r.jsx)(T.u_,{overlayClassName:"product-detail-modal__overlay",variant:"product-detail-modal",animation:"bottom",isOpen:t,type:"fullpage",onRequestClose:A,contentRef:h,scrollLock:!f,style:{overlay:{"--topOffset":"".concat(w,"px"),"--borderRadius":"".concat(I,"px")}},children:(0,r.jsx)(Si,wi({},l,{merchant:s,hasError:o,isLoading:n,product:a,onClose:A,setDetailContentElement:k,isStickyHeader:R,showButtonReport:null===v||void 0===v?void 0:v.enabled,openReportModal:q,isMobile:Z.tq}))}),!Z.tq&&(0,r.jsx)(Si,wi({},l,{merchant:s,hasError:o,isLoading:n,product:a,onClose:A,setDetailContentElement:k,isStickyHeader:!1,isPage:!0,showButtonReport:null===v||void 0===v?void 0:v.enabled,openReportModal:q})),v&&(0,r.jsx)(jn,{isOpen:y,details:v,onRequestClose:function(e){x(!1),e&&S(s.uuid,a.id,e)}})]})}Ti.propTypes={isOpen:k().bool.isRequired,merchant:k().object.isRequired,product:k().object,catalogCode:k().string,merchantSlug:k().object,checkoutId:k().string,isLoading:k().bool.isRequired,hasError:k().bool.isRequired},Ti.defaultProps={product:{code:null,description:null,details:null,needChoices:!1,choices:[],unitPrice:0,unitMinPrice:0,unitOriginalPrice:0,order:0,availability:null,posCode:null,enabled:!1,logoUrl:null,tags:[]},catalogCode:"",merchantSlug:{},checkoutId:void 0};var Ai=n(46220),Ei=n(32790),qi=n.n(Ei);function Mi(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Zi(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Di(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(l){s=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Mi(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Mi(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Li(e){var t=e.deepLink,n=e.params,r=void 0===n?{}:n,i=e.bannerZIndex,o=void 0===i?10002:i,a=(0,j.useRef)(!1),s=qi().APPSFLYER_WEB_KEY,l=qi().APPSFLYER_PBA_KEY,c=("true"===qi().APPSFLYER_ENABLED||!0===qi().APPSFLYER_ENABLED)&&s&&l;(0,j.useEffect)((function(){c&&(window.APPSFLYER_CONFIG={webKey:s,pbaKey:l})}),[c,s,l]);var u=Di((0,Ai.Z)(c?"/static/scripts/appsflyer-stub.js":""),2),d=u[0],f=u[1];return(0,j.useEffect)((function(){if(c&&d&&!f&&!a.current)if("function"===typeof window.AF){var e=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Zi(e,t,n[t])}))}return e}({},r);t&&(e.af_dp=t);try{window.AF("banners","showBanner",{bannerZIndex:o,additionalParams:e}),a.current=!0}catch(n){console.error("[AppsFlyer] Error showing Smart Banner:",n)}}else console.warn("[AppsFlyer] Web SDK not available")}),[c,d,f,t,r,o]),null}var Fi=function(e){var t=e.shouldOpenCatalogItemModal,n=e.shouldOpenGroceriesCatalogItemModal,o=(0,i.v9)(u.Yt),a=(0,i.v9)(u.CC),s=(0,i.v9)(m),c=(0,i.v9)(u.xE),d=(0,i.v9)(u.Xj),f=(0,i.v9)(g),p=(0,i.v9)(y),h=(0,i.v9)(u.XW),v=(0,i.oR)(),b=(0,x.useRouter)().query,C=b.utm_medium,_=b.utm_campaign,O=b.item,k=b.utm_source,S=b.gclid;(0,j.useEffect)((function(){t&&s&&a&&Pn.ZP.groceriesLowStockModel().then((function(e){var t,n=e.tagName,r=v.getState(),i={dish:s,restaurant:a,routerStates:(0,Br.I_)(r),hasDishDiscountTag:Boolean((0,xt.Yk)(null!==(t=null===s||void 0===s?void 0:s.tags)&&void 0!==t?t:[],(0,l.Gp)(r))),isLowStock:(0,Jt.ge)(s,n),utm_properties:JSON.stringify({item_id:O,utm_medium:C,utm_campaign:_,utm_source:k,gclid:S})};v.dispatch((0,Ut.Dy)(i))}))}),[s,a,t,v,O,C,_,k,S]);var P=t&&(null===a||void 0===a?void 0:a.uuid)&&(h||(null===s||void 0===s?void 0:s.id));return(0,r.jsxs)(r.Fragment,{children:[P&&(0,r.jsx)(Li,{deepLink:"ifood://dish/".concat(a.uuid,"/").concat(h||(null===s||void 0===s?void 0:s.id)),params:{merchant_id:a.uuid,dish_id:h||(null===s||void 0===s?void 0:s.id)}}),n?(0,r.jsx)(Ti,{merchantSlug:o,merchant:a,product:s,checkoutId:c,isOpen:t,catalogCode:d,isLoading:f,hasError:p}):(0,r.jsx)(Ln,{restaurantSlug:o,restaurant:a,dish:s,checkoutId:c,isOpen:t,menuCode:d,isLoading:f,hasError:p,dishId:h})]})},Bi=function(){var e=(0,i.v9)(b),t=(0,i.v9)(v);return e&&void 0!==t?(0,r.jsx)(Fi,{shouldOpenCatalogItemModal:e,shouldOpenGroceriesCatalogItemModal:t}):null}},56044:function(e,t,n){"use strict";n.d(t,{dX:function(){return a},iz:function(){return s},RR:function(){return l},yu:function(){return c},bR:function(){return u},ZX:function(){return d},u2:function(){return f},sO:function(){return p},HT:function(){return h},Bw:function(){return m}});var r=n(52668),i=n(42383),o=n(18967),a=function(e){return e.restaurant},s=function(e){var t;return null===(t=a(e))||void 0===t?void 0:t.details},l=function(e){var t;return null===(t=s(e))||void 0===t?void 0:t.name},c=function(e){var t;return null===(t=s(e))||void 0===t?void 0:t.evaluationAverage},u=function(e){var t,n,i,a=null===(i=null===(t=s(e))||void 0===t||null===(n=t.resources)||void 0===n?void 0:n.find((function(e){return"LOGO"===e.type})))||void 0===i?void 0:i.fileName;return(0,o.QW)(r.el.MERCHANT_LOGO,a,r.zf.THUMBNAIL)},d=function(e){var t;return null===(t=s(e))||void 0===t?void 0:t.recent},f=function(e){var t;return null===(t=s(e))||void 0===t?void 0:t.minimumOrderValue},p=function(e){return a(e).filteredCatalog},h=function(e){var t;return!!(null===(t=p(e))||void 0===t?void 0:t.length)},m=function(e){return(0,i.Qs)(e).isLoading.filteredCatalog}},90003:function(e,t,n){"use strict";function r(e){var t;if(e){var n=Boolean(e.choices),r=n&&!(null===(t=e.choices)||void 0===t?void 0:t.some((function(e){var t=e.min,n=e.max,r=e.garnishItens;return t!==n||1!==r.length})));return!n||r}}n.d(t,{k:function(){return r}})},66290:function(e,t,n){"use strict";var r=n(45697),i=n.n(r);t.Z={setToastrMessage:i().func.isRequired}},86997:function(e,t,n){"use strict";n.d(t,{ek:function(){return v}});var r=n(34051),i=n.n(r),o=n(5907),a=n.n(o),s=n(35290),l=n(40507),c=n(59810),u=n(32790),d=n.n(u),f=n(68877);function p(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(c){return void n(c)}s.done?t(l):Promise.resolve(l).then(r,i)}function h(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){p(o,r,i,a,s,"next",e)}function s(e){p(o,r,i,a,s,"throw",e)}a(void 0)}))}}var m=c.ZP.countryCode;function v(){return b.apply(this,arguments)}function b(){return b=h(i().mark((function e(){var t,r,o,c,u,d,p,h,v,b,y,j,x=arguments;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=x.length>0&&void 0!==x[0]?x[0]:"",r=x.length>1&&void 0!==x[1]?x[1]:{},o=x.length>2?x[2]:void 0,c=x.length>3?x[3]:void 0,"google"in n.g){e.next=4;break}return s.cM.critical("Google API was not found"),e.abrupt("return",!1);case 4:if(""===t||!t.replace(" ","").length){e.next=30;break}return a()(r,"onStartCallback",t),u=o?new google.maps.LatLng(o):void 0,e.next=9,f.ZP.isGooglePlaceNewEnabled();case 9:if(d=e.sent,!d.isEnabled){e.next=22;break}return p="",e.next=15,g(t,u,c);case 15:h=e.sent,v=h.suggestions,b=h.token,v&&v.length>0?(a()(r,"onSuccessCallback",v,b),p="OK"):v&&0===v.length?(a()(r,"onSuccessCallback",[],b),p="ZERO_RESULTS"):(p="ERROR",s.cM.error("Autocomplete response status ".concat(p," not expected")),a()(r,"onFailCallback",p)),l.Z.clickSearchAddressAutocompleteActionResult(p),e.next=29;break;case 22:if(y=new google.maps.places.AutocompleteService){e.next=27;break}return s.cM.critical("Autocomplete API was not found"),a()(r,"onFailCallback","ERROR"),e.abrupt("return",!1);case 27:j=o?1e3:void 0,y.getPlacePredictions({input:t,componentRestrictions:{country:[m]},radius:j,location:u},(function(e,t){["OK","ZERO_RESULTS"].includes(t)?"ZERO_RESULTS"===t?a()(r,"onSuccessCallback",[]):a()(r,"onSuccessCallback",e):(s.cM.error("Autocomplete response status '".concat(t,"' not expected")),a()(r,"onFailCallback",t)),l.Z.clickSearchAddressAutocompleteActionResult(t)}));case 29:return e.abrupt("return",!0);case 30:return a()(r,"onSuccessCallback",[]),e.abrupt("return",!0);case 32:case"end":return e.stop()}}),e)}))),b.apply(this,arguments)}function g(e,t,n){return y.apply(this,arguments)}function y(){return(y=h(i().mark((function e(t,n,r){var o,a,s,l,c,u,f;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,google.maps.importLibrary("places");case 2:return o=e.sent,a=o.AutocompleteSessionToken,s=o.AutocompleteSuggestion,l=r||new a,c={input:t,locationBias:n?{radius:1e3,center:n}:void 0,language:d().LOCALE,includedRegionCodes:[m],sessionToken:l},e.next=9,s.fetchAutocompleteSuggestions(c);case 9:if(u=e.sent.suggestions){e.next=12;break}return e.abrupt("return",void 0);case 12:return f=[],u.forEach((function(e){var t=e.placePrediction,n=t.text,r=t.placeId,i=t.mainText,o=t.secondaryText,a=t.types;f.push({description:null===n||void 0===n?void 0:n.toString(),place_id:null===r||void 0===r?void 0:r.toString(),structured_formatting:{main_text:null===i||void 0===i?void 0:i.toString(),secondary_text:null===o||void 0===o?void 0:o.toString()},types:a})})),e.abrupt("return",{suggestions:f,token:l});case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},41266:function(e,t,n){"use strict";n.d(t,{JY:function(){return h},Nm:function(){return p},Ig:function(){return m},RP:function(){return f}});var r=n(38848),i=["PORTION_SIZE","NOT_APPLICABLE"],o=["DIET","FROSTY","LAC_FREE","NATURAL","ORGANIC","SUGAR_FREE","VEGAN","VEGETARIAN","ZERO"],a=n(32790),s=n.n(a);function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(l){s=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(e,t)||d(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e){return function(e){if(Array.isArray(e))return l(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||d(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){if(e){if("string"===typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(e,t):void 0}}function f(e){var t,n,r;return null!==(r=null===(t=e.sellingOption)||void 0===t||null===(n=t.availableUnits)||void 0===n?void 0:n.includes("WEIGHT"))&&void 0!==r&&r}function p(e,t){var n;return t/(null===(n=e.sellingOption)||void 0===n?void 0:n.minimum)*1e3}function h(e){try{var t,n,i=new URL(e,null!==(t=s().DOMAIN)&&void 0!==t?t:"https://www.ifood.com.br");return null!==(n=i.searchParams.get(r.zZ))&&void 0!==n?n:i.searchParams.get(r.e_)}catch(a){var o=e.slice(e.indexOf("?")).split("&").find((function(e){var t=c(e.split("="),1)[0];return t===r.zZ||t===r.e_}));return null==o?null:c(o.split("="),2)[1]}}function m(e){return e.filter((function(e){return!i.includes(e.group)})).reduce((function(e,t){return u(e).concat(u(t.tags))}),[]).filter((function(e){return o.includes(e)}))}},96723:function(){},5845:function(){},8635:function(){},63735:function(){},29306:function(){},47112:function(){},50574:function(){},54635:function(){},92630:function(){},93137:function(){},36867:function(){},7565:function(){},69028:function(){},28556:function(){},78198:function(){},10655:function(){},71209:function(){},36837:function(){},63837:function(){},88579:function(){},11129:function(){},7827:function(){},40348:function(){},71724:function(){},75565:function(){},21501:function(){},34898:function(){},9090:function(){},85410:function(){},19339:function(){},23521:function(){},27540:function(){},25656:function(){},44355:function(){},68532:function(){},677:function(){},84099:function(){},61875:function(){},20323:function(){},70637:function(){},99749:function(){},54322:function(){},70560:function(){},73468:function(){},68783:function(){},33971:function(){},64901:function(){},65770:function(){},84549:function(){},75102:function(){},95002:function(){}}]);
//# sourceMappingURL=1565-36a8d3bca240e8ae.js.map
//# debugId=5065d706-ead4-5883-85c5-3d1d9a8dc215
