
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="963b350f-2bcd-5123-ba62-1d5556341a06")}catch(e){}}();
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5086],{17595:function(e,t,n){"use strict";n.r(t),n.d(t,{OrderViolationModal:function(){return C}});var r=n(85893),o=n(45697),i=n.n(o),u=n(14416),a=n(91768),s=n(67294),d=n(60936),l=n(59387),c=n(36750),f=n(67525),p=n(67926),h=n(15685),v=n(86307);n(42849);function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var y={setNotPromotional:d.rq},m=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){g(e,t,n[t])}))}return e}({},f.Z,{actions:(0,c.Z)(Object.keys(y),i().func.isRequired).isRequired,violation:i().shape({title:i().string,message:i().string}).isRequired,uuid:i().string.isRequired}),b={title:"",message:""};function C(e){var t=e.actions,n=e.violation,o=e.uuid,i=e.t,u=(0,s.useState)(!1),a=u[0],d=u[1],c=(0,s.useState)({title:null===n||void 0===n?void 0:n.title,message:null===n||void 0===n?void 0:n.message}),f=c[0],p=c[1];return(0,s.useEffect)((function(){!(0,v.gc)(null===n||void 0===n?void 0:n.violationCodes)&&Boolean((null===n||void 0===n?void 0:n.title)&&(null===n||void 0===n?void 0:n.message))&&(d(!0),p({title:null===n||void 0===n?void 0:n.title,message:null===n||void 0===n?void 0:n.message}))}),[null===n||void 0===n?void 0:n.title,null===n||void 0===n?void 0:n.message,null===n||void 0===n?void 0:n.violationCodes]),(0,r.jsxs)(l.u_,{isOpen:a,type:"dialog",className:"order-violation-modal",children:[(0,r.jsx)("h3",{className:"order-violation-modal__title",children:null===f||void 0===f?void 0:f.title}),(0,r.jsx)("p",{className:"order-violation-modal__message",children:null===f||void 0===f?void 0:f.message}),(0,r.jsx)(l.zx,{onClick:function(){t.setNotPromotional(o),d(!1),p(b)},variant:"order-violation-modal__button",children:i("common:ok-got-it")})]})}C.propTypes=m;t.default=(0,p.Z)(C,[(0,u.$j)((function(e){var t=e.promotion;return{violation:null===t||void 0===t?void 0:t.violation}}),(0,h.Z)(y),null,{areStatePropsEqual:function(e,t){return(0,u.wU)(e.violation,t.violation)}}),(0,a.Z)()])},40349:function(e,t,n){"use strict";var r=n(85893),o=n(67294),i=n(45697),u=n.n(i),a=n(14416),s=n(14890),d=n(91768),l=n(59387),c=n(40059),f=n(67525),p=n(67926),h=n(40507),v=n(75215);n(25580);function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){g(e,t,n[t])}))}return e}var m={toggleAddressModalAction:c.Ec},b=y({},f.Z,{hasValidAddress:u().bool.isRequired,addressModalIsOpen:u().bool.isRequired,restaurantAddress:u().object,address:u().shape({location:u().shape({address:u().string,geoLocated:u().bool,district:u().string}),streetNumber:u().oneOfType([u().string,u().number])}),positionFixed:u().bool,useScroll:u().bool,isVisibleTopOffset:u().number,marginLeft:u().number,marginTop:u().number,marginBottom:u().number,position:u().string,displayArrow:u().bool,rehydrated:u().bool.isRequired}),C={address:{location:{},streetNumber:""},restaurantAddress:void 0,positionFixed:!1,isVisibleTopOffset:0,marginLeft:-50,marginTop:10,marginBottom:0,position:"bottom",useScroll:!1,displayArrow:!0},O=function(e){var t=e.t,n=e.targetClassName,i=e.positionFixed,u=e.useScroll,a=e.isVisibleTopOffset,s=e.marginLeft,d=e.marginTop,c=e.actions,f=e.hasValidAddress,p=e.addressModalIsOpen,v=e.position,g=e.marginBottom,m=e.displayArrow,b=e.rehydrated,C=(0,o.useState)(!1),O=C[0],R=C[1];(0,o.useEffect)((function(){var e=!b||f||p;R(e),e||h.Z.viewAddressHint()}),[f,p,b]);var j={targetClassName:n,title:t("hint.title"),description:t("hint.description"),rightButtonLabel:t("hint.left-button-label"),leftButtonLabel:t("hint.right-button-label"),onClickRightButton:function(){c.toggleAddressModalAction({open:!0,keepCurrentPageAfterSelect:!0}),h.Z.clickAddressHintAccept()},onClickLeftButton:function(){R(!0),h.Z.clickAddressHintReject()},marginLeft:s,marginTop:d,marginBottom:g,position:v,isVisibleTopOffset:a,isVisibleBottomOffset:100,positionFixed:i,hideOnScroll:!0,dismissed:O,useScroll:u,displayArrow:m};return(0,r.jsx)("div",{className:"address-hint-container",children:(0,r.jsx)(l.kW,y({},j))})};O.propTypes=b,O.defaultProps=C,t.Z=(0,p.Z)(O,[(0,d.Z)(["address"]),(0,a.$j)((function(e){var t=e.address,n=e.addressModal,r=e._persist.rehydrated;return{hasValidAddress:(0,v.NX)(t),addressModalIsOpen:n.open,rehydrated:r}}),(function(e){return{actions:(0,s.DE)(m,e)}}))])},86307:function(e,t,n){"use strict";n.d(t,{xo:function(){return i},s5:function(){return u},_j:function(){return a},Cd:function(){return s},FC:function(){return d},NR:function(){return l},B5:function(){return c},jC:function(){return f},gc:function(){return p},x0:function(){return h}});var r=n(7636),o=n(80668),i=function(e){return e.id===r.Ny.EXPRESS},u=function(e){return e.id===r.Ny.DEFAULT},a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return s(e)||d(e)},s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return null===e||void 0===e?void 0:e.includes(o.md.DeliveryMethodSetDefault)},d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return(null===e||void 0===e?void 0:e.includes(o.md.DeliveryMethodSetScheduled))||(null===e||void 0===e?void 0:e.includes(o.md.CartWeightLimit))},l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return null===e||void 0===e?void 0:e.includes(o.md.SuggestExpressDelivery)},c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return s(e)||d(e)},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return d(e)},p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return s(e)||d(e)||l(e)},h=function(e,t){return i({id:e})&&c(t)||u({id:e})&&f(t)}},65086:function(e,t,n){"use strict";n.r(t),n.d(t,{Restaurant:function(){return Q}});var r=n(85893),o=n(67294),i=n(45697),u=n.n(i),a=n(14416),s=n(27361),d=n.n(s),l=n(14890),c=n(11163),f=n(91768),p=n(85518),h=n(5152),v=n(30548),g=n(48143),y=n(75421),m=n(89209),b=n(69624),C=n(17595),O=n(36750),R=n(17578),j=n(67926),S=n(48271),x=n(38848),k=n(50013),w=n(40349),P=n(59387),D=n(35985),E=n(67525),L=n(19286),_=n(63594),M=n(41266),T=n(75463),q=n(2593);function A(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Z(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function N(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function U(e){return U=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},U(e)}function z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){N(e,t,n[t])}))}return e}function B(e,t){return!t||"object"!==I(t)&&"function"!==typeof t?A(e):t}function V(e,t){return V=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},V(e,t)}var I=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function F(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=U(e);if(t){var o=U(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return B(this,n)}}var G=(0,h.default)((function(){return Promise.all([n.e(5968),n.e(3704),n.e(2193),n.e(2178),n.e(4136),n.e(4450),n.e(5393),n.e(5073),n.e(7896),n.e(169),n.e(6814),n.e(3612)]).then(n.bind(n,58896))}),{loadableGenerated:{webpack:function(){return[58896]}}}),W=(0,h.default)((function(){return Promise.all([n.e(5968),n.e(3704),n.e(4136),n.e(5020),n.e(4450),n.e(5393),n.e(5073),n.e(7896),n.e(169),n.e(5046)]).then(n.bind(n,1356))}),{loadableGenerated:{webpack:function(){return[1356]}}}),$=(0,h.default)((function(){return n.e(9194).then(n.bind(n,49194))}),{loadableGenerated:{webpack:function(){return[49194]}}}),H={updateRestaurantUuid:g.Eo,fetchRestaurantDetails:g.zD,fetchRestaurantMenu:m.lr,fetchRestaurantDeliveryInfo:y.zJ,fetchRestaurantEvaluations:b.rs,setDishState:k.yC,setRestaurantConfig:v.Dy,fetchGetVoucherRequest:R.Wg,setMultiCategoriesCategory:_.bG,setRestaurantPixelUuid:g.$2},J=z({},E.Z,{actions:(0,O.Z)(Object.keys(H),u().func.isRequired).isRequired,uuid:u().string,coords:u().object,zipCode:u().number,router:u().object,restaurantCity:u().string,isDishOpen:u().bool.isRequired,product:u().string,source:u().string,rehydrated:u().bool,authenticated:u().bool.isRequired,isGrocery:u().bool.isRequired,restaurantUuid:u().string}),X={uuid:void 0,coords:{},router:{},zipCode:void 0,restaurantCity:void 0,product:void 0,source:void 0,rehydrated:!1,restaurantUuid:void 0},Q=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&V(e,t)}(u,e);var t,n,o,i=F(u);function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=i.call(this,e)).state={bustedCache:!1},t.handleRouteChange=t.handleRouteChange.bind(A(t)),t}return t=u,(n=[{key:"componentDidMount",value:function(){var e=this.props,t=e.uuid,n=e.actions,r=e.coords,o=e.product,i=e.source,u=e.zipCode,a=e.rehydrated,s=e.authenticated,d=e.merchantType,l=e.merchantMainCategoryCode;null!==this.props.merchantPixel&&n.setRestaurantPixelUuid({pixelUuid:this.props.merchantPixel}),this.props.merchantPixel&&(q.o.initPixel(this.props.merchantPixel),q.o.pageView(this.props.merchantPixel)),o&&i&&n.setRestaurantConfig(t,{product:o,source:i}),t&&this.hasLatLon()&&a&&n.fetchRestaurantDeliveryInfo(z({},r,{zipCode:u,restaurantUuid:t}),!0),!1===this.state.bustedCache&&(n.fetchRestaurantDetails(t,!0,!0),n.fetchRestaurantEvaluations({uuid:t,reset:!0,page:1},!0),this.setState({bustedCache:!0})),this.handleDishOpening(),s&&r.latitude&&r.longitude&&n.fetchGetVoucherRequest(),d&&n.setMultiCategoriesCategory((0,L.n)(d,l)),T.Router.events.on("routeChangeComplete",this.handleRouteChange)}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.uuid,r=t.actions,o=t.coords,i=t.product,u=t.source,a=t.rehydrated,s=t.zipCode,d=t.authenticated,l=t.merchantType,c=t.merchantMainCategoryCode,f=t.restaurantUuid,p=t.isCheckoutOpened,h=e.coords.latitude!==o.latitude||e.coords.longitude!==o.longitude;n&&e.uuid!==n&&this.hasLatLon()?(r.updateRestaurantUuid({uuid:n},!0),r.fetchRestaurantDetails(n,!0,!0),r.fetchRestaurantEvaluations({uuid:n,reset:!0,page:1},!0)):!1===this.state.bustedCache?(r.fetchRestaurantDetails(n,!0,!0),r.fetchRestaurantEvaluations({uuid:n,reset:!0,page:1},!0),this.setState({bustedCache:!0})):h&&this.hasLatLon()&&r.fetchRestaurantMenu(n,!0),n===f||p||r.updateRestaurantUuid({uuid:n},!0),n&&this.hasLatLon()&&a&&!(0,S.Z)(e.coords,o)&&(r.fetchRestaurantDeliveryInfo(z({},o,{zipCode:s,restaurantUuid:n}),!0),d&&r.fetchGetVoucherRequest());var v=i&&u,g=i!==e.product&&u!==e.source,y=a&&a!==e.rehydrated;v&&(g||y)&&r.setRestaurantConfig(n,{product:i,source:u}),e.merchantType===l&&e.merchantMainCategoryCode===c||r.setMultiCategoriesCategory((0,L.n)(l,c))}},{key:"componentWillUnmount",value:function(){T.Router.events.off("routeChangeComplete",this.handleRouteChange)}},N({key:"handleDishOpening"},"value",(function(){var e=this.props,t=e.router,n=e.isDishOpen,r=e.actions,o=e.merchantType,i=e.merchantMainCategoryCode,u=t.query,a=u.citySlug,s=u.slug,d=u[x.e_],l=u[x.zZ],c=u.checkoutId,f=u.uuid,p=null!==d&&void 0!==d?d:l;!n&&a&&s&&f&&p&&r.setDishState({isOpen:!0,checkoutId:c,restaurantSlug:{citySlug:a,slug:s,uuid:f},dishId:p,category:(0,L.n)(o,i)})})),{key:"handleRouteChange",value:function(e){var t=this.props,n=t.router,r=t.actions,o=t.isDishOpen,i=t.merchantType,u=t.merchantMainCategoryCode,a=n.query,s=a.citySlug,d=a.slug,l=a.checkoutId,c=a.uuid,f=(0,M.JY)(e);f&&!o&&r.setDishState({isOpen:!0,checkoutId:l,restaurantSlug:{citySlug:s,slug:d,uuid:c},dishId:f,category:(0,L.n)(i,u)})}},{key:"hasLatLon",value:function(){var e=this.props.coords;return null!=e.latitude&&null!=e.longitude}},{key:"render",value:function(){var e=this.props,t=e.router.query.citySlug,n=e.restaurantCity,o=e.uuid,i=e.isEmbed,u=e.isGrocery;return(0,r.jsxs)(r.Fragment,{children:[u?(0,r.jsx)(G,{}):(0,r.jsx)(W,{}),(0,r.jsx)(C.default,{uuid:o}),!i&&!p.tq&&(0,r.jsx)($,{show:{cities:!1,about:!0},cities:[{city:n,slug:t}]}),(0,r.jsx)(P.zP,{min:"desktop-s",allowSSR:!1,children:(0,r.jsx)(w.Z,{positionFixed:!1,targetClassName:"delivery-input"})}),(0,r.jsx)(P.zP,{max:"desktop-s",allowSSR:!1,children:(0,r.jsx)(w.Z,{positionFixed:!0,useScroll:!0,targetClassName:"tab-bar",marginLeft:20,marginTop:0,marginBottom:10,position:"top",displayArrow:!1})})]})}}])&&Z(t.prototype,n),o&&Z(t,o),u}(o.Component);Q.propTypes=J,Q.defaultProps=X;t.default=(0,j.Z)(Q,[D.Q,(0,a.$j)((function(e){var t,n,r,o=e.address,i=e.restaurant,u=e.dishModal,a=e.contextCard,s=e._persist;return{coords:o.coords,zipCode:o.location.zipCode,restaurantCity:d()(i,"details.address.city"),isLoading:d()(i,"isLoading"),isDishOpen:u.isOpen,rehydrated:(s||{}).rehydrated,merchantType:null===(t=i.details)||void 0===t?void 0:t.type,merchantMainCategoryCode:null===(n=i.details)||void 0===n||null===(r=n.mainCategory)||void 0===r?void 0:r.code,restaurant:i,restaurantUuid:i.uuid,isCheckoutOpened:a.checkout.isOpened}}),(function(e){return{actions:(0,l.DE)(H,e)}})),c.withRouter,(0,f.Z)(["common","seo"])],{hoistStatics:!0})},42849:function(){},25580:function(){}}]);
//# sourceMappingURL=5086-892b52d8f8ccedd3.js.map
//# debugId=963b350f-2bcd-5123-ba62-1d5556341a06
